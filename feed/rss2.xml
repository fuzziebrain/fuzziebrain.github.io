<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Thinking Anew</title>
    <link>https://fuzziebrain.com/</link>
    
    <atom:link href="https://fuzziebrain.com/feed/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description></description>
    <pubDate>Tue, 11 Oct 2022 00:14:00 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>Speak My Language</title>
      <link>https://fuzziebrain.com/content/id/2201/</link>
      <guid>https://fuzziebrain.com/content/id/2201/</guid>
      <pubDate>Mon, 10 Oct 2022 07:00:00 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2201/welcome-g84fb3b5fb_1280_853.jpg&quot; class=&quot;&quot; title=&quot;Welcome in multiple languages.&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Welcome in multiple languages.&lt;/span&gt;

&lt;p&gt;It’s been too long since I last posted anything on my blog. Thanks to &lt;a href=&quot;https://twitter.com/oraclebase&quot;&gt;Tim Hall&lt;/a&gt;, I am writing again, after a long pause, to celebrate &lt;a href=&quot;https://oracle-base.com/blog/2022/09/27/joel-kallman-day-2022-announcement/&quot;&gt;Joel Kallman Day 2022&lt;/a&gt;. My contribution today is about my deep appreciation for the team behind the &lt;a href=&quot;https://oracle.com/cloud&quot;&gt;Oracle Cloud Infrastructure&lt;/a&gt; (OCI) &lt;a href=&quot;https://www.oracle.com/artificial-intelligence/ai-services/&quot;&gt;AI Services&lt;/a&gt;. Below is a quick scoop on how I have used these services to improve on my &lt;a href=&quot;https://developer.oracle.com/tutorials/learning-languages-with-oracle-cloud/&quot;&gt;OCI-powered e-flashcard&lt;/a&gt; for learning new words in a different language. I will be doing a quick demonstration (session LRN3673) of this work at the upcoming &lt;a href=&quot;https://www.oracle.com/cloudworld/&quot;&gt;Oracle CloudWorld 2022&lt;/a&gt;.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2201/welcome-g84fb3b5fb_1280_853.jpg" class="" title="Welcome in multiple languages."><span class="caption">Welcome in multiple languages.</span><p>It’s been too long since I last posted anything on my blog. Thanks to <a href="https://twitter.com/oraclebase">Tim Hall</a>, I am writing again, after a long pause, to celebrate <a href="https://oracle-base.com/blog/2022/09/27/joel-kallman-day-2022-announcement/">Joel Kallman Day 2022</a>. My contribution today is about my deep appreciation for the team behind the <a href="https://oracle.com/cloud">Oracle Cloud Infrastructure</a> (OCI) <a href="https://www.oracle.com/artificial-intelligence/ai-services/">AI Services</a>. Below is a quick scoop on how I have used these services to improve on my <a href="https://developer.oracle.com/tutorials/learning-languages-with-oracle-cloud/">OCI-powered e-flashcard</a> for learning new words in a different language. I will be doing a quick demonstration (session LRN3673) of this work at the upcoming <a href="https://www.oracle.com/cloudworld/">Oracle CloudWorld 2022</a>.</p><span id="more"></span><h2 id="The-E-Flashcard-Solution"><a href="#The-E-Flashcard-Solution" class="headerlink" title="The E-Flashcard Solution"></a>The E-Flashcard Solution</h2><p>A <strong>TL;DR</strong> for my initial article on the e-flashcard solution.</p><p>On my fridge, I have a <a href="https://shop.m5stack.com/collections/m5-controllers/products/m5paper-esp32-development-kit-v1-1-960x540-4-7-eink-display-235-ppi">M5Paper</a> that pulls a random English word or phrase from an <a href="https://www.oracle.com/autonomous-database/">Oracle Autonomous Database</a>. The word/phrase and the Japanese translation are entered using an <a href="https://apex.oracle.com/">Oracle Application Express</a> (APEX) and exposed as a REST service using <a href="https://www.oracle.com/database/technologies/appdev/rest.html">Oracle REST Data Services</a>. The translation task was performed manually using a tool like <a href="https://translate.google.com/">Google Translate</a>.</p><p>Then <a href="https://twitter.com/dgielis">Dimitri Gielis</a> made this suggestion:</p><img src="/content/id/2201/dgielis-tweet.png" class="" title="Source: https:&#x2F;&#x2F;twitter.com&#x2F;dgielis&#x2F;status&#x2F;1358781075879845888"><span class="caption">Source: https:&#x2F;&#x2F;twitter.com&#x2F;dgielis&#x2F;status&#x2F;1358781075879845888</span><p>The second version of my implementation isn’t quite driven by <a href="https://developer.amazon.com/alexa">Amazon Alexa</a> yet, but at least for the web interface, I had added a voice input functionality that allowed me to speak a word and translate it to a language of my choosing.</p><blockquote><p>Voice =&gt; APEX =&gt; Speech Service =&gt; Language Service =&gt; DB =&gt; ORDS =&gt; M5Paper</p></blockquote><h2 id="Speech-Service"><a href="#Speech-Service" class="headerlink" title="Speech Service"></a>Speech Service</h2><p>Released in early 2022, the <a href="https://www.oracle.com/artificial-intelligence/speech/">Speech Service</a> is one of several OCI’s AI Services that uses Automatic Speech Recognition (ASR) technology to transcribe audio content to text. Initially, the service was very limited in what audio formats it received, specifically, it had to be single channel at a sample rate of 16,000 Hz, encoded in <a href="https://wikipedia.org/wiki/Pulse-code_modulation">PCM</a>, and saved in the <a href="https://wikipedia.org/wiki/WAV">WAV</a> format.</p><p>The strict requirements made it difficult to implement using a purely web-based interface. One would have to capture the audio using the <a href="https://developer.mozilla.org/docs/Web/API/MediaRecorder">Media Recorder API</a> and any of its <a href="https://developer.mozilla.org/en-US/docs/Web/Media/Formats/codecs_parameter">supported codecs</a>, transcode it using <a href="https://ffmpeg.org/">FFmpeg</a>, executed using <a href="https://www.oracle.com/cloud/cloud-native/functions/">Oracle Cloud Functions</a>, and then submitted a Speech transcription job.</p><p>I then looked at other solutions that used Web Assembly to perform the audio format purely in the browser, such as <a href="https://kbumsik.io/opus-media-recorder/">Opus MediaRecorder</a> and <a href="https://ffmpegwasm.netlify.app/">FFMPEG.WASM</a>. Unfortunately, I ran out of time, got busy, and had to put this project on hold.</p><p>Thankfully, months later, a newer version of the service was <a href="https://blogs.oracle.com/ai-and-datascience/post/oci-speech-now-supports-seven-new-languages-and-additional-input-formats">released</a>. Apart from the new languages supported, it also allowed users to submit audio files in a other formats, several of which are supported by the Media Recorder API. Hurrah!</p><p>I kept most of the initial prototype and updated the <em>Ajax Callback</em>.</p><img src="/content/id/2201/audio-record-ui.png" class="" title="Recording audio through an APEX modal page."><span class="caption">Recording audio through an APEX modal page.</span><p>I will avoid making this post unreadable by not listing the source code of the PL/SQL procedure I wrote, but here’s the pseudocode:</p><ol><li>Upload the recorded audio as a BLOB and store it in OCI <a href="https://www.oracle.com/cloud/storage/object-storage/">Object Storage</a>.</li><li>Create a transcription job.</li><li>If successful, query the transcription job using the job’s <a href="https://docs.oracle.com/iaas/Content/General/Concepts/identifiers.htm">OCID</a>.</li><li>Loop until the job state is either <code>SUCCEEDED</code>, <code>FAILED</code>, or <code>CANCELED</code>.</li><li>If the state is <code>SUCCEEDED</code>, then get the transcription job’s task and get the location of the results stored as an object in the Object Storage.</li><li>Retrieve the transcription results stored as JSON.</li></ol><h2 id="Language-Service-“V2”"><a href="#Language-Service-“V2”" class="headerlink" title="Language Service “V2”"></a>Language Service “V2”</h2><p>In Chapter 4 of the book <a href="https://link.springer.com/book/10.1007/978-1-4842-8170-3">“Extending Oracle Application Express with Oracle Cloud Features “</a>, I describe how you can host and use a language translation service using a few OCI resources and an open sourced engine like <a href="https://libretranslate.com/">LibreTranslate</a>. Before getting limited access to the next generation of Language Service, my solution looked like this:</p><img src="/content/id/2201/translation-past.png" class="" title="Initial approach to language translation."><span class="caption">Initial approach to language translation.</span><p>Since then, I have abandoned all of that for a simplified solution using the Language pretrained models for text translation. As there is limited availability, so is the documentation. Fortunately, the service also comes with an OCI Console-based user interface to try out the service. With that, I was able to figure out what I needed to call the service in the APEX application through REST. Believe me, it’s not difficult.</p><blockquote><p><u>Photo Credits</u></p><p>This post’s banner photo is by <a href="https://pixabay.com/users/tumisu-148124/">Tumisu</a> on <a href="https://pixabay.com/illustrations/welcome-words-greeting-language-905562/">Pixabay</a>.</p></blockquote>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/">Infrastructure</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/oracle-cloud/">Oracle Cloud</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/oracle-cloud/">oracle cloud</category>
      
      <category domain="https://fuzziebrain.com/tags/oci/">oci</category>
      
      <category domain="https://fuzziebrain.com/tags/artificial-intelligence/">artificial intelligence</category>
      
      <category domain="https://fuzziebrain.com/tags/machine-learning/">machine learning</category>
      
      <category domain="https://fuzziebrain.com/tags/natural-language-processing/">natural language processing</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2201/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Will You Love Me Tomorrow</title>
      <link>https://fuzziebrain.com/content/id/2014/</link>
      <guid>https://fuzziebrain.com/content/id/2014/</guid>
      <pubDate>Sun, 17 Oct 2021 07:00:00 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2014/drew-beamer-xU5Mqq0Chck-1280x800.png&quot; class=&quot;&quot; title=&quot;Crystal ball insights into tomorrow?&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Crystal ball insights into tomorrow?&lt;/span&gt;

&lt;blockquote&gt;
&lt;p&gt;Is this a lasting treasure, or just a moment’s pleasure?&lt;/p&gt;
&lt;p&gt;~ &lt;em&gt;Will You Love Me Tomorrow&lt;/em&gt;. The Shirelles.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As a technologist, we are constantly bombarded with buzzwords and terms like blockchain, IoT, AI, machine learning, quantum computing, and so much more! I love buzzwords, and wholeheartedly enjoy deciphering the future of technology and work. Hence, for the last few years, I have been a proud member of the committee that peruses and selects abstracts for the Kscope Emerging Technology (ET) track. For next year’s &lt;a href=&quot;https://kscope22.odtug.com/&quot;&gt;Kscope22&lt;/a&gt;, I am honoured to be leading the team that will help select a series of sessions that are visionary, and hopefully, give us guidance on what to expect in the years ahead.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2014/drew-beamer-xU5Mqq0Chck-1280x800.png" class="" title="Crystal ball insights into tomorrow?"><span class="caption">Crystal ball insights into tomorrow?</span><blockquote><p>Is this a lasting treasure, or just a moment’s pleasure?</p><p>~ <em>Will You Love Me Tomorrow</em>. The Shirelles.</p></blockquote><p>As a technologist, we are constantly bombarded with buzzwords and terms like blockchain, IoT, AI, machine learning, quantum computing, and so much more! I love buzzwords, and wholeheartedly enjoy deciphering the future of technology and work. Hence, for the last few years, I have been a proud member of the committee that peruses and selects abstracts for the Kscope Emerging Technology (ET) track. For next year’s <a href="https://kscope22.odtug.com/">Kscope22</a>, I am honoured to be leading the team that will help select a series of sessions that are visionary, and hopefully, give us guidance on what to expect in the years ahead.</p><span id="more"></span><p>For the last few Kscopes, ET sessions generally fell under this selection criteria:</p><ol><li>About the following subject(s):<ul><li>Artificial Intelligence and Machine Learning</li><li>Blockchain</li><li>Internet of Things (IoT)</li><li>Serverless Computing</li><li>Chatbots</li></ul></li><li>Involve Oracle technology</li></ol><p>Today, many of these exciting technologies have gone mainstream, and so, we have decided to give the ET track a facelift. For next year’s conference, we have decided to focus on new subject areas. They are:</p><ul><li>AI Engineering</li><li>AIOps</li><li>Digital Twins</li><li>Distributed Cloud</li><li>General Advancements in Technology</li><li>Hyperautomation</li><li>Internet of Behaviours</li><li>Next-Generate Security</li><li>Quantum Computing</li><li>Sustainability</li><li>Total Experience</li></ul><p>You can find this list and a brief description of each theme <a href="https://kscope22.odtug.com/page/kscope22-tracks#emergingtech">here</a>.</p><p>I should also emphasize that the use of Oracle technology is <strong>NOT</strong> required. Sure it would be nice that it does, but it is important that we look beyond our comfort zones. If you are not an Oracle professional but have something novel to share, then I strongly encourage you to submit an abstract. This is also a great opportunity for researchers, post-docs, and post-graduate students to share your research. Getting a talk accepted means a <em>FREE</em> ticket (air tickets and <a href="https://kscope22.odtug.com/page/kscope22-location">luxurious accommodation</a> are not included) to attend one of the top tech conferences in the world. And for those of you who are, go through your address books and LinkedIn connections lists, and spread the word. Invite a luminary to join us in Texas next year! Or, if you prefer, you may send <a href="https://twitter.com/fuzziebrain">me</a> suggestions <em>via</em> Twitter.</p><p>Stay healthy and enjoy this rendition of the song <em>Will You Love Me Tomorrow</em> by one of my favourite songwriters, <a href="https://wikipedia.org/wiki/Carole_King">Carole King</a>.</p><div class="video-container"><iframe src="https://www.youtube.com/embed/TxWrUtbzlLM" frameborder="0" loading="lazy" allowfullscreen></iframe></div><blockquote><p><u>Photo Credits</u></p><p>This post’s banner photo is by <a href="https://unsplash.com/@drew_beamer?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Drew Beamer</a> on <a href="https://unsplash.com/s/photos/future?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a>.</p></blockquote>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/conferences/">Conferences</category>
      
      
      <category domain="https://fuzziebrain.com/tags/odtug/">odtug</category>
      
      <category domain="https://fuzziebrain.com/tags/community/">community</category>
      
      <category domain="https://fuzziebrain.com/tags/oracle/">oracle</category>
      
      <category domain="https://fuzziebrain.com/tags/emerging-technology/">emerging technology</category>
      
      <category domain="https://fuzziebrain.com/tags/kscope/">kscope</category>
      
      <category domain="https://fuzziebrain.com/tags/kscope22/">kscope22</category>
      
      <category domain="https://fuzziebrain.com/tags/future/">future</category>
      
      <category domain="https://fuzziebrain.com/tags/abstract/">abstract</category>
      
      <category domain="https://fuzziebrain.com/tags/speak/">speak</category>
      
      <category domain="https://fuzziebrain.com/tags/presentation/">presentation</category>
      
      <category domain="https://fuzziebrain.com/tags/digital-transformation/">digital transformation</category>
      
      <category domain="https://fuzziebrain.com/tags/lifelong-learning/">lifelong learning</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2014/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Secret Agent APEX</title>
      <link>https://fuzziebrain.com/content/id/2013/</link>
      <guid>https://fuzziebrain.com/content/id/2013/</guid>
      <pubDate>Mon, 11 Oct 2021 20:30:00 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2013/kristina-flour-BcjdbyKWquw-1280x800.png&quot; class=&quot;&quot; title=&quot;Ssshhh! Do not tell anyone!&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Ssshhh! Do not tell anyone!&lt;/span&gt;

&lt;p&gt;For a long time now, I have been eagerly awaiting for out-of-the-box &lt;a href=&quot;https://wikipedia.org/wiki/RSA_(cryptosystem)&quot;&gt;RSA encryption&lt;/a&gt; support with pure PL/SQL. Not so much for to sharing secrets, but rather, the ability to sign messages and verify signatures. I might have missed the announcements, but it looks like my wait is over support with asymmetric key operations added in 21c, and (perhaps backported) in 19c as-of release 19.9.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2013/kristina-flour-BcjdbyKWquw-1280x800.png" class="" title="Ssshhh! Do not tell anyone!"><span class="caption">Ssshhh! Do not tell anyone!</span><p>For a long time now, I have been eagerly awaiting for out-of-the-box <a href="https://wikipedia.org/wiki/RSA_(cryptosystem)">RSA encryption</a> support with pure PL/SQL. Not so much for to sharing secrets, but rather, the ability to sign messages and verify signatures. I might have missed the announcements, but it looks like my wait is over support with asymmetric key operations added in 21c, and (perhaps backported) in 19c as-of release 19.9.</p><span id="more"></span><h2 id="JoelKallman-Day"><a href="#JoelKallman-Day" class="headerlink" title="#JoelKallman Day"></a>#JoelKallman Day</h2><p>Before we continue though, along with many other members of the Oracle community, I’d like to ask that you take a one-minute pause to remember <a href="https://twitter.com/joelkallman">Joel Kallman</a> on this day. Joel was a wonderful man who was not only passionate about his work, but was even more devoted to uplifting others. He was taken away from us too soon, but the best way to move forward, is to continue his work and mould ourselves with his legacy.</p><h2 id="Secret-Story-Continued…"><a href="#Secret-Story-Continued…" class="headerlink" title="Secret Story Continued…"></a>Secret Story Continued…</h2><p>Before this release, supporting RSA encryption typically involved installing a Java package and writing some custom PL/SQL code. With Oracle Database 19.9 and 21.x, The updated <code>DBMS_CRYPTO</code> package now includes four new functions:</p><ul><li><code>PKENCRYPT</code></li><li><code>PKDECRYPT</code></li><li><code>SIGN</code></li><li><code>VERIFY</code></li></ul><p>By default, new schemas do not have the appropriate privileges to execute the <code>DBMS_CRYPTO</code> package, so please kindly request it from your DBA. The grant statement that you will need is:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">execute</span> <span class="keyword">on</span> dbms_crypto <span class="keyword">to</span> jenglish;</span><br></pre></td></tr></table></figure><p>To demonstrate how to use these new PL/SQL APIs, I have created a simple <a href="https://apex.oracle.com/">Oracle Application Express</a> (APEX) application that users will:</p><ol><li>Load a private key.</li><li>Decrypt a message that was signed by the receiver’s public key.</li><li>Load the sender’s public key and a base64-encoded signature signed using the sender’s private key. The sender’s public key will be used to verify the signature.</li></ol><h3 id="Generate-the-Keys"><a href="#Generate-the-Keys" class="headerlink" title="Generate the Keys"></a>Generate the Keys</h3><p>For secure and non-repudiable communications, participants in the conversation would each generate a private-public key pair, and <strong>only</strong> exchange their public keys. To create the key pair, the common tool used is <a href="https://www.openssl.org/">OpenSSL</a>. These days, you can find the application already installed in Linux, Mac, and Windows. For me, Alice loves working with Bash and so here’s the command that she can use to generate her private key:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out alice_key.pem 2048</span><br></pre></td></tr></table></figure><p>And then followed by a command to get her public key to be shared with her peers:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl rsa -<span class="keyword">in</span> alice_key.pem -outform PEM -pubout -out alice_key_public.pem</span><br></pre></td></tr></table></figure><p>The private key should look somewhat like this:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN RSA PRIVATE KEY-----</span><br><span class="line">MIIEogIBAAKCAQEAy/wiWejt+fKwrT7NHTTEeKuWrWqC4KwzpjWUSCK0zWh832xL</span><br><span class="line">jnrZuJc6Sl8gmMz6/p8p6T2NrJEBIda1EbjAD/W4G7IUykf5LrlICEJ3miJV33WL</span><br><span class="line">wpFaFI6wmIas2PpodYhMqA0HngEMTP4oQS4AHnVuxn2naijzeRa0HbG55pAr2K1J</span><br><span class="line">...</span><br><span class="line">/bneFDA7jyv3bbOujCkk3DpaBjHXunqz5JmAJ6JqqMhzCQwRQ7c=</span><br><span class="line">-----END RSA PRIVATE KEY-----</span><br></pre></td></tr></table></figure><p>And the public key:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN PUBLIC KEY-----</span><br><span class="line">MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAy/wiWejt+fKwrT7NHTTE</span><br><span class="line">eKuWrWqC4KwzpjWUSCK0zWh832xLjnrZuJc6Sl8gmMz6/p8p6T2NrJEBIda1EbjA</span><br><span class="line">D/W4G7IUykf5LrlICEJ3miJV33WLwpFaFI6wmIas2PpodYhMqA0HngEMTP4oQS4A</span><br><span class="line">HnVuxn2naijzeRa0HbG55pAr2K1J+R/o5hOp460iEbP0HWM16QBwI2TTPfq0R+fz</span><br><span class="line">KE2EA72g/gbttWSUdRZE/ZdDzG1ZE06RAfu7bNP7GQqGcyMTJ+bv3zWkYlMeDSQD</span><br><span class="line">5foCzTHrcDomRL9H/snPSfMpnOzn8xwndZcwBE1ydy852NJatIRbPitglgNMKzfi</span><br><span class="line">8QIDAQAB</span><br><span class="line">-----END PUBLIC KEY-----</span><br></pre></td></tr></table></figure><p>Do the same for Charlie.</p><h3 id="Stripping-the-Keys"><a href="#Stripping-the-Keys" class="headerlink" title="Stripping the Keys"></a>Stripping the Keys</h3><p>In the early days of <a href="https://oracle.com/cloud/">Oracle Cloud Infrastructure</a> <a href="https://docs.cloud.oracle.com/iaas/api/">REST API</a> support in APEX, you might recall from this <a href="https://blogs.oracle.com/oraclemagazine/post/better-file-storage-in-oracle-cloud">article</a>, that we had to remove the enclosing tags and linefeeds. While this is no longer required when working with APEX Web Credentials, it’s still necessary when working with the <code>DBMS_CRYPTO</code> API. Since we are going to need this a lot, I decided to follow the <a href="https://wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> principle and coded a function to strip these unwanted characters from any RSA private or public keys entered.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">function</span> strip_rsa_key(p_rsa_key <span class="keyword">in</span> varchar2)</span><br><span class="line"><span class="keyword">return</span> varchar2</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">return</span> regexp_replace(</span><br><span class="line">    p_rsa_key</span><br><span class="line">    ,<span class="string">&#x27;(-+((BEGIN|END) (RSA )?(PUBLIC|PRIVATE) KEY)-+\s?|\s)&#x27;</span></span><br><span class="line">    , <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="operator">/</span></span><br></pre></td></tr></table></figure><h3 id="Secret-Agent-APEX"><a href="#Secret-Agent-APEX" class="headerlink" title="Secret Agent APEX"></a>Secret Agent APEX</h3><p>I create a simple APEX application with two pages. Page 1 includes the workflow for steps 2 and 3. To avoid displaying the private key once set, a dedicated page 2 was created to provide that information.</p><h3 id="Load-a-Private-Key"><a href="#Load-a-Private-Key" class="headerlink" title="Load a Private Key"></a>Load a Private Key</h3><p>Alice loves Bash, but she happens to own a Windows machine, so she often relies on Windows Subsystem for Linux v2 (WSL2). In Windows, there’s also a helpful utility to copy text to the clipboard. The following command copies Alice’s private key to her clipboard:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clip.exe &lt; alice_key.pem</span><br></pre></td></tr></table></figure><p>She then pastes the clipboard contents into the textarea on page 2.</p><img src="/content/id/2013/load-private-key.png" class="" title="Load private key page"><span class="caption">Load private key page</span><p>This should activate the <em>Decrypt</em> button back on page 1.</p><h3 id="Decrypt-the-Secret-Message"><a href="#Decrypt-the-Secret-Message" class="headerlink" title="Decrypt the Secret Message"></a>Decrypt the Secret Message</h3><p>The secret message that Charlie is sending to Alice will be encrypted using her public key. At the moment, the API appears to only support RSA Public Key Cryptosystem with PKCS1 and OAEP padding. So, if I am not mistaken, Alice should be able to generate the encrypted message using the following OpenSSL command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;Bob has no keys&quot;</span> | openssl rsautl -pubin -inkey alice_key_public.pem \</span><br><span class="line">  -encrypt -oaep | openssl <span class="built_in">base64</span></span><br></pre></td></tr></table></figure><p>Unfortunately, she couldn’t get it to work at the time of writing. If you had any pointers, please feel free to comment below. For now, to continue, Alice generated the encrypted message using the function <code>DBMS_CRYPTO.PKENCRYPT</code>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  l_input_string varchar2(<span class="number">100</span>) :<span class="operator">=</span> <span class="string">&#x27;Bob has no keys&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  l_public_key raw(<span class="number">4000</span>);</span><br><span class="line">  l_encrypted_output raw(<span class="number">4000</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  l_public_key :<span class="operator">=</span></span><br><span class="line">    utl_i18n.string_to_raw(strip_rsa_key(q<span class="string">&#x27;[</span></span><br><span class="line"><span class="string">-----BEGIN PUBLIC KEY-----</span></span><br><span class="line"><span class="string">MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAy/wiWejt+fKwrT7NHTTE</span></span><br><span class="line"><span class="string">eKuWrWqC4KwzpjWUSCK0zWh832xLjnrZuJc6Sl8gmMz6/p8p6T2NrJEBIda1EbjA</span></span><br><span class="line"><span class="string">D/W4G7IUykf5LrlICEJ3miJV33WLwpFaFI6wmIas2PpodYhMqA0HngEMTP4oQS4A</span></span><br><span class="line"><span class="string">HnVuxn2naijzeRa0HbG55pAr2K1J+R/o5hOp460iEbP0HWM16QBwI2TTPfq0R+fz</span></span><br><span class="line"><span class="string">KE2EA72g/gbttWSUdRZE/ZdDzG1ZE06RAfu7bNP7GQqGcyMTJ+bv3zWkYlMeDSQD</span></span><br><span class="line"><span class="string">5foCzTHrcDomRL9H/snPSfMpnOzn8xwndZcwBE1ydy852NJatIRbPitglgNMKzfi</span></span><br><span class="line"><span class="string">8QIDAQAB</span></span><br><span class="line"><span class="string">-----END PUBLIC KEY-----</span></span><br><span class="line"><span class="string">    ]&#x27;</span>));</span><br><span class="line"></span><br><span class="line">  l_encrypted_output :<span class="operator">=</span></span><br><span class="line">    dbms_crypto.pkencrypt(</span><br><span class="line">      src <span class="operator">=</span><span class="operator">&gt;</span> utl_i18n.string_to_raw(l_input_string)</span><br><span class="line">      , pub_key <span class="operator">=</span><span class="operator">&gt;</span> l_public_key</span><br><span class="line">      , pubkey_alg <span class="operator">=</span><span class="operator">&gt;</span> dbms_crypto.key_type_rsa</span><br><span class="line">      , enc_alg <span class="operator">=</span><span class="operator">&gt;</span> dbms_crypto.pkencrypt_rsa_pkcs1_oaep</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">  dbms_output.put_line(utl_i18n.raw_to_char(utl_encode.base64_encode(l_encrypted_output)));</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="operator">/</span></span><br></pre></td></tr></table></figure><p>Here’s an example of the base64-encoded, encrypted output:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Wb3KKyyu+8/MxRKn/kIoqAt4ZMsSvE7AZ/Gr+/3x+xHedtxvj504sy7pffIT1BTl</span><br><span class="line">AbvVdjpcZ+VsxNpYCeN3Q/47R51YKPu/2P5u8FiY+nOLPu+sN5hQc4a6WdHVvRL/</span><br><span class="line">wvXOhSx0fV6M4OtAO7KMuNrrRCqBlOCXPkIIHMeReAq1YVyVuRrofuDptznuEiOo</span><br><span class="line">MKIt6s0j95n9RGCNWC3dI3Rsr+Nm64psjtWPVxCFjMUCSqh4fZcFXXW8xdCsHxYw</span><br><span class="line">0zw43LrD1REnUbUCXAeNOhVXIV5f5TxRYwW9ibkjPTWeDBtViIy33XTvCleEmf7K</span><br><span class="line">8kMkShUD3gfQt2HJ3FSmNQ==</span><br></pre></td></tr></table></figure><p>Running this through the secret agent’s cryptopad with Alice’s private key loaded, it appears that she has successfully mission #2!</p><img src="/content/id/2013/message-decrypted.png" class="" title="Message decrypted!"><span class="caption">Message decrypted!</span><h3 id="Verify-the-Sender"><a href="#Verify-the-Sender" class="headerlink" title="Verify the Sender"></a>Verify the Sender</h3><p>But how can Alice know that Charlie was truly the person who had sent this message. For that, we will rely on Charlie signing his message (in this case, the unencrypted text), and send the digital digest along with the message payload. Again, you can do this with either OpenSSL, <code>DBMS_CRYPTO.SIGN</code>, or any other programming language that supports public key encryption. Here’s an example OpenSSL command that Charlie can use to generate the digital signature:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;Bob has no keys&quot;</span> | openssl dgst -sha256 -sign charlie_key.pem | \</span><br><span class="line">    openssl <span class="built_in">base64</span></span><br></pre></td></tr></table></figure><p>Along with his Charlie, Alice can now verify that he was indeed the sender of the message “Bob has no keys”.</p><img src="/content/id/2013/verified-signature.png" class="" title="Digital signature verified."><span class="caption">Digital signature verified.</span><h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>I am very excited! There are more practical uses for this API, and you can definitely expect a follow up post. Stay tuned!</p><blockquote><p><u>Photo Credits</u></p><p>This post’s banner photo is by <a href="https://unsplash.com/@tinaflour?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Kristina Flour</a> on <a href="https://unsplash.com/s/photos/secret-agent?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></p></blockquote>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/programming/">Programming</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/programming/oracle-application-express/">Oracle Application Express</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/oracle/">oracle</category>
      
      <category domain="https://fuzziebrain.com/tags/security/">security</category>
      
      <category domain="https://fuzziebrain.com/tags/database/">database</category>
      
      <category domain="https://fuzziebrain.com/tags/plsql/">plsql</category>
      
      <category domain="https://fuzziebrain.com/tags/encryption/">encryption</category>
      
      <category domain="https://fuzziebrain.com/tags/signature/">signature</category>
      
      <category domain="https://fuzziebrain.com/tags/communication/">communication</category>
      
      <category domain="https://fuzziebrain.com/tags/secret/">secret</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2013/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Intelligent APEX Applications - Fact or Fiction?</title>
      <link>https://fuzziebrain.com/content/id/2012/</link>
      <guid>https://fuzziebrain.com/content/id/2012/</guid>
      <pubDate>Sun, 04 Jul 2021 23:45:00 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2012/neurons-1773922_1280x800.jpg&quot; class=&quot;&quot; title=&quot;Neurons&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Neurons&lt;/span&gt;

&lt;p&gt;During a recent &lt;a href=&quot;https://kscope21.odtug.com/&quot;&gt;Kscope21&lt;/a&gt; session, “&lt;a href=&quot;https://kscope21.odtug.com/e/in/eid=42&amp;req=info&amp;s=3444&amp;all=1&quot;&gt;Predict Customer Churn Using Oracle Autonomous Database, Machine Learning, and APEX&lt;/a&gt;“, I had shared that it has always been my personal desire to create web applications that are not only purposeful, but also have an element of “intelligence”. With new features recently introduced in the &lt;a href=&quot;https://www.oracle.com/data-science/machine-learning/&quot;&gt;Oracle Machine Learning&lt;/a&gt; product offering, it is now relatively easy to introduce ML as a component of your &lt;a href=&quot;https://apex.oracle.com/&quot;&gt;Oracle Application Express&lt;/a&gt; (APEX) applications. This is the first of several posts that I am writing as a follow up to the presentations I did at this year’s (virtual) conference.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2012/neurons-1773922_1280x800.jpg" class="" title="Neurons"><span class="caption">Neurons</span><p>During a recent <a href="https://kscope21.odtug.com/">Kscope21</a> session, “<a href="https://kscope21.odtug.com/e/in/eid=42&req=info&s=3444&all=1">Predict Customer Churn Using Oracle Autonomous Database, Machine Learning, and APEX</a>“, I had shared that it has always been my personal desire to create web applications that are not only purposeful, but also have an element of “intelligence”. With new features recently introduced in the <a href="https://www.oracle.com/data-science/machine-learning/">Oracle Machine Learning</a> product offering, it is now relatively easy to introduce ML as a component of your <a href="https://apex.oracle.com/">Oracle Application Express</a> (APEX) applications. This is the first of several posts that I am writing as a follow up to the presentations I did at this year’s (virtual) conference.</p><span id="more"></span><p>The whys and how we created our first Machine Learning (ML) model using <a href="https://blogs.oracle.com/machinelearning/introducing-oml-automl-user-interface">AutoML UI</a> is detailed in our presentation, so I highly encourage you to review the presentation to get the required background information. There are also several tutorials that Oracle has published to help you get going with the technology. In this blog post, the goal is to provide details on code needed to consume the ML model that we operationalised using OML Services. these are:</p><ul><li><a href="#Authentication">How to authenticate with the REST services</a></li><li><a href="#Inputs-and-Outputs">Identifying the REST service’s inputs and outputs</a>; and finally</li><li><a href="#using-the-Deployed-Model">Using the Deployed Model</a></li></ul><p>Also, it would be worthwhile pointing out that AutoML, OML Services, and many of the other Oracle technologies described in this post are only available on the <a href="https://www.oracle.com/autonomous-database/">Oracle Autonomous Database</a> (ADB) at this time, including the two <em>Always Free</em> instances that you get with every Oracle Cloud account.</p><h2 id="Authentication"><a href="#Authentication" class="headerlink" title="Authentication"></a>Authentication</h2><p>To secure OML Service endpoints, clients must use an OML Service account and obtain an <em>access token</em>. You may create this user and enable access to OML Services using either the <em>Oracle ML User Administration</em> console or <em>Database Actions</em>.</p><p>The authentication element consists of:</p><ol><li>Two application items <code>G_TOKEN</code> and <code>G_TOKEN_EXPIRY</code> that are used to store the access token and expiry measured in epochs.</li><li>An on page load (before header) application process with the following PL/SQL code: <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">if :G_TOKEN <span class="keyword">is</span> <span class="keyword">null</span></span><br><span class="line">  <span class="keyword">or</span> :G_TOKEN_EXPIRY <span class="keyword">is</span> <span class="keyword">null</span></span><br><span class="line">  <span class="keyword">or</span> pkg_omlservices_util.f_convert_to_epoch(sysdate) <span class="operator">&gt;</span> :G_TOKEN_EXPIRY</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  pkg_omlservices_util.p_authenticate(</span><br><span class="line">    p_token_url <span class="operator">=</span><span class="operator">&gt;</span> :G_TOKEN_URL</span><br><span class="line">    , p_username <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;readmore&#x27;</span></span><br><span class="line">    , p_password <span class="operator">=</span><span class="operator">&gt;</span> pkg_secrets.gc_password</span><br><span class="line">    , p_token <span class="operator">=</span><span class="operator">&gt;</span> :G_TOKEN</span><br><span class="line">    , p_expiry_epoch <span class="operator">=</span><span class="operator">&gt;</span> :G_TOKEN_EXPIRY</span><br><span class="line">  );</span><br><span class="line"><span class="keyword">end</span> if;</span><br></pre></td></tr></table></figure></li><li>The application process calls a custom procedure <code>pkg_omlservices_util.p_authenticate</code> that embodies the following code: <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace package body pkg_omlservices_util</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="keyword">procedure</span> p_authenticate(</span><br><span class="line">    p_token_url <span class="keyword">in</span> varchar2</span><br><span class="line">    , p_username <span class="keyword">in</span> varchar2</span><br><span class="line">    , p_password <span class="keyword">in</span> varchar2</span><br><span class="line">    , p_token <span class="keyword">out</span> varchar2</span><br><span class="line">    , p_expiry_epoch <span class="keyword">out</span> number</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">as</span></span><br><span class="line">    l_response <span class="type">clob</span>;</span><br><span class="line">  <span class="keyword">begin</span></span><br><span class="line">    apex_web_service.g_request_headers(<span class="number">1</span>).name :<span class="operator">=</span> <span class="string">&#x27;Content-Type&#x27;</span>;</span><br><span class="line">    apex_web_service.g_request_headers(<span class="number">1</span>).<span class="keyword">value</span> :<span class="operator">=</span> <span class="string">&#x27;application/json&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    l_response :<span class="operator">=</span> apex_web_service.make_rest_request(</span><br><span class="line">      p_url <span class="operator">=</span><span class="operator">&gt;</span> p_token_url</span><br><span class="line">      , p_http_method <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;POST&#x27;</span></span><br><span class="line">      , p_body <span class="operator">=</span><span class="operator">&gt;</span> <span class="built_in">json_object</span>(</span><br><span class="line">          <span class="string">&#x27;grant_type&#x27;</span> <span class="keyword">value</span> <span class="string">&#x27;password&#x27;</span></span><br><span class="line">          , <span class="string">&#x27;username&#x27;</span> <span class="keyword">value</span> p_username</span><br><span class="line">          , <span class="string">&#x27;password&#x27;</span> <span class="keyword">value</span> p_password</span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    if apex_web_service.g_status_code <span class="operator">=</span> <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">      apex_debug.info(l_response);</span><br><span class="line">      apex_json.parse(p_source <span class="operator">=</span><span class="operator">&gt;</span> l_response);</span><br><span class="line"></span><br><span class="line">      p_token :<span class="operator">=</span> apex_json.get_varchar2(p_path <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;accessToken&#x27;</span>);</span><br><span class="line">      p_expiry_epoch :<span class="operator">=</span> pkg_omlservices_util.f_convert_to_epoch(sysdate)</span><br><span class="line">        <span class="operator">+</span> apex_json.get_number(p_path <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;expiresIn&#x27;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      raise_application_error(<span class="number">-20001</span>, <span class="string">&#x27;Authentication request failed. &#x27;</span></span><br><span class="line">        <span class="operator">||</span> <span class="string">&#x27;HTTP status code returned: &#x27;</span></span><br><span class="line">        <span class="operator">||</span> apex_web_service.g_status_code);</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line">  <span class="keyword">end</span> p_authenticate;</span><br><span class="line"><span class="keyword">end</span> pkg_omlservices_util;</span><br></pre></td></tr></table></figure></li></ol><p>The URL to direct the access token request to is set and passed using the APEX substitution string <code>G_TOKEN_URL</code>. This URL is constructed based on a few components unique to your environment. You will need the following information:</p><ul><li><code>REGION_CODE</code>. For example, <code>us-ashburn-1</code>.</li><li><code>TENANT_OCID</code>. Looks like this: <code>ocid1.tenancy.oc1..aaaaaaaa...</code>.</li><li><code>DATABASE_NAME</code>. The database name given to your ADB instance.</li></ul><p>Then, use the template below and replace the placeholders with the appropriate values.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://adb.&lt;REGION_CODE&gt;.oraclecloud.com/omlusers/tenants/&lt;TENANT_OCID&gt;/databases/&lt;DATABASE_NAME&gt;/api/oauth2/v1/token</span><br></pre></td></tr></table></figure><p>This approach helps maintain a valid access token for as long as it is not expired, and will request a new one only when it does.</p><h2 id="Inputs-and-Outputs"><a href="#Inputs-and-Outputs" class="headerlink" title="Inputs and Outputs"></a>Inputs and Outputs</h2><p>During the presentation, I had demonstrated how you can use the OML AutoML User Interface (UI) to create ML models with no code. Once you are satisfied with the predicted model, you can then deploy the model thus exposing it through OML Services as a REST endpoint. To consume the REST service, there are three essential information that we will require:</p><ol><li>The REST endpoint URL.</li><li>The request’s input parameters and how to transmit them.</li><li>The response’s expected output format.</li></ol><p>You can access this information from the metadata published after the models are deployed.</p><img src="/content/id/2012/inputs-and-outputs.png" class="" title="List of Deployed ML Models"><span class="caption">List of Deployed ML Models</span><p>The endpoint URL can be derived from the <em>Open API Specification</em> for the service that you can access by clicking the link labelled “A”. Below is shortened version of the JSON output to help highlight the important pieces of information.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;openapi&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;svml_9223d64159&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;/svml/score&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;post&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;operationId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scoreModel&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;requestBody&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;application/json&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">              <span class="attr">&quot;schema&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;$ref&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#/components/schemas/svml_9223d64159_INPUT_TYPE&quot;</span></span><br><span class="line">              <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;required&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;responses&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;200&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Successfully scored model svml.&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">              <span class="attr">&quot;application/json&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;schema&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                  <span class="attr">&quot;$ref&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#/components/schemas/svml_9223d64159_OUTPUT_TYPE&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">              <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          ...</span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;components&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;schemas&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;svml_9223d64159_INPUT_TYPE&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;inputRecords&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;array&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;items&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">              <span class="attr">&quot;$ref&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#/components/schemas/Attributes&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;topN&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;integer&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int32&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;topNdetails&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;integer&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int32&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Attributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;AVG_TOTAL_GROUP_READING_TIME&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;double&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;DASHBOARD_VISITS&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;double&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;MAX_TOTAL_GROUP_READING_TIME&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;double&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;MIN_TOTAL_GROUP_READING_TIME&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;double&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;NUMBER_OF_KIDS_ENROLLED&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;double&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;NUMBER_OF_REWARDS_CREATED&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;double&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;NUMBER_OF_REWARDS_PURCHASED&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;double&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;svml_9223d64159_OUTPUT_TYPE&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;scoringResults&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;array&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;items&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">              <span class="attr">&quot;$ref&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#/components/schemas/ScoringResults&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;ScoringResults&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;classifications&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;array&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;items&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">              <span class="attr">&quot;$ref&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#/components/schemas/LabelProb&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;array&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;items&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">              <span class="attr">&quot;$ref&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#/components/schemas/Detail&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      ...</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="Endpoint-URL"><a href="#Endpoint-URL" class="headerlink" title="Endpoint URL"></a>Endpoint URL</h3><p>The template for the OML Service endpoint URLs is:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://adb.&lt;REGION_CODE&gt;.oraclecloud.com/omlmod/v1/deployment&lt;PATH&gt;</span><br></pre></td></tr></table></figure><p>The <code>PATH</code> that we will use to perform the scoring operation is <code>/svml/score</code>, which you can find in the <code>paths</code> attribute. It accepts a HTTP <code>POST</code> request with a required body containing input parameters in JSON format.</p><h3 id="Inputs"><a href="#Inputs" class="headerlink" title="Inputs"></a>Inputs</h3><p>From the input schema, you can glean that the endpoint requires an <code>inputRecords</code> array containing one or more objects, each with seven numerical input variables:</p><ul><li><code>AVG_TOTAL_GROUP_READING_TIME</code></li><li><code>DASHBOARD_VISITS</code></li><li><code>MAX_TOTAL_GROUP_READING_TIME</code></li><li><code>MIN_TOTAL_GROUP_READING_TIME</code></li><li><code>NUMBER_OF_KIDS_ENROLLED</code></li><li><code>NUMBER_OF_REWARDS_CREATED</code></li><li><code>NUMBER_OF_REWARDS_PURCHASED</code></li></ul><p>These are features that AutoML had selected during the training process. An example of the JSON payload included in a HTTP request is:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;inputRecords&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;AVG_TOTAL_GROUP_READING_TIME&quot;</span><span class="punctuation">:</span> <span class="number">383</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;DASHBOARD_VISITS&quot;</span><span class="punctuation">:</span> <span class="number">2021</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;MAX_TOTAL_GROUP_READING_TIME&quot;</span><span class="punctuation">:</span> <span class="number">157</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;MIN_TOTAL_GROUP_READING_TIME&quot;</span><span class="punctuation">:</span> <span class="number">281</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;NUMBER_OF_KIDS_ENROLLED&quot;</span><span class="punctuation">:</span> <span class="number">114</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;NUMBER_OF_REWARDS_CREATED&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;NUMBER_OF_REWARDS_PURCHASED&quot;</span><span class="punctuation">:</span> <span class="number">45</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="Outputs"><a href="#Outputs" class="headerlink" title="Outputs"></a>Outputs</h3><p>Finally, from the specifications, we know that the service will return the array <code>scoringResults</code> that should be of the same size as the <code>inputRecords</code> submitted in the request. Each element will contain an array of <code>classifications</code> (there are two in our binary classifier) objects with the attributes <code>label</code> and <code>probability</code>. Below is an example of prediction outputs returned after a successful call to the OML Service.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;scoringResults&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;classifications&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;probability&quot;</span><span class="punctuation">:</span> <span class="number">0.1977130504153105</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;probability&quot;</span><span class="punctuation">:</span> <span class="number">0.8022869495846895</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="Using-the-Deployed-Model"><a href="#Using-the-Deployed-Model" class="headerlink" title="Using the Deployed Model"></a>Using the Deployed Model</h2><p>Armed with the information <a href="#Inputs-and-Outputs">above</a>, we can now construct a wrapper PL/SQL procedure, for example:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace package body pkg_omlservices_predict</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">  c_svml_url constant varchar2(<span class="number">73</span>) :<span class="operator">=</span> <span class="string">&#x27;https://.../omlmod/v1/deployment/svml/score&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> f_active_in_six_months(</span><br><span class="line">    p_token <span class="keyword">in</span> varchar2</span><br><span class="line">    , p_avg_total_group_reading_time <span class="keyword">in</span> number</span><br><span class="line">    , p_dashboard_visits <span class="keyword">in</span> number</span><br><span class="line">    , p_max_total_group_reading_time <span class="keyword">in</span> number</span><br><span class="line">    , p_min_total_group_reading_time <span class="keyword">in</span> number</span><br><span class="line">    , p_number_of_kids_enrolled <span class="keyword">in</span> number</span><br><span class="line">    , p_number_of_rewards_created <span class="keyword">in</span> number</span><br><span class="line">    , p_number_of_rewards_purchased <span class="keyword">in</span> number</span><br><span class="line">  ) <span class="keyword">return</span> <span class="type">clob</span></span><br><span class="line">  <span class="keyword">as</span></span><br><span class="line">    l_results <span class="type">clob</span>;</span><br><span class="line">  <span class="keyword">begin</span></span><br><span class="line">    apex_web_service.g_request_headers(<span class="number">1</span>).name :<span class="operator">=</span> <span class="string">&#x27;Authorization&#x27;</span>;</span><br><span class="line">    apex_web_service.g_request_headers(<span class="number">1</span>).<span class="keyword">value</span> :<span class="operator">=</span> <span class="string">&#x27;Bearer &#x27;</span> <span class="operator">||</span> p_token;</span><br><span class="line"></span><br><span class="line">    apex_web_service.g_request_headers(<span class="number">2</span>).name :<span class="operator">=</span> <span class="string">&#x27;Content-Type&#x27;</span>;</span><br><span class="line">    apex_web_service.g_request_headers(<span class="number">2</span>).<span class="keyword">value</span> :<span class="operator">=</span> <span class="string">&#x27;application/json&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    l_results :<span class="operator">=</span> apex_web_service.make_rest_request(</span><br><span class="line">      p_url <span class="operator">=</span><span class="operator">&gt;</span> c_svml_url</span><br><span class="line">      , p_http_method <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;POST&#x27;</span></span><br><span class="line">      , p_body <span class="operator">=</span><span class="operator">&gt;</span> <span class="built_in">json_object</span>(</span><br><span class="line">          <span class="string">&#x27;inputRecords&#x27;</span> <span class="keyword">value</span> <span class="built_in">json_array</span>(</span><br><span class="line">            <span class="built_in">json_object</span>(</span><br><span class="line">              <span class="string">&#x27;AVG_TOTAL_GROUP_READING_TIME&#x27;</span> <span class="keyword">value</span> p_avg_total_group_reading_time</span><br><span class="line">              , <span class="string">&#x27;DASHBOARD_VISITS&#x27;</span> <span class="keyword">value</span> p_dashboard_visits</span><br><span class="line">              , <span class="string">&#x27;MAX_TOTAL_GROUP_READING_TIME&#x27;</span> <span class="keyword">value</span> p_max_total_group_reading_time</span><br><span class="line">              , <span class="string">&#x27;MIN_TOTAL_GROUP_READING_TIME&#x27;</span> <span class="keyword">value</span> p_min_total_group_reading_time</span><br><span class="line">              , <span class="string">&#x27;NUMBER_OF_KIDS_ENROLLED&#x27;</span> <span class="keyword">value</span> p_number_of_kids_enrolled</span><br><span class="line">              , <span class="string">&#x27;NUMBER_OF_REWARDS_CREATED&#x27;</span> <span class="keyword">value</span> p_number_of_rewards_created</span><br><span class="line">              , <span class="string">&#x27;NUMBER_OF_REWARDS_PURCHASED&#x27;</span> <span class="keyword">value</span> p_number_of_rewards_purchased</span><br><span class="line">            )</span><br><span class="line">          )</span><br><span class="line">        )</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    if apex_web_service.g_status_code <span class="operator">!=</span> <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">      raise_application_error(</span><br><span class="line">        <span class="number">-20002</span></span><br><span class="line">        , <span class="string">&#x27;Error predicting results. HTTP status code: &#x27;</span> <span class="operator">||</span> apex_web_service.g_status_code)</span><br><span class="line">      ;</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> l_results;</span><br><span class="line">  exception</span><br><span class="line">    <span class="keyword">when</span> others <span class="keyword">then</span></span><br><span class="line">      owa_util.status_line(</span><br><span class="line">        nstatus <span class="operator">=</span><span class="operator">&gt;</span> <span class="number">500</span></span><br><span class="line">        , creason <span class="operator">=</span><span class="operator">&gt;</span> apex_web_service.g_status_code</span><br><span class="line">      );</span><br><span class="line">  <span class="keyword">end</span> f_active_in_six_months;</span><br><span class="line"><span class="keyword">end</span> pkg_omlservices_predict;</span><br></pre></td></tr></table></figure><p>For a simple demonstration on how to use the OML Service in APEX, I created a page that allows users to enter the seven required inputs, and then call the <code>pkg_omlservices_predict.f_active_in_six_months</code> function to obtain the predicted labels and their probabilities.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  l_results <span class="type">clob</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  apex_collection.create_or_truncate_collection(<span class="string">&#x27;PREDICTION_RESULTS&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  l_results :<span class="operator">=</span> pkg_omlservices_predict.f_active_in_six_months(</span><br><span class="line">    p_token <span class="operator">=</span><span class="operator">&gt;</span> :G_TOKEN</span><br><span class="line">    , p_avg_total_group_reading_time <span class="operator">=</span><span class="operator">&gt;</span> :P1_AVG_TOTAL_GROUP_READING_TIME</span><br><span class="line">    , p_dashboard_visits <span class="operator">=</span><span class="operator">&gt;</span> :P1_DASHBOARD_VISITS</span><br><span class="line">    , p_max_total_group_reading_time <span class="operator">=</span><span class="operator">&gt;</span> :P1_MAX_TOTAL_GROUP_READING_TIME</span><br><span class="line">    , p_min_total_group_reading_time <span class="operator">=</span><span class="operator">&gt;</span> :P1_MIN_TOTAL_GROUP_READING_TIME</span><br><span class="line">    , p_number_of_kids_enrolled <span class="operator">=</span><span class="operator">&gt;</span> :P1_NUMBER_OF_KIDS_ENROLLED</span><br><span class="line">    , p_number_of_rewards_created <span class="operator">=</span><span class="operator">&gt;</span> :P1_NUMBER_OF_REWARDS_CREATED</span><br><span class="line">    , p_number_of_rewards_purchased <span class="operator">=</span><span class="operator">&gt;</span> :P1_NUMBER_OF_REWARDS_PURCHASED</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  apex_collection.add_member(</span><br><span class="line">    p_collection_name <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;PREDICTION_RESULTS&#x27;</span></span><br><span class="line">    , p_clob001 <span class="operator">=</span><span class="operator">&gt;</span> l_results</span><br><span class="line">  );</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure><p>I can then render the desired output after parsing the <code>scoringResults</code> JSON array returned by the OML Service, for example, using a classic report using the following SQL query:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> results <span class="keyword">as</span> (</span><br><span class="line">  <span class="keyword">select</span> clob001 <span class="keyword">as</span> json_data</span><br><span class="line">  <span class="keyword">from</span> apex_collections</span><br><span class="line">  <span class="keyword">where</span> collection_name <span class="operator">=</span> <span class="string">&#x27;PREDICTION_RESULTS&#x27;</span></span><br><span class="line">  <span class="keyword">fetch</span> <span class="keyword">first</span> <span class="number">1</span> <span class="keyword">rows</span> <span class="keyword">only</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">  j.outcome</span><br><span class="line">  , j.probability</span><br><span class="line"><span class="keyword">from</span> results r</span><br><span class="line">  , <span class="built_in">json_table</span>(</span><br><span class="line">    r.json_data, <span class="string">&#x27;$.scoringResults&#x27;</span> columns (</span><br><span class="line">      nested path <span class="string">&#x27;$.classifications[*]&#x27;</span></span><br><span class="line">      columns (</span><br><span class="line">        outcome path <span class="string">&#x27;$.label&#x27;</span></span><br><span class="line">        , probability path <span class="string">&#x27;$.probability&#x27;</span></span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  ) j</span><br></pre></td></tr></table></figure><p>It is worthwhile noting that developers can submit multiple rows of input data and obtain all the results at once. For example, if you wanted to cache the predicted outcomes in a local table, you can batch them in one HTTP request and then parsing multiple results, thereby reducing some overheads.</p><h2 id="Closing"><a href="#Closing" class="headerlink" title="Closing"></a>Closing</h2><p>This is only the beginning and I am super excited with all the tools that Oracle has put at our disposal. Do more and do good. If you require additional help, or would like to collaborate on other APEX+ML adventures, please do not hesitate to contact me <em>via</em> <a href="https://twitter.com/fuzziebrain">Twitter</a> or through <a href="https://www.insum.ca/contact/">Insum</a>.</p><blockquote><p><strong>Credits</strong></p><p>Image by <a href="https://pixabay.com/users/geralt-9301/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1773922">Gerd Altmann</a> from <a href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1773922">Pixabay</a></p></blockquote>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/programming/">Programming</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/programming/oracle-application-express/">Oracle Application Express</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/oracle-cloud/">oracle cloud</category>
      
      <category domain="https://fuzziebrain.com/tags/artificial-intelligence/">artificial intelligence</category>
      
      <category domain="https://fuzziebrain.com/tags/ai/">ai</category>
      
      <category domain="https://fuzziebrain.com/tags/machine-learning/">machine learning</category>
      
      <category domain="https://fuzziebrain.com/tags/ml/">ml</category>
      
      <category domain="https://fuzziebrain.com/tags/rest/">rest</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2012/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>ARM Your APEX Instance</title>
      <link>https://fuzziebrain.com/content/id/2011/</link>
      <guid>https://fuzziebrain.com/content/id/2011/</guid>
      <pubDate>Tue, 25 May 2021 15:50:00 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2011/arm-chip_1200x720.jpg&quot; class=&quot;&quot; title=&quot;Embedded ARM chip&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Embedded ARM chip&lt;/span&gt;

&lt;p&gt;In September 2020, Oracle first &lt;a href=&quot;https://youtu.be/aVwLlkhERuQ?t=331&quot;&gt;announced&lt;/a&gt; that it was working with &lt;a href=&quot;https://amperecomputing.com/&quot;&gt;Ampere Computing&lt;/a&gt; to provide ARM-based chips for its Compute instance offering on the &lt;a href=&quot;https://oracle.com/cloud&quot;&gt;Oracle Cloud Infrastructure&lt;/a&gt;. They have delivered!&lt;/p&gt;
&lt;p&gt;ARM chips are found in many low-powered devices like smartphones, single-board computers, and IoT devices. So, if you are an &lt;a href=&quot;https://apex.oracle.com/&quot;&gt;Oracle Application Express&lt;/a&gt; (APEX) developer, you might be wondering, “What’s in it for me?” Well, remember we &lt;a href=&quot;/content/id/2004&quot;&gt;talked&lt;/a&gt; about running a customer-managed &lt;a href=&quot;https://www.oracle.com/database/technologies/appdev/rest.html&quot;&gt;Oracle REST Data Services&lt;/a&gt; (ORDS) instance for an &lt;a href=&quot;https://www.oracle.com/autonomous-database/&quot;&gt;Oracle Autonomous Database&lt;/a&gt;?&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2011/arm-chip_1200x720.jpg" class="" title="Embedded ARM chip"><span class="caption">Embedded ARM chip</span><p>In September 2020, Oracle first <a href="https://youtu.be/aVwLlkhERuQ?t=331">announced</a> that it was working with <a href="https://amperecomputing.com/">Ampere Computing</a> to provide ARM-based chips for its Compute instance offering on the <a href="https://oracle.com/cloud">Oracle Cloud Infrastructure</a>. They have delivered!</p><p>ARM chips are found in many low-powered devices like smartphones, single-board computers, and IoT devices. So, if you are an <a href="https://apex.oracle.com/">Oracle Application Express</a> (APEX) developer, you might be wondering, “What’s in it for me?” Well, remember we <a href="/content/id/2004">talked</a> about running a customer-managed <a href="https://www.oracle.com/database/technologies/appdev/rest.html">Oracle REST Data Services</a> (ORDS) instance for an <a href="https://www.oracle.com/autonomous-database/">Oracle Autonomous Database</a>?</p><span id="more"></span><p>The OCI isn’t the first platform to offer ARM-based compute resources. You will find a similar offering from AWS with their <a href="https://aws.amazon.com/ec2/graviton/">Graviton</a> processors. Instead of custom-designing a processor, Oracle opted to use the <a href="https://amperecomputing.com/altra/">Ampere Altra Processor</a> that has 80 cores running at a maximum frequency of 3.3 Ghz. Check out AnandTech’s <a href="https://www.anandtech.com/show/16315/the-ampere-altra-review">review</a> of the chip.</p><p>If you are interested to read about the performance comparisons between the ARM and x86 architectures, please check out this <a href="https://www.infoq.com/articles/arm-vs-x86-cloud-performance/">report</a>. What I understand is that for hosting web applications that are typically single threaded, ARM chips offer a better cost-to-performance ratio, not to mention, lower power consumption. Each processing core is also generally cheaper than its competitors, thus allowing cloud vendors to provision them at cheaper rates. We saw this happening when Oracle first launched the AMD EPYC-based compute shapes that were cheaper than Intel’s at that time.</p><h2 id="Let’s-Get-Started"><a href="#Let’s-Get-Started" class="headerlink" title="Let’s Get Started"></a>Let’s Get Started</h2><p>As with other processor types, OCI customers can opt to provision virtual machines or bare metal machines:</p><ul><li><strong>VM.Standard.A1.Flex.</strong> Like the AMD EPYC Flex shapes, users can create instances with a flexible number of OCPUs and memory. Servers can be provisioned with 1 to 80 OCPUs, and 1 to 512 GB memory.</li><li><strong>BM.Standard.A1.160.</strong> Only one shape for bare metal machines is available at this time. It comes with 160 OCPUs and 1 TB of memory.</li></ul><p>Oracle has also provided a generous Oracle Cloud Free Tier allotment of Ampere compute instance. Users can provision an <em>Always Free</em> compute instance with up to 4 OCPUs and 24 GB of memory (see the <a href="https://www.oracle.com/news/announcement/oracle-unlocks-power-of-arm-processors-at-one-cent-per-core-hour-2021-05-25/">press release</a>). The Always Free block volume allotment has also increased from 100 to 200 GB. Yes, there are no charges and no end dates for these resources. I will use this to host the customer-managed ORDS instance. Beyond that, according to the <a href="https://www.oracle.com/cloud/cost-estimator.html">cost estimator</a>, each additional OCPU will cost you only $10 per month, and $1 for every gigabyte of memory!</p><blockquote><p><strong>Note.</strong> These A1 cores are single-threaded. In x86-based shapes, 1 OCPU has 2 virtual CPUs.</p></blockquote><img src="/content/id/2011/create-compute-instance.png" class="" title="Create an Ampere-shaped Compute instance."><span class="caption">Create an Ampere-shaped Compute instance.</span><p>The downside of moving to an ARM chip is the availability of software support. For example, though you can install the <a href="https://www.oracle.com/database/technologies/instant-client.html">Oracle Instant Client</a> on an ARM system, Oracle has not released AArch64 database binaries. Fortunately for us, there already exists a Java port for this architecture, so there should be no issues deploying ORDS or running it standalone. However, at the time of writing, the ORDS package is not available to install through the Oracle Yum repositories. I will instead deploy ORDS on a <a href="https://tomcat.apache.org/">Tomcat</a> server using <a href="https://podman.io/">Podman</a>. The official <a href="https://docker.com/">Docker</a> image that I will use can be found <a href="https://hub.docker.com/_/tomcat">here</a>. Take note that you will have to ensure that you deploy a version of ORDS that’s compatible to what the ADB is using.</p><img src="/content/id/2011/checking-ords-version.png" class="" title="Use Database Actions to check version of ORDS that the ADB is running."><span class="caption">Use Database Actions to check version of ORDS that the ADB is running.</span><p>After provisioning the Oracle Enterprise Linux 8 server, login as the user <em>opc</em> and install the following software:</p><ul><li>OCI Command Line Interface (CLI)</li><li>Podman</li><li>[Optional] Support for emulating Docker CLI using podman</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf install python36-oci-cli podman podman-docker</span><br></pre></td></tr></table></figure><p>Create the base directory where we will deploy our files to.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BASE_PATH=/opt/podman/ords &amp;&amp; \</span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$BASE_PATH</span></span><br></pre></td></tr></table></figure><p>Stage the following installer files in the directory <code>$BASE_PATH/files</code>:</p><ul><li><code>apex_20.2.zip</code></li><li><code>p32006852_2020_Generic.zip</code></li><li><code>ords-21.1.1.116.2032.zip</code></li></ul><blockquote><p><strong>Note:</strong> At the time of writing, the ADB is still running APEX 20.2 with the latest Patch Set Bundle. To download the patch, you will require a qualified support contract.</p></blockquote><p>Create the following <em>Dockerfile</em> in the directory specified by the environment variable <code>BASE_PATH</code>:</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> tomcat:<span class="number">9.0</span>-jdk8-openjdk-slim</span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> INSTALL_FILES_DIR=/tmp</span><br><span class="line"><span class="keyword">ARG</span> ORDS_HOME=/opt/oracle/ords</span><br><span class="line"><span class="keyword">ARG</span> ORDS_CONFIG_DIR=$ORDS_HOME/conf</span><br><span class="line"><span class="keyword">ARG</span> ORDS_INSTALL_FILE=ords-<span class="number">21.1</span>.<span class="number">1.116</span>.<span class="number">2032</span>.zip</span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> files/<span class="variable">$ORDS_INSTALL_FILE</span> <span class="variable">$INSTALL_FILES_DIR</span>/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt update -y &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">  apt install -y unzip &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">  <span class="built_in">mkdir</span> -p <span class="variable">$ORDS_HOME</span> <span class="variable">$ORDS_CONFIG_DIR</span> &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">  unzip <span class="variable">$INSTALL_FILES_DIR</span>/<span class="variable">$ORDS_INSTALL_FILE</span> -d <span class="variable">$ORDS_HOME</span> &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">  java -jar <span class="variable">$ORDS_HOME</span>/ords.war configdir <span class="variable">$ORDS_CONFIG_DIR</span> &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">  <span class="built_in">cp</span> <span class="variable">$ORDS_HOME</span>/ords.war /usr/local/tomcat/webapps/ &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">  sed -i -r <span class="string">&#x27;s/Connector port=\&quot;8080\&quot; protocol=\&quot;HTTP\/1\.1\&quot;/&amp; scheme=\&quot;https\&quot;/&#x27;</span> \</span></span><br><span class="line"><span class="language-bash">    /usr/local/tomcat/conf/server.xml &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">  <span class="built_in">rm</span> -f <span class="variable">$INSTALL_FILES_DIR</span>/<span class="variable">$ORDS_INSTALL_FILE</span> &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">  apt clean -y</span></span><br></pre></td></tr></table></figure><p>Alternatively, run the following Bash script to create the Dockerfile:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$BASE_PATH</span> &amp;&amp; \</span><br><span class="line"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF &gt; Dockerfile</span></span><br><span class="line"><span class="string">FROM tomcat:9.0-jdk8-openjdk-slim</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ARG INSTALL_FILES_DIR=/tmp</span></span><br><span class="line"><span class="string">ARG ORDS_HOME=/opt/oracle/ords</span></span><br><span class="line"><span class="string">ARG ORDS_CONFIG_DIR=\$ORDS_HOME/conf</span></span><br><span class="line"><span class="string">ARG ORDS_INSTALL_FILE=ords-21.1.1.116.2032.zip</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">COPY files/\$ORDS_INSTALL_FILE \$INSTALL_FILES_DIR/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">RUN apt update -y &amp;&amp; \\</span></span><br><span class="line"><span class="string">  apt install -y unzip &amp;&amp; \\</span></span><br><span class="line"><span class="string">  mkdir -p \$ORDS_HOME \$ORDS_CONFIG_DIR &amp;&amp; \\</span></span><br><span class="line"><span class="string">  unzip \$INSTALL_FILES_DIR/\$ORDS_INSTALL_FILE -d \$ORDS_HOME &amp;&amp; \\</span></span><br><span class="line"><span class="string">  java -jar \$ORDS_HOME/ords.war configdir \$ORDS_CONFIG_DIR &amp;&amp; \\</span></span><br><span class="line"><span class="string">  cp \$ORDS_HOME/ords.war /usr/local/tomcat/webapps/ &amp;&amp; \\</span></span><br><span class="line"><span class="string">  sed -i -r &#x27;s/Connector port=\\&quot;8080\\&quot; protocol=\\&quot;HTTP\/1\\.1\\&quot;/&amp; scheme=\\&quot;https\\&quot;/&#x27; \\</span></span><br><span class="line"><span class="string">    /usr/local/tomcat/conf/server.xml &amp;&amp; \\</span></span><br><span class="line"><span class="string">  rm -f \$INSTALL_FILES_DIR/\$ORDS_INSTALL_FILE &amp;&amp; \\</span></span><br><span class="line"><span class="string">  apt clean -y</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p>Build the container image.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$BASE_PATH</span> &amp;&amp; \</span><br><span class="line">podman build -t ords .</span><br></pre></td></tr></table></figure><p>Set the following environment variables based on your tenancy, data region, and ADB:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ADB_OCID=ocid1.autonomousdatabase.oc1.phx.abyh...4pggq</span><br><span class="line">ADB_NAME=myadb</span><br><span class="line">ORDS_USER=ORDS_PUBLIC_USER2</span><br><span class="line">ORDS_PASSWORD=<span class="string">&quot;avoidsimplepasswords&quot;</span></span><br><span class="line">WALLET_PASSWORD=<span class="string">&quot;atalltimes&quot;</span></span><br><span class="line">SERVICE_NAME=<span class="variable">$&#123;ADB_NAME&#125;</span>_low</span><br><span class="line">WALLET_FILE_PATH=/tmp/wallet_<span class="variable">$&#123;ADB_NAME&#125;</span>.zip</span><br><span class="line">ORDS_CONFIG_DIR=<span class="variable">$BASE_PATH</span>/conf</span><br></pre></td></tr></table></figure><p>Use the OCI CLI to generate the required ADB wallet, and then create the base64-encoded string needed for configuring ORDS to access the database.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> OCI_CLI_AUTH=instance_principal &amp;&amp; \</span><br><span class="line">oci db autonomous-database generate-wallet \</span><br><span class="line">  --autonomous-database-id <span class="variable">$ADB_OCID</span> \</span><br><span class="line">  --file <span class="variable">$WALLET_FILE_PATH</span> \</span><br><span class="line">  --password WALLET_PASSWORD &amp;&amp; \</span><br><span class="line">WALLET_BASE64=`<span class="built_in">base64</span> -w 0 <span class="variable">$WALLET_FILE_PATH</span>` &amp;&amp; \</span><br><span class="line"><span class="built_in">rm</span> -f <span class="variable">$&#123;WALLET_FILE_PATH&#125;</span></span><br></pre></td></tr></table></figure><p>Create the database user named in the environment variable <code>ORDS_USER</code> and asssign the necessary privileges. Refer to the section <em>User Accounts</em> in the previous <a href="/content/id/2004#User-Accounts">post</a> if you require help. Then create the ORDS configuration files:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$ORDS_CONFIG_DIR</span>/ords/conf &amp;&amp; \</span><br><span class="line"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF &gt; $ORDS_CONFIG_DIR/ords/conf/apex_pu.xml</span></span><br><span class="line"><span class="string">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;</span></span><br><span class="line"><span class="string">&lt;!DOCTYPE properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;properties&gt;</span></span><br><span class="line"><span class="string">  &lt;entry key=&quot;db.username&quot;&gt;$ORDS_USER&lt;/entry&gt;</span></span><br><span class="line"><span class="string">  &lt;entry key=&quot;db.password&quot;&gt;!$ORDS_PASSWORD&lt;/entry&gt;</span></span><br><span class="line"><span class="string">  &lt;entry key=&quot;db.wallet.zip.service&quot;&gt;$SERVICE_NAME&lt;/entry&gt;</span></span><br><span class="line"><span class="string">  &lt;entry key=&quot;db.wallet.zip&quot;&gt;&lt;![CDATA[$WALLET_BASE64]]&gt;&lt;/entry&gt;</span></span><br><span class="line"><span class="string">&lt;/properties&gt;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF &gt; $ORDS_CONFIG_DIR/ords/defaults.xml</span></span><br><span class="line"><span class="string">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;</span></span><br><span class="line"><span class="string">&lt;!DOCTYPE properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;properties&gt;</span></span><br><span class="line"><span class="string">  &lt;entry key=&quot;plsql.gateway.enabled&quot;&gt;true&lt;/entry&gt;</span></span><br><span class="line"><span class="string">  &lt;entry key=&quot;jdbc.InitialLimit&quot;&gt;5&lt;/entry&gt;</span></span><br><span class="line"><span class="string">  &lt;entry key=&quot;jdbc.MaxLimit&quot;&gt;10&lt;/entry&gt;</span></span><br><span class="line"><span class="string">&lt;/properties&gt;</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p>Prepare to stage the APEX images files by first setting the following environment variables:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSTALL_FILES_DIR=<span class="variable">$BASE_DIR</span>/files</span><br><span class="line">APEX_INSTALL_FILE=apex_20.2.zip</span><br><span class="line">APEX_VERSION=20.2.0.00.20</span><br><span class="line">APEX_IMAGES_DIR=<span class="variable">$BASE_PATH</span>/apex_images</span><br></pre></td></tr></table></figure><p>Execute the snippet below to extract the necessary files from the APEX installation file and deploy them to the Tomcat container.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$APEX_IMAGES_DIR</span> &amp;&amp; \</span><br><span class="line"><span class="built_in">touch</span> <span class="variable">$APEX_IMAGES_DIR</span>/index.html &amp;&amp; \</span><br><span class="line">unzip <span class="variable">$INSTALL_FILES_DIR</span>/<span class="variable">$APEX_INSTALL_FILE</span> <span class="string">&quot;apex/images/*&quot;</span> -d /tmp/ &amp;&amp; \</span><br><span class="line"><span class="built_in">mv</span> /tmp/apex/images <span class="variable">$APEX_IMAGES_DIR</span>/<span class="variable">$APEX_VERSION</span> &amp;&amp; \</span><br><span class="line"><span class="built_in">rm</span> -rf /tmp/apex</span><br></pre></td></tr></table></figure><p>If your instance is running a version of APEX that has a patch available, then be sure to apply it. Again, you will need access to <a href="https://support.oracle.com/">Oracle Support</a> with the rights to download patches. Set the environment variables:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PATCH_FILE=p32006852_2020_Generic.zip</span><br><span class="line">PATCH_NUMBER=32006852</span><br></pre></td></tr></table></figure><p>Then run the snippet below to deploy the changes:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /tmp/<span class="variable">$APEX_VERSION</span> &amp;&amp; \</span><br><span class="line">unzip /tmp/<span class="variable">$PATCH_FILE</span> <span class="string">&quot;<span class="variable">$PATCH_NUMBER</span>/images/*&quot;</span> -d /tmp/<span class="variable">$APEX_VERSION</span> &amp;&amp; \</span><br><span class="line"><span class="built_in">yes</span> | <span class="built_in">cp</span> -R /tmp/<span class="variable">$APEX_VERSION</span>/<span class="variable">$PATCH_NUMBER</span>/images/* <span class="variable">$APEX_IMAGES_DIR</span>/<span class="variable">$APEX_VERSION</span> &amp;&amp; \</span><br><span class="line"><span class="built_in">rm</span> -rf /tmp/<span class="variable">$APEX_VERSION</span></span><br></pre></td></tr></table></figure><p>Create a utility <code>run.sh</code> script to run the container. The script allows one argument to set the port number to map to, and also used to set the container’s name.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$BASE_PATH</span> &amp;&amp; \</span><br><span class="line"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF &gt; run.sh</span></span><br><span class="line"><span class="string">#!/usr/bin/env bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">PORT_NUMBER=\$&#123;1:-8080&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">podman run -d --name=ords_port_\$&#123;PORT_NUMBER&#125; \\</span></span><br><span class="line"><span class="string">  -p \$PORT_NUMBER:8080 \\</span></span><br><span class="line"><span class="string">  -v \$PWD/conf:/opt/oracle/ords/conf:z \\</span></span><br><span class="line"><span class="string">  -v $APEX_IMAGES_DIR:/usr/local/tomcat/webapps/i \\</span></span><br><span class="line"><span class="string">  --restart unless-stopped \\</span></span><br><span class="line"><span class="string">  ords</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p>Finally, since we are running this as a rootless container, the firewall rules must be updated to allow communication on port <code>8080</code>. Execute the following commands:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --zone=public --add-port 8080/tcp --permanent &amp;&amp; \</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>Run the container that’s listening on port <code>8080</code>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$BASE_PATH</span> &amp;&amp; bash run.sh 8080</span><br></pre></td></tr></table></figure><p>Finally, setup a load balancer for the customer-managed ORDS instance. This was discussed in an earlier <a href="/content/id/2005">post</a>.</p><h2 id="Bonus-Task"><a href="#Bonus-Task" class="headerlink" title="Bonus Task"></a>Bonus Task</h2><p>If you are also interested in testing out some “redundancy”, you might like to run a second container:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PORT_NUMBER=8081 &amp;&amp; \</span><br><span class="line">sudo firewall-cmd --zone=public --add-port <span class="variable">$PORT_NUMBER</span>/tcp --permanent &amp;&amp; \</span><br><span class="line">sudo firewall-cmd --reload &amp;&amp; \</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$BASE_PATH</span> &amp;&amp; bash run.sh <span class="variable">$PORT_NUMBER</span></span><br></pre></td></tr></table></figure><p>And then add this as a backend server that’s listening on port <code>8081</code> to the set. Just be really careful about exceeding the maximum number of concurrent database sessions if this is an Always Free ADB.</p><img src="/content/id/2011/extra-backend-server.png" class="" title="Add a backend server to simulate redundancy."><span class="caption">Add a backend server to simulate redundancy.</span><p>To be clear, this is really for experimentation and simulation use only. As a best practice, the second container should be deployed on a separate host, preferably in a different availability domain.</p><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>This is a great addition to the family of OCI resources that Oracle provides.  Besides deploying customer-managed ORDS to complement the Autonomous Database, APEX developers can also use them to host other workloads to supercharge web applications. For example, running a <a href="https://developer.mozilla.org/docs/Web/API/WebSockets_API">WebSocket</a> server using <a href="https://socket.io/">Socket.IO</a> to display realtime updates, or hosting a <a href="https://spring.io/guides/tutorials/rest/">REST service using Spring Boot</a>. A choice of provisioning low-cost and highly-efficient servers, and the expanded Always Free limits. What’s there not to love?</p>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/">Infrastructure</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/oracle-cloud/">Oracle Cloud</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/oracle-cloud/">oracle cloud</category>
      
      <category domain="https://fuzziebrain.com/tags/oci/">oci</category>
      
      <category domain="https://fuzziebrain.com/tags/arm/">arm</category>
      
      <category domain="https://fuzziebrain.com/tags/aarch64/">aarch64</category>
      
      <category domain="https://fuzziebrain.com/tags/ampere/">ampere</category>
      
      <category domain="https://fuzziebrain.com/tags/orclords/">orclords</category>
      
      <category domain="https://fuzziebrain.com/tags/autonomous-database/">autonomous database</category>
      
      <category domain="https://fuzziebrain.com/tags/podman/">podman</category>
      
      <category domain="https://fuzziebrain.com/tags/docker/">docker</category>
      
      <category domain="https://fuzziebrain.com/tags/open-container-initiative/">open container initiative</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2011/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Making AI Accessible to APEX</title>
      <link>https://fuzziebrain.com/content/id/2010/</link>
      <guid>https://fuzziebrain.com/content/id/2010/</guid>
      <pubDate>Sat, 08 May 2021 18:24:17 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2010/emoji-1200x800.jpg&quot; class=&quot;&quot; title=&quot;Figuring out sentiments.&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Figuring out sentiments.&lt;/span&gt;

&lt;p&gt;The &lt;a href=&quot;https://oracle.com/cloud/&quot;&gt;&lt;em&gt;Oracle Cloud Infrastructure&lt;/em&gt;&lt;/a&gt; (OCI) is a great platform in many ways. However, as much as I love it, I have long griped about the lack of out-of-the-box support for AI services that many of Oracle’s competitors have. Well, as of May 6, 2021, I am glad to see that things are starting to turn around with the &lt;a href=&quot;https://docs.oracle.com/iaas/releasenotes/changes/f801b1f5-b40d-49a5-bbb1-e2b2001ce2cf/&quot;&gt;launch&lt;/a&gt; of the OCI &lt;em&gt;Language&lt;/em&gt; service.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2010/emoji-1200x800.jpg" class="" title="Figuring out sentiments."><span class="caption">Figuring out sentiments.</span><p>The <a href="https://oracle.com/cloud/"><em>Oracle Cloud Infrastructure</em></a> (OCI) is a great platform in many ways. However, as much as I love it, I have long griped about the lack of out-of-the-box support for AI services that many of Oracle’s competitors have. Well, as of May 6, 2021, I am glad to see that things are starting to turn around with the <a href="https://docs.oracle.com/iaas/releasenotes/changes/f801b1f5-b40d-49a5-bbb1-e2b2001ce2cf/">launch</a> of the OCI <em>Language</em> service.</p><span id="more"></span><p>Today, there are different ways to “AI-enable” an <a href="https://apex.oracle.com/"><em>Oracle Application Express</em></a> (APEX). For a long time now, Oracle has had several PL/SQL packages under the Oracle Enterprise Database’s Machine Learning option, or what used to be known as Oracle Advanced Analytics. This option is in fact, <a href="https://blogs.oracle.com/database/machine-learning,-spatial-and-graph-no-license-required-v2">no longer</a> an option and is included in all editions of the database.</p><p>Specifically, <a href="https://www.oracle.com/database/technologies/datawarehouse-bigdata/oml4sql.html"><em>Oracle Machine Learning for SQL</em></a> (OML4SQL) allows the PL/SQL developer to train and apply ML models without the data leaving the database. It supports a variety of ML algorithms, and generally, does not require developers to have advanced theoretical knowledge of ML. And because it relies only on PL/SQL and SQL, it can be easily integrated into APEX. However, developers are limited to ML algorithms that have been implemented by Oracle.</p><p>About a month ago, Oracle announced the general availability of <em>AutoML</em> and <em>OML Services</em> on the <em>Autonomous Database</em> (ADB). Developers who are not too ML-savvy can use the AutoML UI (user interface), available through the Oracle Machine Learning Notebooks that is included with every ADB. AutoMl automates the process of selecting, training, testing, and evaluating ML models. The generated models can then be exposed through OML Services’ REST APIs.</p><p>However, sometimes, all we need is a ready-to-use AI/ML model that performs a rather generic task. Very common these days is the need to perform <em>Sentiment Analysis</em> on a body of text. Microsoft Azure’s Cognitive Services has Text Analytics and AWS has Amazon Comprehend. What does Oracle have? At least now we can say, “OCI Language Services.” It took a while, but better late than never!</p><h2 id="Identity-and-Policy"><a href="#Identity-and-Policy" class="headerlink" title="Identity and Policy"></a>Identity and Policy</h2><p>As a best practice, we should create an OCI user specifically for interacting with the OCI REST API on behalf of the APEX application. The user should have limited OCI capabilities and should only be allowed to have API access and nothing more. You will need to generate the API keys and can easily do this from the user’s details page in the OCI console.</p><img src="/content/id/2010/generate-download-api-keys.png" class="" title="Generate and download the API key pair from OCI console."><span class="caption">Generate and download the API key pair from OCI console.</span><p>You should also download the keys in PEM format. Also, gather the information (click the <em>View Configuration File</em> link on the user’s details page) that you will need to setup the APEX Web Credentials for OCI, specifically:</p><ul><li>User OCID</li><li>Tenant OCID; and</li><li>The API key’s fingerprint</li></ul><img src="/content/id/2010/gather-information.png" class="" title="Gather the OCI information that you will need."><span class="caption">Gather the OCI information that you will need.</span><p>Open the private key that you had downloaded from the OCI console and remove (a) the enclosing tags <code>-----BEGIN PRIVATE KEY-----</code> and <code>-----END PRIVATE KEY-----</code>; and (b) <strong>all</strong> newline characters. The end result should be a very long string of characters. This is the <em>OCI Private Key</em> that you will need to provide in the APEX Web Credentials. Copy the text, but <strong>do not</strong> save the PEM file.</p><p>Create the Web Credentials with the required information about your user and tenancy.</p><img src="/content/id/2010/web-credentials.png" class="" title="Setup APEX Web Credentials."><span class="caption">Setup APEX Web Credentials.</span><p>Next, create an IAM Group, e.g., <em>AiLanguageUsers</em>, and assign the user to the group.</p><p>To use the Language Services, we will need to create a policy to allow users access. We have the option of creating a blanket policy with the following statement:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">allow any-user to use ai-service-language-family in tenancy</span><br></pre></td></tr></table></figure><p><strong>OR</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">allow group AiLanguageUsers to use ai-service-language-family in tenancy</span><br></pre></td></tr></table></figure><p>I recommend the latter.</p><h2 id="Demo-Application"><a href="#Demo-Application" class="headerlink" title="Demo Application"></a>Demo Application</h2><p>Create a simple APEX application to demonstrate the utility of the Language Service through its REST API.</p><img src="/content/id/2010/demo-page.png" class=""><p>The key items are:</p><ul><li>Two textarea page items</li><li>A button that triggers a dynamic action</li><li>A dynamic action that sets one item using a PL/SQL function with the code below:</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  c_base_url constant varchar2(<span class="number">59</span>) :<span class="operator">=</span> <span class="string">&#x27;https://language.aiservice.us-phoenix-1.oci.oraclecloud.com&#x27;</span>;</span><br><span class="line">  c_endpoint_path constant varchar2(<span class="number">50</span>) :<span class="operator">=</span> <span class="string">&#x27;/20210101/actions/detectLanguageSentiments&#x27;</span>;</span><br><span class="line">  c_web_credential constant varchar2(<span class="number">30</span>) :<span class="operator">=</span> <span class="string">&#x27;DG_ADBAGENT01&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  l_response <span class="type">clob</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  apex_web_service.g_request_headers(<span class="number">1</span>).name :<span class="operator">=</span> <span class="string">&#x27;Content-Type&#x27;</span>;</span><br><span class="line">  apex_web_service.g_request_headers(<span class="number">1</span>).<span class="keyword">value</span> :<span class="operator">=</span> <span class="string">&#x27;application/json&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  l_response :<span class="operator">=</span> apex_web_service.make_rest_request(</span><br><span class="line">    p_url <span class="operator">=</span><span class="operator">&gt;</span> c_base_url <span class="operator">||</span> c_endpoint_path</span><br><span class="line">      , p_http_method <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;POST&#x27;</span></span><br><span class="line">      , p_body <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;&#123; &quot;text&quot;: &quot;&#x27;</span> <span class="operator">||</span> apex_escape.json(:P1_INPUT) <span class="operator">||</span> <span class="string">&#x27;&quot; &#125;&#x27;</span></span><br><span class="line">      , p_credential_static_id <span class="operator">=</span><span class="operator">&gt;</span> c_web_credential</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> l_response;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure><p>This DA simply takes the input text and makes a POST request to the appropriate endpoint for performing sentiment analysis. The expected output is a JSON containing the model’s prediction.</p><img src="/content/id/2010/apex-we-got-there.png" class="" title="We made it!"><span class="caption">We made it!</span><p><del>Unfortunately, it doesn’t seem to work right now and I’m in touch with <a href="https://twitter.com/cczarski">Carsten</a> to figure this out.</del></p><blockquote><p><del>[TODO] I will update the post as soon as there’s a positive outcome.</del></p></blockquote><p>[UPDATE, 2021-05-10] A noob error! I should have checked the debugger logs. As it turns out, I was missing the HTTP header <code>Content-Type</code>. All systems go! The above code snippet and screenshot have been updated to reflect the success! Special thanks to <a href="https://twitter.com/cczarski">Carsten</a> who helped validate that this REST call is supported and should have been successful.</p><p>Meanwhile, I’ve tried looking at the OCI PL/SQL SDK that I had discussed in the <a href="/content/id/2009">previous post</a>, but it doesn’t appear to have been updated on my ADB.</p><blockquote><p>[TODO] I will also update this post as that becomes available.</p></blockquote><p>What’s working though is the OCI CLI, but you will need to upgrade it to access the new commands. Here’s an example and the output that we should have obtained through the example APEX application.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">$ oci ai language detect-sentiments --text <span class="string">&quot;I feel great with the launch of OCI AI Language Services!&quot;</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;aspects&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;length&quot;</span>: 6,</span><br><span class="line">        <span class="string">&quot;offset&quot;</span>: 22,</span><br><span class="line">        <span class="string">&quot;scores&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;Negative&quot;</span>: 0.0004437448224052787,</span><br><span class="line">          <span class="string">&quot;Neutral&quot;</span>: 0.0,</span><br><span class="line">          <span class="string">&quot;Positive&quot;</span>: 0.9995562434196472</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;sentiment&quot;</span>: <span class="string">&quot;Positive&quot;</span>,</span><br><span class="line">        <span class="string">&quot;text&quot;</span>: <span class="string">&quot;launch&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;length&quot;</span>: 24,</span><br><span class="line">        <span class="string">&quot;offset&quot;</span>: 32,</span><br><span class="line">        <span class="string">&quot;scores&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;Negative&quot;</span>: 0.00011140753485960886,</span><br><span class="line">          <span class="string">&quot;Neutral&quot;</span>: 0.0,</span><br><span class="line">          <span class="string">&quot;Positive&quot;</span>: 0.99988853931427</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;sentiment&quot;</span>: <span class="string">&quot;Positive&quot;</span>,</span><br><span class="line">        <span class="string">&quot;text&quot;</span>: <span class="string">&quot;OCI AI Language Services&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Exciting times! As I have repeatedly said, the OCI keeps getting better. I’m certainly looking forward to resolving the issues I have encountered, and hopefully, more AI services to be launched in the near future!</p><blockquote><p><strong>Credits</strong></p><p>Photo by <a href="https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Markus Winkler</a> on <a href="https://unsplash.com/s/photos/emoji?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></p></blockquote>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/">Infrastructure</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/oracle-cloud/">Oracle Cloud</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/oracle-cloud/">oracle cloud</category>
      
      <category domain="https://fuzziebrain.com/tags/oci/">oci</category>
      
      <category domain="https://fuzziebrain.com/tags/artificial-intelligence/">artificial intelligence</category>
      
      <category domain="https://fuzziebrain.com/tags/machine-learning/">machine learning</category>
      
      <category domain="https://fuzziebrain.com/tags/natural-language-processing/">natural language processing</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2010/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Manipulating the Oracle Cloud with PL/SQL</title>
      <link>https://fuzziebrain.com/content/id/2009/</link>
      <guid>https://fuzziebrain.com/content/id/2009/</guid>
      <pubDate>Fri, 16 Oct 2020 06:06:16 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2009/slide-updated.png&quot; class=&quot;&quot; title=&quot;Slide on OCI REST APIs updated&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Slide on OCI REST APIs updated&lt;/span&gt;

&lt;p&gt;It was only days ago that I had finalised my slides for my upcoming Oracle Groundbreakers APAC Virtual Tour &lt;a href=&quot;https://oracle-groundbreakers-apac-virtual-tour-2020.heysummit.com/talks/store-your-treasures-in-the-cloud-1/&quot;&gt;talk&lt;/a&gt; on using &lt;a href=&quot;https://oracle.com/cloud&quot;&gt;Oracle Cloud Infrastructure&lt;/a&gt; (OCI) Object Storage for storing large files in &lt;a href=&quot;https://apex.oracle.com/&quot;&gt;Oracle Application Express&lt;/a&gt; (APEX). Today, I found out with a lot of excitement, that one of my slides was now factually wrong!&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2009/slide-updated.png" class="" title="Slide on OCI REST APIs updated"><span class="caption">Slide on OCI REST APIs updated</span><p>It was only days ago that I had finalised my slides for my upcoming Oracle Groundbreakers APAC Virtual Tour <a href="https://oracle-groundbreakers-apac-virtual-tour-2020.heysummit.com/talks/store-your-treasures-in-the-cloud-1/">talk</a> on using <a href="https://oracle.com/cloud">Oracle Cloud Infrastructure</a> (OCI) Object Storage for storing large files in <a href="https://apex.oracle.com/">Oracle Application Express</a> (APEX). Today, I found out with a lot of excitement, that one of my slides was now factually wrong!</p><span id="more"></span><p>For a while now, Oracle has provided SDKs (Software Development Kits) for a wide range of programming languages, but strangely, that didn’t include PL/SQL. Thankfuly, the wait and bewilderment is now finally over! Well, at least for folks who are running their applications on the <a href="https://www.oracle.com/autonomous-database/">Oracle Autonomous Database</a> (ADB). And yes, even if you’re on an <a href="https://oracle.com/cloud/free"><em>Always Free</em></a> instance.</p><p>Don’t believe me? Use your favourite database client and login to your ADB instance using the <em>admin</em> account. Run the query below to get a list of available packages that line up with the APIs listed <a href="https://docs.cloud.oracle.com/iaas/pl-sql-sdk/index.html">here</a>.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> object_name</span><br><span class="line"><span class="keyword">from</span> dba_objects</span><br><span class="line"><span class="keyword">where</span> object_name <span class="keyword">like</span> <span class="string">&#x27;DBMS_CLOUD_OCI_%&#x27;</span></span><br><span class="line">  <span class="keyword">and</span> object_type <span class="operator">=</span> <span class="string">&#x27;PACKAGE&#x27;</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> object_name;</span><br></pre></td></tr></table></figure><p>You should see a long list of 70 packages (at the time of writing), something like this:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">OBJECT_NAME</span><br><span class="line">----------------------------------------</span><br><span class="line">DBMS_CLOUD_OCI_AD_AUDIT</span><br><span class="line">DBMS_CLOUD_OCI_AG_DEPLOYMENT</span><br><span class="line">DBMS_CLOUD_OCI_AG_GATEWAY</span><br><span class="line">DBMS_CLOUD_OCI_AG_WORK_REQUESTS</span><br><span class="line">DBMS_CLOUD_OCI_AM_APPLICATION_MIGRATION</span><br><span class="line">DBMS_CLOUD_OCI_AN_ANALYTICS</span><br><span class="line">DBMS_CLOUD_OCI_ASC_AUTO_SCALING</span><br><span class="line">DBMS_CLOUD_OCI_AS_ANNOUNCEMENT</span><br><span class="line">DBMS_CLOUD_OCI_BC_BLOCKCHAIN_PLATFORM</span><br><span class="line">DBMS_CLOUD_OCI_BDS_BDS</span><br><span class="line">DBMS_CLOUD_OCI_BD_BUDGET</span><br><span class="line">...</span><br><span class="line">DBMS_CLOUD_OCI_WS_WAAS</span><br><span class="line"></span><br><span class="line">70 rows selected.</span><br></pre></td></tr></table></figure><h2 id="Required-Database-Privileges"><a href="#Required-Database-Privileges" class="headerlink" title="Required Database Privileges"></a>Required Database Privileges</h2><p>To use them with your application schema, e.g. <em>myapp</em>, you will need to do the following tasks. Begin with the <em>admin</em> account.</p><ol><li>Allow <em>myapp</em> to create the required OCI Cloud Services credentials (OCI credentials). We will discuss what this is in greater detail later. The procedures that you will need are in the package <code>DBMS_CLOUD</code>. <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">execute</span> <span class="keyword">on</span> dbms_cloud <span class="keyword">to</span> myapp;</span><br></pre></td></tr></table></figure></li><li>Identify the API and corresponding PL/SQL package that you wish to use. For example, to access the Object Storage, I will require privileges to the package <code>DBMS_CLOUD_OCI_OBS_OBJECT_STORAGE</code>. <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">execute</span> <span class="keyword">on</span> dbms_cloud_oci_obs_object_storage <span class="keyword">to</span> myapp;</span><br></pre></td></tr></table></figure></li><li>Check the API reference and identify database types that you might need to use and grant these privileges as well. For example, in my code, I will be declaring a variable of the type <code>dbms_cloud_oci_obs_object_storage_list_buckets_response_t</code>. <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">execute</span> <span class="keyword">on</span> dbms_cloud_oci_obs_object_storage_list_buckets_response_t <span class="keyword">to</span> myapp;</span><br></pre></td></tr></table></figure></li></ol><h2 id="OCI-Setup"><a href="#OCI-Setup" class="headerlink" title="OCI Setup"></a>OCI Setup</h2><p>Setup the Object Storage bucket, user, group and policy using the steps described in my Oracle Magazine article <a href="https://blogs.oracle.com/oraclemagazine/better-file-storage-in-oracle-cloud">Better File Storage in Oracle Cloud</a>, specifically:</p><ul><li>Identity Setup; and</li><li>Bucket Setup</li></ul><p>Be sure to generate the API keypair and associate it with the OCI user that will act on your application’s behalf. Also ensure that this user has the necessary policies applied. Finally, please note the following information to setup the required OCI credentials:</p><ul><li>User’s ocid</li><li>Tenancy ocid</li><li>Private key</li><li>Fingerprint</li></ul><p>Next, connect to the database as the application user/schema. You will need to execute the procedure <code>DBMS_CLOUD.CREATE_CREDENTIAL</code>. There are two overloaded procedures and you <strong>must</strong> execute the procedure for the <em>OCI Signing Key Credentials</em>.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span></span><br><span class="line">  dbms_cloud.create_credential(</span><br><span class="line">    credential_name <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;MY_OCI_CRED&#x27;</span></span><br><span class="line">    , user_ocid <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;ocid1.user.oc1..aaaaaaaa**********&#x27;</span></span><br><span class="line">    , tenancy_ocid <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;ocid1.tenancy.oc1..aaaaaaaa**********&#x27;</span></span><br><span class="line">    , private_key <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;MIIE**********=&#x27;</span></span><br><span class="line">    , fingerprint <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;**:**:**:**:**:**:**:**:**:**:**:**:**:**:**:**&#x27;</span></span><br><span class="line">  );</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="operator">/</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>NOTE</strong></p><p>The private key is to be prepared the same way we do when setting up the <em>Web Credentials</em> in APEX for OCI. Remove the header, footer and any newlines in the PEM-formatted contents.</p></blockquote><p>Check that the OCI credentials were created successfully using the following query:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> credential_name, username <span class="keyword">from</span> user_credentials;</span><br></pre></td></tr></table></figure><p>Now run the following sample code to get the list of Object Storage buckets in the compartment defined in the parameter <code>compartment_id</code>. You will need to also specify your tenancy’s Object Storage namespace and region.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  where_are_my_buckets dbms_cloud_oci_obs_object_storage_list_buckets_response_t;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  where_are_my_buckets :<span class="operator">=</span></span><br><span class="line">      dbms_cloud_oci_obs_object_storage.list_buckets(</span><br><span class="line">        namespace_name <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;mynamespace&#x27;</span></span><br><span class="line">        , compartment_id <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;ocid1.compartment.oc1..aaaaaaaa**********&#x27;</span></span><br><span class="line">        , region <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;us-ashburn-1&#x27;</span></span><br><span class="line">        , credential_name <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;MY_OCI_CRED&#x27;</span></span><br><span class="line">      );</span><br><span class="line">  dbms_output.put_line(<span class="string">&#x27;status code: &#x27;</span> <span class="operator">||</span> where_are_my_buckets.status_code);</span><br><span class="line">  dbms_output.put_line(<span class="string">&#x27;bucket count &#x27;</span> <span class="operator">||</span> where_are_my_buckets.response_body.count);</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1.</span>.where_are_my_buckets.response_body.count</span><br><span class="line">  loop</span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;bucket: &#x27;</span> <span class="operator">||</span> where_are_my_buckets.response_body(i).name);</span><br><span class="line">  <span class="keyword">end</span> loop;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="operator">/</span></span><br></pre></td></tr></table></figure><p>You should get an output similar to this:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">status code: 200</span><br><span class="line">bucket count 2</span><br><span class="line">bucket: apex_file_storage</span><br><span class="line">bucket: data-import</span><br></pre></td></tr></table></figure><h2 id="Closing"><a href="#Closing" class="headerlink" title="Closing"></a>Closing</h2><p>I have barely scratched the surface of what we can do with this new PL/SQL SDK for OCI REST APIs, especially for OCI adminsitrators and APEX developers looking to <a href="https://insum.ca/oracle-cloud-native-and-oracle-application-express/">integrate Cloud Native</a> features in their applications. The APEX team did us developers a huge service when the web credentials for OCI was introduced in version 19.2. It greatly simplified how we accessed the OCI REST services. However, not every endpoint worked out-of-the-box and I have found problems accessing some endpoints. We also had to write our own code for constructing the request payload and parsing the responses. This SDK handles and shields us from all the low-level marshalling tasks, and provides a structured approach for retrieving information from the API responses.</p><p>The power of the <a href="https://blogs.oracle.com/database/what-is-a-converged-database">Converged Database</a> is here. One database to rule them all! <a href="https://twitter.com/hashtag/thinkautonomous">#ThinkAutonomous</a></p>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/">Infrastructure</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/oracle-cloud/">Oracle Cloud</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/cloud/">cloud</category>
      
      <category domain="https://fuzziebrain.com/tags/oracle/">oracle</category>
      
      <category domain="https://fuzziebrain.com/tags/rest/">rest</category>
      
      <category domain="https://fuzziebrain.com/tags/plsql/">plsql</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2009/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>New Book on Getting the Most Out of the Oracle Cloud Free Tier</title>
      <link>https://fuzziebrain.com/content/id/2008/</link>
      <guid>https://fuzziebrain.com/content/id/2008/</guid>
      <pubDate>Mon, 28 Sep 2020 06:56:39 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2008/9781484260104-book-cover.png&quot; class=&quot;&quot; title=&quot;Getting Started with Oracle Cloud Free Tier Book Cover&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Getting Started with Oracle Cloud Free Tier Book Cover&lt;/span&gt;

&lt;p&gt;I won’t deny that it has been a challenging and tough journey, but today, I’m glad to be able to declare that the book “&lt;a href=&quot;https://www.apress.com/book/9781484260104&quot;&gt;Getting Started with Oracle Cloud Free Tier&lt;/a&gt;“ has been published and available to purchase!&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2008/9781484260104-book-cover.png" class="" title="Getting Started with Oracle Cloud Free Tier Book Cover"><span class="caption">Getting Started with Oracle Cloud Free Tier Book Cover</span><p>I won’t deny that it has been a challenging and tough journey, but today, I’m glad to be able to declare that the book “<a href="https://www.apress.com/book/9781484260104">Getting Started with Oracle Cloud Free Tier</a>“ has been published and available to purchase!</p><span id="more"></span><p>How time flies!</p><p>Looking back, it’s been almost a year since <a href="https://twitter.com/JonathanGennick">Jonathan Gennick</a> at <a href="https://apress.com/">Apress</a> first approached me to see if I was keen to write a book on the then recently-announced <a href="https://oracle.com/cloud/free">Oracle Cloud Free Tier</a>. I was excited about what Oracle was doing with this new offering, and even more eager to share what I knew about the Oracle Cloud, so I quickly said, “Yes!”</p><p>There was a lot of ground to cover and we had aimed to publish the book ahead of <a href="https://www.oracle.com/openworld/">Oracle OpenWorld</a> (OOW) 2020. Fortunately, I was able to rope in <a href="https://twitter.com/lucdemanche">Luc Demanche</a> as a co-author. Luc focused on the infrastucture-related topics, while I tackled areas closer to my heart, software applications, including the longest chapter written for readers who are totally new to <a href="https://apex.oracle.com/">Oracle Application Express</a>. It was tough compressing as much information as I could about such a great platform in only one chapter.</p><p>It was also particularly daunting to venture into other web application development platforms like <a href="https://flask.palletsprojects.com/">Flask</a> for Python developers, and <a href="https://reactjs.org/">React</a> for JavaScript developers. I wanted to demonstrate that the Oracle Cloud wasn’t just for the APEX geeks. There’s something for everyone!</p><p>More than just being knowledgeable about the Oracle Cloud, Luc was also a seasoned author. This is his second book, and his experience and cheer-leading helped contribute greatly to the successful completion of this new adventure. I am greatly indebted to him. I would also like to take the opportunity to thank Jonathon again for the opportunity, and to his team of editors and project managers, who helped guide us along the editorial process. And last but not least, a special thank you to <a href="https://twitter.com/CRuepprich">Christoph Ruepprich</a>, who sacrificed his time to help ensure that what we wrote was technically sound.</p><h2 id="Oracle-Groundbreakers-APAC-Virtual-Tour-2020"><a href="#Oracle-Groundbreakers-APAC-Virtual-Tour-2020" class="headerlink" title="Oracle Groundbreakers APAC Virtual Tour 2020"></a>Oracle Groundbreakers APAC Virtual Tour 2020</h2><p>In other news, I’m honoured and glad to be participating in the upcoming <a href="https://www.apacgbt.com/">Oracle Groundbreakers APAC Virtual Tour</a> happening next month, October 2020. I will be presenting my session “Store Your Treasures in the Cloud”, that will provide a detailed walkthrough on integrating Oracle Cloud <a href="https://www.oracle.com/cloud/storage/object-storage.html">Object Storage</a> with APEX application. And yes, you can certainly do this with <em>Always Free</em>-only resources.</p><p>Born and bred in <a href="https://www.google.com/maps/place/Singapore/">Singapore</a>, there’s a warm fuzzy feeling knowing that I’ll be speaking in a region closer to home. Especially so this year with COVID-19 disrupting my travel plans. As one of my favourite singers <a href="https://wikipedia.org/wiki/Alan_Dawa_Dolma">阿兰</a> would say, “无论我们飞得有多高，有多远，永远不要忘记自己的家乡，不要忘记自己的梗。”</p>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/">Infrastructure</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/oracle-cloud/">Oracle Cloud</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/cloud/">cloud</category>
      
      <category domain="https://fuzziebrain.com/tags/oracle/">oracle</category>
      
      <category domain="https://fuzziebrain.com/tags/nodejs/">nodejs</category>
      
      <category domain="https://fuzziebrain.com/tags/free-tier/">free-tier</category>
      
      <category domain="https://fuzziebrain.com/tags/always-free/">always-free</category>
      
      <category domain="https://fuzziebrain.com/tags/python/">python</category>
      
      <category domain="https://fuzziebrain.com/tags/javascript/">javascript</category>
      
      <category domain="https://fuzziebrain.com/tags/reactjs/">reactjs</category>
      
      <category domain="https://fuzziebrain.com/tags/web/">web</category>
      
      <category domain="https://fuzziebrain.com/tags/applications/">applications</category>
      
      <category domain="https://fuzziebrain.com/tags/architecture/">architecture</category>
      
      <category domain="https://fuzziebrain.com/tags/book/">book</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2008/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Update Free SSL Certificates for the OCI Load Balancer</title>
      <link>https://fuzziebrain.com/content/id/2007/</link>
      <guid>https://fuzziebrain.com/content/id/2007/</guid>
      <pubDate>Tue, 15 Sep 2020 04:59:11 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2007/house-keys-4516178_1280.jpg&quot; class=&quot;&quot; title=&quot;Keep Security Up to Date&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Keep Security Up to Date&lt;/span&gt;

&lt;p&gt;In my previous blog post on &lt;a href=&quot;/content/id/2005/&quot;&gt;Running ORDS Against the Autonomous Database - Part 2&lt;/a&gt;, we had looked at how to add an existing &lt;a href=&quot;https://letsencrypt.org/&quot;&gt;Let’s Encrypt&lt;/a&gt; (LE) SSL certificate to an &lt;a href=&quot;https://oracle.com/cloud&quot;&gt;Oracle Cloud Infrastructure&lt;/a&gt; (OCI) Load Balancer. You’d typically wwant to host your websites or &lt;a href=&quot;https://apex.oracle.com/&quot;&gt;Oracle Application Express&lt;/a&gt; applications over a secure transport layer, especially when sensitive data is communicated between the browser and server.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2007/house-keys-4516178_1280.jpg" class="" title="Keep Security Up to Date"><span class="caption">Keep Security Up to Date</span><p>In my previous blog post on <a href="/content/id/2005/">Running ORDS Against the Autonomous Database - Part 2</a>, we had looked at how to add an existing <a href="https://letsencrypt.org/">Let’s Encrypt</a> (LE) SSL certificate to an <a href="https://oracle.com/cloud">Oracle Cloud Infrastructure</a> (OCI) Load Balancer. You’d typically wwant to host your websites or <a href="https://apex.oracle.com/">Oracle Application Express</a> applications over a secure transport layer, especially when sensitive data is communicated between the browser and server.</p><span id="more"></span><p>Typically, I’d run scripts on the web server to generate and renew certificates using <a href="https://certbot.eff.org/">Certbot</a>, since it would be easy enough to point the web server configuration to use the generated artifacts, as well as to perform service restarts. However, with the load balancer, this becomes more challenging. It doesn’t help that LE certificates expire every 90 days.</p><p>I’ve found it most reliable to run certbot from within a <a href="https://docker.com/">Docker</a> to avoid any dependency issues and you can quite easily get the published image on <a href="https://hub.docker.com/">Docker Hub</a> including some with plugins to work directly with DNS services like <a href="https://cloudflare.com/">Cloudflare</a>. These are important if you wanted to obtain wildcard certificates that requires a different challenge process.</p><p>Once the certificates have been generated, they would have to be deployed to the OCI load balancer and assigned to the active listener that supports HTTPS requests. You could do this manually through the OCI console, but it is a mundane and routine task that is prone to neglect, so I had to figure out a way to automate this part of the process.</p><p>On the web server, Certbot is usually called by a cron job once a day. It checks if a certificate is expiring and will initiate the renewal process if it is. It also has hooks that allow you to execute external scripts. For example, after a certificate is successfully generated or renewed, a <em>post-hook</em> could be used to restart a web server.</p><p>Using the Certbot hooks and the <a href="https://docs.cloud.oracle.com/iaas/Content/API/Concepts/cliconcepts.htm">OCI CLI</a>, I created a Docker image that encapsulates both pieces of software, and then have them work together to perform both tasks in concert. You can find the code <a href="https://github.com/fuzziebrain/oci-le-cert-manager">here</a>. The documentation is a little rough and lengthy, so I will leave you to read the steps described in the <a href="https://github.com/fuzziebrain/oci-le-cert-manager/blob/master/README.md">README</a> file.</p><p>Hope this helps you maintain and secure your web applications!</p><blockquote><p><u>Photo Credits</u></p><p>Photo by <a href="https://pixabay.com/users/Schluesseldienst-13794927/">Schluesseldienst</a><br>License: <a href="https://pixabay.com/service/license/">Pixabay</a></p></blockquote>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/">Infrastructure</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/oracle-cloud/">Oracle Cloud</category>
      
      
      <category domain="https://fuzziebrain.com/tags/security/">security</category>
      
      <category domain="https://fuzziebrain.com/tags/ssl/">ssl</category>
      
      <category domain="https://fuzziebrain.com/tags/load-balancer/">load balancer</category>
      
      <category domain="https://fuzziebrain.com/tags/letsencrypt/">letsencrypt</category>
      
      <category domain="https://fuzziebrain.com/tags/certificates/">certificates</category>
      
      <category domain="https://fuzziebrain.com/tags/generate/">generate</category>
      
      <category domain="https://fuzziebrain.com/tags/renew/">renew</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2007/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Keep Your APEX Images Updated</title>
      <link>https://fuzziebrain.com/content/id/2006/</link>
      <guid>https://fuzziebrain.com/content/id/2006/</guid>
      <pubDate>Sun, 26 Jul 2020 00:03:59 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2006/spider-223982_1280x800.jpg&quot; class=&quot;&quot; title=&quot;Spider Web&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Spider Web&lt;/span&gt;

&lt;p&gt;As Uncle Ben would say, “Remember, with great power, comes great responsibility.” With the release of &lt;a href=&quot;https://www.oracle.com/database/technologies/appdev/rest.html&quot;&gt;Oracle REST Data Services&lt;/a&gt; (ORDS) version 19.4.6, many of us were eager to deploy a customer-managed ORDS solution in order to support vanity URLs with &lt;a href=&quot;https://apex.oracle.com/&quot;&gt;Oracle Application Express&lt;/a&gt; (APEX), myself &lt;a href=&quot;/content/id/2004&quot;&gt;included&lt;/a&gt;. It has worked well for me until a few days ago, I noticed that my &lt;a href=&quot;https://oracle.com/jet&quot;&gt;Oracle JET&lt;/a&gt; charts weren’t loading any more.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2006/spider-223982_1280x800.jpg" class="" title="Spider Web"><span class="caption">Spider Web</span><p>As Uncle Ben would say, “Remember, with great power, comes great responsibility.” With the release of <a href="https://www.oracle.com/database/technologies/appdev/rest.html">Oracle REST Data Services</a> (ORDS) version 19.4.6, many of us were eager to deploy a customer-managed ORDS solution in order to support vanity URLs with <a href="https://apex.oracle.com/">Oracle Application Express</a> (APEX), myself <a href="/content/id/2004">included</a>. It has worked well for me until a few days ago, I noticed that my <a href="https://oracle.com/jet">Oracle JET</a> charts weren’t loading any more.</p><span id="more"></span><p>A quick check showed multiple <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5">HTTP 404</a> errors were triggered. APEX was referencing a newer Oracle JET version, 8.3.0 insted of the stock 8.0.0.</p><p>One of the key benefits of running APEX on an <a href="https://www.oracle.com/database/what-is-autonomous-database.html">Oracle Autonomous Database</a> is auto-patching, and clearly something got updated in the recent days. True enough, an updated Patch Set Bundle (PSE) was released on July 20, 2020 (Source: <a href="https://apex.oracle.com/download">https://apex.oracle.com/download</a>).</p><p>On the <a href="https://www.oracle.com/tools/downloads/apex-downloads/apex-201-known-issues.html">Known Issues</a> page, it states:</p><blockquote><p>With 20.1, we integrated the following third party libraries: Oracle JET 8.0.0, jQuery 3.4.1, jQuery Migrate 3.0.1, and jQuery FullCalendar 3.10.0. Upgraded versions of these libraries have been made available: Oracle JET 8.3.0, jQuery 3.5.1, jQuery Migrate 3.3.0, and jQuery FullCalendar 3.10.2.</p></blockquote><p>Here’s what I did to get my server updated.</p><ol><li>Login to <a href="https://support.oracle.com/">Oracle Support</a> and search <code>30990551</code>, or simply click <a href="https://support.oracle.com/epmos/faces/PatchDetail?patchId=30990551">here</a></li><li>Download the patch. The file name should be <code>p30990551_2010_Generic.zip</code>.<blockquote><p>Important</p><p>You will need an active support contract in order to download the PSE.</p></blockquote></li><li>Upload the patch to the Compute instance hosting ORDS. Place the file in the <code>/tmp</code> directory.</li><li>Login to the server as the user <code>opc</code>, using SSH.</li><li>Set the environment variables: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RELEASE=20.1.0.00.13</span><br><span class="line">PATCHNUM=30990551</span><br><span class="line">PATCHFILE=p30990551_2010_Generic.zip</span><br></pre></td></tr></table></figure></li><li>Execute the following: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /tmp/<span class="variable">$RELEASE</span></span><br><span class="line">unzip /tmp/<span class="variable">$PATCHFILE</span> <span class="string">&quot;<span class="variable">$PATCHNUM</span>/images/*&quot;</span> -d /tmp/<span class="variable">$RELEASE</span></span><br><span class="line"><span class="built_in">cp</span> -R /tmp/<span class="variable">$RELEASE</span>/<span class="variable">$PATCHNUM</span>/images/* /opt/oracle/apex/images/<span class="variable">$RELEASE</span></span><br><span class="line"><span class="built_in">rm</span> -rf /tmp/<span class="variable">$RELEASE</span></span><br></pre></td></tr></table></figure></li></ol><p>That’s it!</p><blockquote><p><u>Photo Credits</u></p><p>Photo by <a href="https://pixabay.com/users/arttower-5337/">ArtTower</a></p></blockquote>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/">Infrastructure</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/oracle-cloud/">Oracle Cloud</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/autonomous/">autonomous</category>
      
      <category domain="https://fuzziebrain.com/tags/database/">database</category>
      
      <category domain="https://fuzziebrain.com/tags/ords/">ords</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2006/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Running ORDS Against the Autonomous Database - Part 2</title>
      <link>https://fuzziebrain.com/content/id/2005/</link>
      <guid>https://fuzziebrain.com/content/id/2005/</guid>
      <pubDate>Thu, 02 Jul 2020 03:46:45 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2005/pipes-5146458_1280x800.jpg&quot; class=&quot;&quot; title=&quot;Old pipes and valves&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Old pipes and valves&lt;/span&gt;

&lt;p&gt;In my &lt;a href=&quot;/content/id/2004/&quot;&gt;previous post&lt;/a&gt;, we looked at installing and configuring &lt;a href=&quot;https://www.oracle.com/ca-en/database/technologies/appdev/rest.html&quot;&gt;Oracle REST Data Services&lt;/a&gt; (ORDS) and have it work with &lt;a href=&quot;https://apex.oracle.com/&quot;&gt;Oracle Application Express&lt;/a&gt; (APEX) that comes preinstalled with every &lt;a href=&quot;https://www.oracle.com/database/what-is-autonomous-database.html&quot;&gt;Oracle Autonomous Database&lt;/a&gt; (ADB). Like APEX, ORDS is also included as a feature of the ADB. However, there are certain situations where you might like to manage your own instance of ORDS.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2005/pipes-5146458_1280x800.jpg" class="" title="Old pipes and valves"><span class="caption">Old pipes and valves</span><p>In my <a href="/content/id/2004/">previous post</a>, we looked at installing and configuring <a href="https://www.oracle.com/ca-en/database/technologies/appdev/rest.html">Oracle REST Data Services</a> (ORDS) and have it work with <a href="https://apex.oracle.com/">Oracle Application Express</a> (APEX) that comes preinstalled with every <a href="https://www.oracle.com/database/what-is-autonomous-database.html">Oracle Autonomous Database</a> (ADB). Like APEX, ORDS is also included as a feature of the ADB. However, there are certain situations where you might like to manage your own instance of ORDS.</p><span id="more"></span><p>Three key reasons stand out for me:</p><ol><li>Using my own domain for my APEX applications.</li><li>Managing the number of database connections consumed by ORDS for my Always Free ADB that comes with a limit of 20 concurrent database sessions.</li><li>Restricting “direct” access to the ADB, for example, to connect to the database using external tools like <a href="https://www.oracle.com/database/technologies/appdev/sqldeveloper-landing.html">SQL Developer and SQLcl</a>.</li></ol><p>The figure below depicts the topology that I will build for my APEX applications.</p><img src="/content/id/2005/topology.png" class="" title="Planned topology"><span class="caption">Planned topology</span><p>Note that I chose a single subnet for the Load Balancer and Compute. The latter may be deployed in a separate subnet for further isolation.</p><h2 id="Load-Balancers"><a href="#Load-Balancers" class="headerlink" title="Load Balancers"></a>Load Balancers</h2><p>Under the <a href="https://oracle.com/cloud/free">Oracle Cloud Free Tier</a> offering, users are provided with one <em>Always Free</em> load balancer. It has a special bandwidth size called <em>Micro</em> and is limited to a maximum of 10 Mbps.</p><p>Go to the Load Balancers page. You will find it under the Networks menu item. Click on the blue <em>Create Load Balancer</em> button to begin.</p><img src="/content/id/2005/screen01.png" class="" title="Create Load Balancer Wizard"><span class="caption">Create Load Balancer Wizard</span><p>In the first step, do the following:</p><ul><li>Provide a suitable name.</li><li>Set the visibility type to <em>Public</em>.</li><li>Set the total bandwidth to <em>Micro</em>. Note that this size is not selectable if you have already created one, or are not in your Oracle Cloud Infrastructure (OCI) home region.</li><li>Select the appropriate Virtual Cloud Network (VCN) and subnet that the load balancer should be placed in. Make sure that it is setup as a public network, an Internet Gateway and network route rules for bidirectional Internet traffic.</li></ul><p>In the next step, leave the default settings. However, on the third and final step, change the listener to listen for HTTP traffic.</p><img src="/content/id/2005/screen02.png" class="" title="Create Load Balancer Wizard - Final Step"><span class="caption">Create Load Balancer Wizard - Final Step</span><p>Click on <em>Submit</em> to create the load balancer. A Listener and Backend Set is also created in the process, but we should delete them both once the load balancer is up.</p><p>Once created, the Load Balancer Details page will display the Reserved Public IP address it has been assigned with. Use this to update your DNS records.</p><img src="/content/id/2005/screen03.png" class="" title="Load Balancer Details page"><span class="caption">Load Balancer Details page</span><blockquote><p>Remember to delete the listener and backend set created by default.</p></blockquote><h2 id="Backend-Sets"><a href="#Backend-Sets" class="headerlink" title="Backend Sets"></a>Backend Sets</h2><p>Next, create the backend set that includes the Compute instance hosting ORDS. On the left side of the Load Balancer Details page, you will find a list of Resources that can be managed. Click on <em>Backend Sets</em> and then click on the blue <em>Create Backend Set</em> button to launch the wizard.</p><p>Provide a suitable name and then leave the default values for <em>Traffic Distribution Policy</em> and <em>Session Persistence</em>. Under Health Check, set the following:</p><ul><li><strong>Protocol</strong> - HTTP</li><li><strong>Port</strong> - 8080</li><li><strong>URL Path</strong> - /i/19.2.0.00.18/apex_version.txt</li></ul><p>After the backend set is created successfully, click on its name and add backends. You can access the list of backends from the Resources menu on the left of the Backend Set Information page.</p><p>To begin, click the blue <em>Add Backends</em> button and then select the Compute instance that is hosting ORDS. Be sure to change the port number to <code>8080</code>.</p><img src="/content/id/2005/screen04.png" class="" title="Add Backends Modal Dialog"><span class="caption">Add Backends Modal Dialog</span><p>For traffic to flow between the load balancer and backends, appropriate ingress and egress security list rules are required. You may do this manually, but for convenience, you can have the wizard perform these tasks automaticallly.</p><p>Click the <em>Add</em> button to complete the process.</p><h2 id="Hostnames"><a href="#Hostnames" class="headerlink" title="Hostnames"></a>Hostnames</h2><p>This is an optional resource but is simple to create. Simply provide a name and the URL that will be associated with the listener.</p><img src="/content/id/2005/screen05.png" class="" title="Add Hostname Modal Dialog"><span class="caption">Add Hostname Modal Dialog</span><h2 id="SSL-TLS-Certificates"><a href="#SSL-TLS-Certificates" class="headerlink" title="SSL/TLS Certificates"></a>SSL/TLS Certificates</h2><p>We will want to secure our access to the APEX instance. I will not go into details now on how to obtain a valid SSL/TLS certificate. To create this resource, you should have the following:</p><ol><li>SSL/TLS public certificate</li><li>CA certificate (while optional, I have found issues with REST clients validating with <a href="https://letsencrypt.org/">Let’s Encrypt</a> certificates)</li><li>Private key</li></ol><img src="/content/id/2005/screen06.png" class="" title="Add Certificate Modal Dialog"><span class="caption">Add Certificate Modal Dialog</span><blockquote><p><strong>All</strong> certificates and key must be in the PEM format.</p></blockquote><blockquote><p><em>Update [Sep 14, 2020]</em></p><p>I have made available a <a href="https://github.com/fuzziebrain/oci-le-cert-manager">project</a> that helps perform some of these tasks. You can read more about it in this follow-up <a href="/content/id/2007">post</a>.</p></blockquote><h2 id="Listeners"><a href="#Listeners" class="headerlink" title="Listeners"></a>Listeners</h2><p>Create two listeners, one each for listening to secure and non-secure traffic.</p><p>The HTTP listener should have the following attributes:</p><ul><li>A suitable name</li><li>An optional hostname</li><li>Listen using the HTTP protocol</li><li>Listen on port 80</li><li>Use SSL unchecked</li><li>The backend defined for the ORDS server selected</li><li>Default timeout of 60 seconds (or leave it blank)</li></ul><img src="/content/id/2005/screen07.png" class="" title="Create Listener Modal Dialog for HTTP Protocol"><span class="caption">Create Listener Modal Dialog for HTTP Protocol</span><p>The HTTPS listener should have the following attributes:</p><ul><li>A suitable name</li><li>An optional hostname</li><li>Listen using the <strong>HTTP</strong> protocol</li><li>Listen on port 443</li><li>Use SSL checked</li><li>The associated certificate selected</li><li>Verify peer certificate unchecked</li><li>The backend defined for the ORDS server selected</li><li>Idle timeout set to 1800 seconds</li></ul><img src="/content/id/2005/screen08.png" class="" title="Create Listener Modal Dialog for HTTPS Protocol"><span class="caption">Create Listener Modal Dialog for HTTPS Protocol</span><blockquote><p>The idle timeout I have suggested can be tweaked to your requirements. I have found 60 seconds to be too short for a functional APEX application. For example, file operations sometimes require a longer length of time to be completed successfully.</p></blockquote><h2 id="Other-Resources"><a href="#Other-Resources" class="headerlink" title="Other Resources"></a>Other Resources</h2><p>The instructions provided in the blog post gets you a basic setup to support a standard customer-managed ORDS instance. More often than not, you will have other requirements. For example, the <a href="https://apeks.app/sponsor-a-coin">APEX Challenge Coin</a> website uses a path alias that links to the APEX application for submitting nominations. In web servers, these are usually addressed by creating URL rewrite rules that redirect you to the correct address. For this purpose, you may use a <em>Rule Set</em> and assign it to a listener. Here’s a full list of rule types that you can create:</p><ul><li>Access Control</li><li>Access Method</li><li>URL Redirect</li><li>Request Header</li><li>Response Header</li><li>HTTP Header</li></ul><img src="/content/id/2005/screen09.png" class="" title="Create Rule Set Modal Dialog"><span class="caption">Create Rule Set Modal Dialog</span><p>You might also serve other resources hosted on other backend servers. For example, I host some static content on the apeks.app website. For that, I run an Apache Web Server that hosts a single static HTML page. I can create Path Route Sets that will redirect the browser to the appropriate backend server based on the supplied path. Any path that starts with <code>/i</code> or <code>/ords</code>, which is used by APEX and ORDS, hands off to the backend running ORDS. The default, and so every other path, will lead to the other web server.</p><blockquote><p><em>Update [Sep 14, 2020]</em></p><p>Thanks to <a href="https://disqus.com/by/disqus_RgMBmO0DI7/">Robert Barton</a> for pointing out in the comments. I forgot to mention that once the path route set has been created, assign it to the target listener. In my case, this would be the listener with SSL enabled.</p></blockquote><img src="/content/id/2005/screen10.png" class="" title="Create Path Route Set Modal Dialog"><span class="caption">Create Path Route Set Modal Dialog</span><h2 id="Final-Step"><a href="#Final-Step" class="headerlink" title="Final Step"></a>Final Step</h2><p>Login to the server hosting ORDS as the <em>opc</em> user and edit the <em>ORDS Service Script Configuration File</em>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/ords/ords.conf</span><br></pre></td></tr></table></figure><p>Uncomment the line containing:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JAVA_OPTIONS=-Dsecurity.forceHTTPS=<span class="literal">true</span></span><br></pre></td></tr></table></figure><p>Restart the ORDS service:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart ords</span><br></pre></td></tr></table></figure><p>That’s it!</p>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/">Infrastructure</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/oracle-cloud/">Oracle Cloud</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/autonomous/">autonomous</category>
      
      <category domain="https://fuzziebrain.com/tags/database/">database</category>
      
      <category domain="https://fuzziebrain.com/tags/rest/">rest</category>
      
      <category domain="https://fuzziebrain.com/tags/ords/">ords</category>
      
      <category domain="https://fuzziebrain.com/tags/load-balancer/">load balancer</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2005/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Running ORDS Against the Autonomous Database</title>
      <link>https://fuzziebrain.com/content/id/2004/</link>
      <guid>https://fuzziebrain.com/content/id/2004/</guid>
      <pubDate>Wed, 01 Jul 2020 07:49:05 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2004/auto-repair-3691962_1280x720.jpg&quot; class=&quot;&quot; title=&quot;Man repairing the engine of a car&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Man repairing the engine of a car&lt;/span&gt;

&lt;p&gt;The &lt;a href=&quot;https://www.oracle.com/database/what-is-autonomous-database.html&quot;&gt;Oracle Autonomous Database&lt;/a&gt; (ADB) is Oracle’s currernt flagship database product and rightly so! Each instance comes with self-tuning, self-patching and several Oracle Database Options that customer would otherwise have to purchase separate licenses for. Database developers will also be pleased to know that there are a suite of tools at your disposal including &lt;a href=&quot;https://apex.oracle.com/&quot;&gt;Oracle Application Express&lt;/a&gt; (APEX), &lt;a href=&quot;https://www.oracle.com/ca-en/database/technologies/appdev/rest.html&quot;&gt;Oracle REST Data Services&lt;/a&gt; (ORDS) and &lt;a href=&quot;https://www.oracle.com/database/technologies/datawarehouse-bigdata/oml-notebooks.html&quot;&gt;Oracle Machine Learning Notebooks&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The minimum instance you can create will have 1 CPU and 1 TB of storage and with so much features, doesn’t come cheap. Here’s the good news though, Oracle provides &lt;strong&gt;everyone&lt;/strong&gt; two &lt;em&gt;Always Free&lt;/em&gt; ADBs through the &lt;a href=&quot;https://oracle.com/cloud/free&quot;&gt;Oracle Cloud Free Tier&lt;/a&gt; offering. Yes, that’s a great deal for anyone wanting to host a simple web application on the Internet. It is however, not without limits.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2004/auto-repair-3691962_1280x720.jpg" class="" title="Man repairing the engine of a car"><span class="caption">Man repairing the engine of a car</span><p>The <a href="https://www.oracle.com/database/what-is-autonomous-database.html">Oracle Autonomous Database</a> (ADB) is Oracle’s currernt flagship database product and rightly so! Each instance comes with self-tuning, self-patching and several Oracle Database Options that customer would otherwise have to purchase separate licenses for. Database developers will also be pleased to know that there are a suite of tools at your disposal including <a href="https://apex.oracle.com/">Oracle Application Express</a> (APEX), <a href="https://www.oracle.com/ca-en/database/technologies/appdev/rest.html">Oracle REST Data Services</a> (ORDS) and <a href="https://www.oracle.com/database/technologies/datawarehouse-bigdata/oml-notebooks.html">Oracle Machine Learning Notebooks</a>.</p><p>The minimum instance you can create will have 1 CPU and 1 TB of storage and with so much features, doesn’t come cheap. Here’s the good news though, Oracle provides <strong>everyone</strong> two <em>Always Free</em> ADBs through the <a href="https://oracle.com/cloud/free">Oracle Cloud Free Tier</a> offering. Yes, that’s a great deal for anyone wanting to host a simple web application on the Internet. It is however, not without limits.</p> <span id="more"></span><p>Unlike the paid Autonomouos Database, a free instance is limited to 1 CPU with no autoscaling, 8 GB of RAM and 20 GB of storage. It will also be shutdown after 7 days of inactivity, and even terminated if left in that state for too long. Another important limitation is the 20 conncurent database session limit imposed on the instance. These are crucial considerations that you will need to take into account when running production applications on the free instance.</p><p>If you can run your applications successfully within these limits, then ADBs are a great choice for deploying APEX applications for several reasons. The most obvious benefit is that you do not have to be an expert database administrator (DBA) to install, tune and manage the database. These are all handled automatically by Oracle. Upgrading and patching the database and APEX are either performed incrementally in the background or in some cases, initiated by the user with a simple button click.</p><p>Typically, after installing APEX on the database, users will also have to install, configure and deploy ORDS. The software can either run in a standalone mode or deployed on a Java Enterprise Edition (JEE) container. For the ADB though, ORDS comes preinstalled on a separate, robust and scalable hardware infrastructure.</p><p>Not surprisingly, that convenience comes with some restrictions. When the ADB is provisioned, you are assigned a cryptic URL that Oracle assigns and till today (June 30, 2020), <em>vanity URLs</em> are still not supported. That means, you may not assign a domain name to your APEX instance, e.g. <a href="http://example.com/orcl/apex">http://example.com/orcl/apex</a>.</p><p>While you can use a web server and appropriate proxy rules, mask the APEX instance, it does have inherent security risks. I have also found it challenging to get Social Sign-In (OAuth2) working with APEX applications because of how URLs used in the authentication workflow are generated.</p><p>Access to the database and its tools are managed together. It is my understanding that it is not possible to assign different access rules. For example, perhaps we want users to access the APEX instance from the web, but only connect to the database using SQL Developer while on the corporate network. That’s not possible at least for now.</p><p>Thankfully, with the release of ORDS version 19.4.6, it is now possible to install your own instance of ORDS alongside the ADB. You can find the feature description <a href="https://www.oracle.com/tools/ords/ords-relnotes-1946.html">here</a>.</p><blockquote><p>BUG 30957867 - Implement feature to support alternative runtime user (ORDS_PUBLIC_USER)</p></blockquote><p>With a customer-managed ORDS, we can create different entry points to the ADB. This ORDS instance can be placed in an Internet-facing subnet, while access to the ADB can be limited to the new ORDS instance and restricted networks by either using an Access Control List (ACL), or in the case of paid instances, assigned a private endpoint address.</p><p>You can find the full-length instructions from Oracle <a href="https://docs.oracle.com/en/database/oracle/oracle-rest-data-services/19.4/aelig/installing-and-configuring-customer-managed-ords-autonomous-database.html#GUID-24F4D51F-0BAF-4D3B-A714-492ED02D1212">here</a>, on how to set this up. I have however, summarised the steps here, as well as noted the issues I encountered and the solutions.</p><p>These instructions assume that you have the following provisioned:</p><ol><li><strong>Autonomous Database.</strong> Any workload type is fine, and it can be either paid or Always Free.</li><li><strong>Always Free Micro-shape Compute Instance.</strong> The Compute may be of any shape, but the assumption is that it runs Oracle Linux 7.8.</li></ol><blockquote><p>You may attempt to use Oracle Autonomous Linux 7.8, however, many of the packages required are installed using <a href="https://wikipedia.org/wiki/Yum_(software)">YUM</a>, and this prebuilt OS image has limited repositories available. While there’s a workaround, you are advised in the documentation not to mess with the configuration. If you’re interested to know what these are, please check with me privately.</p></blockquote><h2 id="Tasklist-for-ADB"><a href="#Tasklist-for-ADB" class="headerlink" title="Tasklist for ADB"></a>Tasklist for ADB</h2><h3 id="User-Accounts"><a href="#User-Accounts" class="headerlink" title="User Accounts"></a>User Accounts</h3><p>Installing and configuring ORDS usually requires the following accounts:</p><ul><li>APEX_PUBLIC_USER</li><li>APEX_LISTENER</li><li>APEX_REST_PUBLIC_USER</li><li>ORDS_PUBLIC_USER</li></ul><p>The first three are created in a typical APEX installaation. The last one is created when we install ORDS. However, in ADB, these accounts are already created and we do not have the passwords, so clearly, a different approach is needed.</p><p>In this new ORDS installation method, we will use a different database user. <code>ORDS_PUBLIC_USER2</code> is the recommended name, but you don’t have to name it so. You must however, as the <em>admin</em> user, assign the necessary privilege by executing the following commands in the database:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. Create the database user.</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> ords_public_user2 identified <span class="keyword">by</span> &quot;duntellanyone&quot;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. Allow the user to connect to the database.</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">connect</span> <span class="keyword">to</span> ords_public_user2;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. Perform some magic.</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    ords_admin.provision_runtime_role(</span><br><span class="line">        p_user <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;ORDS_PUBLIC_USER2&#x27;</span></span><br><span class="line">        , p_proxy_enabled_schemas <span class="operator">=</span><span class="operator">&gt;</span> <span class="literal">true</span></span><br><span class="line">    );</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="operator">/</span></span><br></pre></td></tr></table></figure><h3 id="Client-Credentials"><a href="#Client-Credentials" class="headerlink" title="Client Credentials"></a>Client Credentials</h3><p>Download the wallet necessary for connecting to the ADB and then upload it securely, to the Compute instance’s <code>/tmp</code> directory.</p><h2 id="Tasklist-for-Compute"><a href="#Tasklist-for-Compute" class="headerlink" title="Tasklist for Compute"></a>Tasklist for Compute</h2><p>As an Oracle Cloud Infrastructure (OCI) customer, you will have access to software like Oracle Instant Client, Java runtimes and ORDS through a private YUM repository. Login to the server as the <code>opc</code> user using SSH and then enable the repository:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum-config-manager --<span class="built_in">enable</span> ol7_oci_included</span><br></pre></td></tr></table></figure><p>Install ORDS using YUM, which will automatically install its dependencies include a supported Java Runtime Engine (JRE):</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y ords</span><br></pre></td></tr></table></figure><p>The package installation also creates and <code>oracle</code> OS user that will be used to configure and run the standalone server. Switch to that user:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su - oracle</span><br></pre></td></tr></table></figure><p>Set the <code>ORDS_CONFIG_DIR</code> variable to the base directory where ORDS configuration files will be stored, and then create the necessary directory structure:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ORDS_CONFIG_DIR=/opt/oracle/ords/config &amp;&amp; <span class="built_in">mkdir</span> -p <span class="variable">$ORDS_CONFIG_DIR</span>/ords/conf</span><br></pre></td></tr></table></figure><p>Set the ORDS configuration directory using the command <code>ords</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ords configdir <span class="variable">$ORDS_CONFIG_DIR</span></span><br></pre></td></tr></table></figure><p>If you are running this on an Always Free Compute instance, chances are, you may encounter this error:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Caused by: java.lang.OutOfMemoryError: Java heap space</span><br></pre></td></tr></table></figure><p>Try setting the <code>JAVA_OPTIONS</code> variable with an appropriate maximum heap size before reattempting to set the ORDS configuration directory. Run the command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_OPTIONS=-Xmx512M</span><br></pre></td></tr></table></figure><p>Next, set the following environment variables:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ORDS_USER=ORDS_PUBLIC_USER2</span><br><span class="line">ORDS_PASSWORD=duntellanyone</span><br><span class="line">SERVICE_NAME=myadb_low</span><br><span class="line">WALLET_BASE64=`<span class="built_in">base64</span> -w 0 /tmp/wallet_MYADB.zip`</span><br></pre></td></tr></table></figure><p>Then run the following script to create the required ORDS configuration files:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF &gt; $ORDS_CONFIG_DIR/ords/conf/apex_pu.xml</span></span><br><span class="line"><span class="string">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;</span></span><br><span class="line"><span class="string">&lt;!DOCTYPE properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;properties&gt;</span></span><br><span class="line"><span class="string">  &lt;entry key=&quot;db.username&quot;&gt;$ORDS_USER&lt;/entry&gt;</span></span><br><span class="line"><span class="string">  &lt;entry key=&quot;db.password&quot;&gt;!$ORDS_PASSWORD&lt;/entry&gt;</span></span><br><span class="line"><span class="string">  &lt;entry key=&quot;db.wallet.zip.service&quot;&gt;$SERVICE_NAME&lt;/entry&gt;</span></span><br><span class="line"><span class="string">  &lt;entry key=&quot;db.wallet.zip&quot;&gt;&lt;![CDATA[$WALLET_BASE64]]&gt;&lt;/entry&gt;</span></span><br><span class="line"><span class="string">&lt;/properties&gt;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF &gt; $ORDS_CONFIG_DIR/ords/defaults.xml</span></span><br><span class="line"><span class="string">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;</span></span><br><span class="line"><span class="string">&lt;!DOCTYPE properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;properties&gt;</span></span><br><span class="line"><span class="string">  &lt;entry key=&quot;plsql.gateway.enabled&quot;&gt;true&lt;/entry&gt;</span></span><br><span class="line"><span class="string">  &lt;entry key=&quot;jdbc.InitialLimit&quot;&gt;5&lt;/entry&gt;</span></span><br><span class="line"><span class="string">  &lt;entry key=&quot;jdbc.MaxLimit&quot;&gt;10&lt;/entry&gt;</span></span><br><span class="line"><span class="string">&lt;/properties&gt;</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p>Once the configuration is done, logout and return to the OS as the <code>opc</code> user. Start the ORDS service using the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start ords</span><br></pre></td></tr></table></figure><p>Make sure you have and OCI Security List rule that has port <code>8080</code> opened and accessible to your client machine. On the Compute instance, you will also need to ensure that the firewall port is opened. Run the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --zone=public --add-port 8080/tcp</span><br></pre></td></tr></table></figure><p>Check that ORDS is accessible from your browser, e.g. <a href="http://example.com:8080/ords/apex">http://example.com:8080/ords/apex</a>. If so, save the OS firewall rule:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --zone=public --add-port 8080/tcp --permanent</span><br></pre></td></tr></table></figure><p>Enable the ORDS service to start automatically on boot:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> ords</span><br></pre></td></tr></table></figure><h3 id="APEX-Image-Files"><a href="#APEX-Image-Files" class="headerlink" title="APEX Image Files"></a>APEX Image Files</h3><p>Login as the <code>oracle</code> user again to  deploy the APEX image files.</p><p>Download the compatible APEX installer and extract the contents of the images directory to <code>/opt/oracle/apex/images/$RELEASE</code>, where the <code>RELEASE</code> must be set to the current release number in full.</p><p>Based on what’s current, set the following values:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RELEASE=20.1.0.00.13</span><br><span class="line">APEX_FILE=/tmp/apex_20.1.zip</span><br></pre></td></tr></table></figure><p>Then execute the following:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /opt/oracle/apex/images/<span class="variable">$RELEASE</span></span><br><span class="line">unzip <span class="variable">$APEX_FILE</span> -d /tmp/</span><br><span class="line"><span class="built_in">cp</span> -R /tmp/apex/images/* /opt/oracle/apex/images/<span class="variable">$RELEASE</span></span><br><span class="line"><span class="built_in">rm</span> -rf /tmp/apex</span><br></pre></td></tr></table></figure><p>After starting ORDS the first time, the standalone properties file should be created. Edit the file <code>/opt/oracle/ords/config/ords/standalone/standalone.properties</code> and add the following two lines:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">standalone.static.context.path=/i</span><br><span class="line">standalone.static.path=/opt/oracle/apex/images</span><br></pre></td></tr></table></figure><p>Finally reboot the server and make sure everything is running as expected.</p><p>That’s it?</p><p>No it’s not. Checkout my <a href="/content/id/2005/">next post</a> on how to setup an Always Free Load Balancer to front the ORDS server you have just created.</p>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/">Infrastructure</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/oracle-cloud/">Oracle Cloud</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/autonomous/">autonomous</category>
      
      <category domain="https://fuzziebrain.com/tags/database/">database</category>
      
      <category domain="https://fuzziebrain.com/tags/rest/">rest</category>
      
      <category domain="https://fuzziebrain.com/tags/ords/">ords</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2004/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Happy 25th Anniversary Java</title>
      <link>https://fuzziebrain.com/content/id/2003/</link>
      <guid>https://fuzziebrain.com/content/id/2003/</guid>
      <pubDate>Wed, 20 May 2020 07:00:00 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2003/duke-live-to-code.jpg&quot; class=&quot;&quot; title=&quot;Java Challenge Coin&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Java Challenge Coin&lt;/span&gt;

&lt;p&gt;My personal journey with programming started more than two decades ago. Back then, the one language that I was very passionate and determined to master was Java. Early in my career, I would find any opportunity to attend a Sun Microsystems event like the Sun Tech Days, where I had the opportunity to learn about the constantly evolving platform that went from desktop, to enterprise and then on mobile devices. I can still remember watching the cool things you could do with Lego Mindstorms and an embedded Java runtime, and the vision that &lt;a href=&quot;https://wikipedia.org/wiki/JXTA&quot;&gt;JXTA&lt;/a&gt; was going to revolutionise the Internet of Things with its state-of-the-art, peer-to-peer technology.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2003/duke-live-to-code.jpg" class="" title="Java Challenge Coin"><span class="caption">Java Challenge Coin</span><p>My personal journey with programming started more than two decades ago. Back then, the one language that I was very passionate and determined to master was Java. Early in my career, I would find any opportunity to attend a Sun Microsystems event like the Sun Tech Days, where I had the opportunity to learn about the constantly evolving platform that went from desktop, to enterprise and then on mobile devices. I can still remember watching the cool things you could do with Lego Mindstorms and an embedded Java runtime, and the vision that <a href="https://wikipedia.org/wiki/JXTA">JXTA</a> was going to revolutionise the Internet of Things with its state-of-the-art, peer-to-peer technology.</p><span id="more"></span><p>More importantly though, I was inspired and even as a noob, I got involved in the community through the Singapore Java Users Group. While there have been many incarnations of JUGs in Singapore, SJUG was the group I grew up with. I am grateful to have been involved and the opportunity to get to know luminaries like Dennis Lee (a.k.a. smallfry), <a href="https://twitter.com/chewboonhong">Chew Boon Hong</a> and <a href="https://twitter.com/sausheong">Chang Sau Sheong</a>.</p><p>Then there were the Sun Evangelists who travelled to the lesser known place where I spent my growing years. As I watched them on stage, I admired, and perhaps envied them. And it became my dream that some day, I too could be travelling around talking about what I am passionate about. Always being at the cutting edge of technology, trying out cool new toys and then proudly showing everyone else what you can do it. These were my notable few:</p><ul><li>Sang Shin a.k.a. <a href="https://twitter.com/javapassion">javapassion</a></li><li><a href="https://www.linkedin.com/in/chukmunnlee">Chuk-Mun Lee</a></li><li><a href="https://twitter.com/speakjava">Simon Ritter</a></li><li><a href="https://twitter.com/ragss">Rags Srinivas</a></li></ul><p>I never got to be a Sun Evangelist, but I did find a similar path and earned my spades!</p><p>As we commemorate the 25th anniversary of a technology that helped shape the Internet, I wanted to honour the people who inspired me and were in many ways, a role model to me. I will attempt to reach out to you and hopefully be able to send you a Java Challenge Coin as a little token of appreciation.</p><p>From the bottom of my heart, <strong>THANK YOU</strong> for sharing your knowledge and passion.</p>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/community/">Community</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/community/java/">Java</category>
      
      
      <category domain="https://fuzziebrain.com/tags/community/">community</category>
      
      <category domain="https://fuzziebrain.com/tags/challenge-coin/">challenge coin</category>
      
      <category domain="https://fuzziebrain.com/tags/java/">java</category>
      
      <category domain="https://fuzziebrain.com/tags/award/">award</category>
      
      <category domain="https://fuzziebrain.com/tags/appreciation/">appreciation</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2003/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>A Call to Aid</title>
      <link>https://fuzziebrain.com/content/id/2002/</link>
      <guid>https://fuzziebrain.com/content/id/2002/</guid>
      <pubDate>Sat, 21 Mar 2020 17:19:35 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2002/marching.jpg&quot; class=&quot;&quot; title=&quot;Singapore National Day Parade - March Past&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Singapore National Day Parade - March Past&lt;/span&gt;

&lt;p&gt;Every Singaporean Son grows up to respond to a codeword alongside an image of a soldier on guard.&lt;/p&gt;
&lt;div class=&quot;twitter-wrapper&quot;&gt;&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;a href=&quot;https://twitter.com/mindefsg/status/1198090190390038528&quot;&gt;&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;script async defer src=&quot;https://platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;p&gt;When your codeword is flashed on the screen, you wrap up whatever you are doing, head home, pack, bid your goodbyes and then report to camp. Hence, when I heard this &lt;a href=&quot;https://joelkallman.blogspot.com/2020/03/seek-where-you-can-help-now.html&quot;&gt;call to help&lt;/a&gt;, instinct kicked in and I had to respond.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2002/marching.jpg" class="" title="Singapore National Day Parade - March Past"><span class="caption">Singapore National Day Parade - March Past</span><p>Every Singaporean Son grows up to respond to a codeword alongside an image of a soldier on guard.</p><div class="twitter-wrapper"><blockquote class="twitter-tweet"><a href="https://twitter.com/mindefsg/status/1198090190390038528"></a></blockquote></div><script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>When your codeword is flashed on the screen, you wrap up whatever you are doing, head home, pack, bid your goodbyes and then report to camp. Hence, when I heard this <a href="https://joelkallman.blogspot.com/2020/03/seek-where-you-can-help-now.html">call to help</a>, instinct kicked in and I had to respond.</p><span id="more"></span><p>I am blessed to have trained, worked and experienced first-hand what <a href="https://apex.oracle.com/">Oracle Application Express</a> (APEX) can do for organisations, especially in times of urgency and need. My own journey with APEX began with a weekend project that saved our human resource specialist hours of work collecting <strong>54</strong> spreadsheets weekly for <strong>two</strong> months; each time tallying up step counts and reporting the competition standings to the group.</p><p>Today, I see many APEX developers sharing on social media, different ways they have used the technology to help their organisations navigate these challenging times. Others have used their skills and knowledge to help support operational activities at civic organisations and local governments. If you are one of them, please feel free to share your story by commenting below.</p><p>If you are looking to build rapid solutions with APEX, then here are useful resources that you might find useful.</p><h2 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h2><p>Organisations already licensed to run an Oracle Database, good news, APEX can be installed on your database <em>free of charge</em>. If you do not already own one, then here are some options to consider.</p><h3 id="Option-A"><a href="#Option-A" class="headerlink" title="Option A"></a>Option A</h3><p>APEX available out-of-the-box on the <em>Always Free</em> Oracle Autonomous Database (ADB) is the best way to get started. Begin by <a href="http://oracle.com/cloud/free">signing up</a> for an Oracle Cloud Free Tier.</p><h3 id="Option-B"><a href="#Option-B" class="headerlink" title="Option B"></a>Option B</h3><p>If your organisation is staffed with IT staff familiar with <a href="https://docker.com/">Docker</a> or <a href="http://vagrantup.com/">Vagrant</a>, there are many projects that will help stand up an APEX with a <em>free</em> <a href="http://oracle.com/xe">Oracle Database 18c Express Edition</a>. Here are some examples:</p><ul><li><a href="https://github.com/oracle/docker-images">docker-apex-stack</a></li><li><a href="https://github.com/oraclebase/vagrant">vagrant</a> and <a href="https://github.com/oraclebase/dockerfiles">dockerfiles</a> by <a href="https://twitter.com/oraclebase">Tim Hall</a></li><li><a href="https://github.com/Dani3lSun/docker-db-apex-dev">docker-db-apex-dev</a> by <a href="https://twitter.com/Dani3lSun">Daniel Hochleitner</a></li></ul><h3 id="Option-C"><a href="#Option-C" class="headerlink" title="Option C"></a>Option C</h3><p>Last but not least, you may <a href="https://apex.oracle.com/pls/apex/f?p=4700&p_lang=en">sign up</a> for a <em>free</em> workspace on <a href="https://apex.oracle.com/">apex.oracle.com</a>. While this is the easiest path to obtain an APEX development environment, it is not for production use. It also does not provide you direct access to the database that is sometimes needed in a software development workflow.</p><h2 id="Learning"><a href="#Learning" class="headerlink" title="Learning"></a>Learning</h2><p>There are a wealth of videos that demonstrate the varioous features of APEX. I strongly recommend the APEX development team’s YouTube <a href="https://www.youtube.com/channel/UCEpIXFjcQIztReQNLymvYrQ">channel</a> for starters.</p><p>The open sourced APEX <a href="https://blogs.oracle.com/apex/oracle-apex-192-free-curriculum-now-available">curriculum</a> is also available for those looking for a more structured training experience. Direct links to access these resources are as follows:</p><ul><li><a href="http://www.oracle.com/technetwork/developer-tools/apex/learnmore/apex-curriculum-4490003.html">Curriculum materials</a></li><li><a href="https://github.com/oracle/learning-library/tree/master/workshops/apex-en">Hands on labs on Oracle Learning Library</a></li></ul><p>For getting started with the <em>Always Free</em> ADB and APEX, I highly suggest reading <a href="https://twitter.com/joelkallman">Joel Kallman’s</a> <a href="https://blogs.oracle.com/apex/the-quick-guide-for-getting-started-with-apex-on-autonomous-database-serverless">blog post</a>, or follow <a href="https://twitter.com/dgielis">Dimitri Gielis’</a> <a href="http://dgielis.blogspot.com/2019/09/best-and-cheapest-oracle-apex-hosting.html">series</a> for a more comprehensive setup.</p><h2 id="The-Pledge"><a href="#The-Pledge" class="headerlink" title="The Pledge"></a>The Pledge</h2><p>In response to Joel’s call for APEX developers to step up, I am making myself available, <em>pro bono</em>, to the following organisations in Metro Vancouver, British Columbia, and East Asia:</p><ul><li>Academia and research</li><li>Municipal governments; and</li><li>Small businesses</li></ul><p>If you need a <em>remote</em> hand in getting started, e.g. install APEX, “applicationify” a spreadsheet, or just needed a conversation to help make a decision, please feel free to contact me at the following email address:</p><img src="/content/id/2002/email.png" class=""><h2 id="Closing"><a href="#Closing" class="headerlink" title="Closing"></a>Closing</h2><p>When there’s a need, the APEX community always responds. Looking back to 2018, it was amazing how a small team of Oracle tech professionals were able to band together quickly to help folks affected by <em>Hurrican Florence</em> get vital information on road closures and where to get gas.</p><div class="twitter-wrapper"><blockquote class="twitter-tweet"><a href="https://twitter.com/NevianaZhgaba/status/1043934483479695360"></a></blockquote></div><script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>Today, I am proud to see not only individual APEX developers stepping up, but businesses as well. Here’s a list of examples I have come across so far:</p><ul><li><a href="https://iadvise.eu/">iAdvise</a> in the Netherlands - <a href="https://www.linkedin.com/pulse/iadvise-biedt-hulp-strijd-tegen-covid-19-jonathan-van-vianen-/">https://www.linkedin.com/pulse/iadvise-biedt-hulp-strijd-tegen-covid-19-jonathan-van-vianen-/</a></li><li><a href="https://datacons.co.uk/">Database Consulting</a> in the United Kingdom - <a href="https://apex.oracle.com/pls/apex/dataconsulting/r/gielda_pomocy">https://apex.oracle.com/pls/apex/dataconsulting/r/gielda_pomocy</a></li></ul><p>Last but not least, I want to give a special shoutout to my <a href="https://insum.ca/">Insum</a> family. You can read more about Insum’s COVID-19 response <a href="https://insum.ca/covid19">here</a>. If you require a more involved response including infrastructure resources support, please contact the company’s Rapid Response Coordinator at <a href="tel:+18668871670">1-866-887-1670</a> <em>ext.</em> 250 or email <a href="mailto:covid19@insum.ca">covid19@insum.ca</a>.</p><p>We will get there. Stay strong, remain healthy and be socially responsible.</p><p>世界加油！</p><blockquote><p><u>Photo Credits</u></p><p>Photo by <a href="https://www.flickr.com/photos/beggs/">Brian Jeffery Beggerly</a><br>License: <a href="https://creativecommons.org/licenses/by/2.0/">CC BY 2.0</a></p><p>Image was cropped. The original immage can be found <a href="https://www.flickr.com/photos/beggs/6080505442/">here</a></p></blockquote>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/community/">Community</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/community/oracle-application-express/">Oracle Application Express</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/community/">community</category>
      
      <category domain="https://fuzziebrain.com/tags/crisis/">crisis</category>
      
      <category domain="https://fuzziebrain.com/tags/covid-19/">covid-19</category>
      
      <category domain="https://fuzziebrain.com/tags/coronavirus/">coronavirus</category>
      
      <category domain="https://fuzziebrain.com/tags/pandemic/">pandemic</category>
      
      <category domain="https://fuzziebrain.com/tags/support/">support</category>
      
      <category domain="https://fuzziebrain.com/tags/technology/">technology</category>
      
      <category domain="https://fuzziebrain.com/tags/techgivesback/">techgivesback</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2002/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>APEX Challenge Coin 2020 Edition</title>
      <link>https://fuzziebrain.com/content/id/2001/</link>
      <guid>https://fuzziebrain.com/content/id/2001/</guid>
      <pubDate>Thu, 23 Jan 2020 03:21:23 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/2001/new-years-day-4649609_1920.jpg&quot; class=&quot;&quot; title=&quot;Happy New Year!&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Happy New Year!&lt;/span&gt;

&lt;p&gt;Probably too late for New Year greetings, but not if you also celebrate the Lunar New Year that’s coming really soon. For readers who, like me, celebrate this festival, I’d like to take the opportunity to wish you 新年快乐，万事如意!&lt;/p&gt;
&lt;p&gt;It’s now been almost a year since the &lt;a href=&quot;/content/id/1727/&quot;&gt;APEX Challenge Coin&lt;/a&gt; was released, and I must say, it’s made 2019 a year to remember!&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/2001/new-years-day-4649609_1920.jpg" class="" title="Happy New Year!"><span class="caption">Happy New Year!</span><p>Probably too late for New Year greetings, but not if you also celebrate the Lunar New Year that’s coming really soon. For readers who, like me, celebrate this festival, I’d like to take the opportunity to wish you 新年快乐，万事如意!</p><p>It’s now been almost a year since the <a href="/content/id/1727/">APEX Challenge Coin</a> was released, and I must say, it’s made 2019 a year to remember!</p><span id="more"></span><p>Many people have thanked me for initiating this project, but in my heart, I feel it is everyone who participated - from the givers to the receivers - that I should thank. The project outcome was more than I could imagine. Words aren’t even enough to describe the feeling of knowing how much community members were touching each others hearts with simple thoughts and gestures. This world is a better place because of all of you, so thank you!</p><p>I had intended to end the project when the last coin was given out in December 2019. However, when news broke that <a href="https://apex.oracle.com/">Oracle Application Express (APEX)</a> made the Gartner’s Peer Insights <a href="https://www.gartner.com/reviews/customers-choice/enterprise-low-code-application-platform">Customers’ Choice for Enterprise Low-Code Application Platforms</a>, I knew at the moment, that there are and will be more APEX developers to show our appreciation too. I am thereby announcing the <strong>launch of the 2020 Edition of the APEX Challenge Coin</strong>!</p><p>While the rules on how someone can earn a coin have not changed, there are a few small tweaks to how this year’s coins will be distributed. Firstly, to help me keep my sanity, I am moving away from spreadsheets and will be using APEX to help me maintain records of whom these coins are going to. I’ve got to eat my own dog food eh?</p><p>Then there’s the request/nomination process. Rather than rely solely on Twitter for accepting requests, this year, I have decided that the process should also be “APEX’ified”. If you have someone in mind that you’d like to show your appreciation to, please go to this <a href="https://apeks.app/sponsor-a-coin">website</a> to submit your nomination.</p><p>Many have wondered about how the coins are serialised. I will make no statements to either confirm or deny those allegations, but suffice to say, the answer should be very obvious to a programmer. While I had issued the coins pretty much randomly last year, there were exceptions. For example, when I learned that the number “42” would actually help <a href="https://twitter.com/shakeeb">Shakeeb Rahmen</a> find the meaning of life, I had no choice but to put it into the reserve pile. This year, I have decided to let sponsors select the number(s) they’d like to gift and you can do so when submitting a nomination. Do note though that the coin’s serial number is a primary key, duh!</p><p>There were about 90 coins distributed last year, and it will likely be the same number this year. I had imposed a limit on the number of coins a person could sponsor, and that was to help ensure a fair distribution of coins. That practice will continue going into 2020. What does that mean for folks who sponsored coins last year? For every coin that you had sponsored but have yet to submit a name, then that coin counts against your 2020 limit. For example, if you had sponsored three coins and submitted two names (and hopefully pictures) of the happy owners, then you’ll have the opportunity to sponsor four this year. Submit that last name from 2019 and you’ll fully restore your “credits” with me.</p><p>Last but not least, I am planning to add a feature on the Sponsor a Coin website to map the global distribution of the coins. This was requested by <a href="https://twitter.com/OliverLemm">Oliver Lemm</a> quite a while ago and I hope to have it done in the coming months. Stay tune for that, but meanwhile, think about that colleague, friend, customer or even family member, whom has made an impact on you or your company through their APEX development skills. Consider sponsoring them a coin. Believe me, the experience and result is magical!</p>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/community/">Community</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/community/oracle-application-express/">Oracle Application Express</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/challenge-coin/">challenge coin</category>
      
      <category domain="https://fuzziebrain.com/tags/gratitude/">gratitude</category>
      
      <category domain="https://fuzziebrain.com/tags/memorabilia/">memorabilia</category>
      
      
      <comments>https://fuzziebrain.com/content/id/2001/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Watch Your Weight</title>
      <link>https://fuzziebrain.com/content/id/1922/</link>
      <guid>https://fuzziebrain.com/content/id/1922/</guid>
      <pubDate>Sat, 12 Oct 2019 07:00:00 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/1922/horizontal-930716_1280x720.jpg&quot; class=&quot;&quot; title=&quot;Horizontal Old Weights&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Horizontal Old Weights&lt;/span&gt;

&lt;p&gt;A reader left an interesting comment/question in my previous post on &lt;a href=&quot;/content/id/1920/&quot;&gt;Making the Move to the Autonomous Database&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“Would You explain how can i check my on-premise DB to satisfy ADB size limitation 20G? What is the size 20G of?”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is an excellent question to ask before embarking on any &lt;a href=&quot;https://www.oracle.com/database/autonomous-database.html&quot;&gt;Autonomous Database&lt;/a&gt; (ADB) migration plans and so I dug a bit deeper. &lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/1922/horizontal-930716_1280x720.jpg" class="" title="Horizontal Old Weights"><span class="caption">Horizontal Old Weights</span><p>A reader left an interesting comment/question in my previous post on <a href="/content/id/1920/">Making the Move to the Autonomous Database</a>:</p><blockquote><p>“Would You explain how can i check my on-premise DB to satisfy ADB size limitation 20G? What is the size 20G of?”</p></blockquote><p>This is an excellent question to ask before embarking on any <a href="https://www.oracle.com/database/autonomous-database.html">Autonomous Database</a> (ADB) migration plans and so I dug a bit deeper. </p><span id="more"></span><p>Folks moving applications and data from an <a href="https://oracle.com/xe">Oracle Database Express Edition</a> (XE) instance, version 11gR2 or 18c, will probably not have problems fitting into a Free Tier Autonomous Database (ADB) since database sizes are capped at 11 and 12 GB respectively. You are allowed a maximum of 20 GB user for each Free Tier ADB provisioned. </p><p>To estimate the data size to be migrated, execute the following query as <em>SYS</em> on the source database:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  <span class="keyword">case</span> <span class="keyword">grouping</span>(owner) <span class="keyword">when</span> <span class="number">1</span> <span class="keyword">then</span> <span class="string">&#x27;Total&#x27;</span> <span class="keyword">else</span> owner <span class="keyword">end</span> <span class="keyword">as</span> owner</span><br><span class="line">  , round(<span class="built_in">sum</span>(bytes) <span class="operator">/</span> <span class="built_in">power</span>(<span class="number">2</span>,<span class="number">10</span>), <span class="number">2</span>) <span class="keyword">as</span> space_usage_kb</span><br><span class="line">  , round(<span class="built_in">sum</span>(bytes) <span class="operator">/</span> <span class="built_in">power</span>(<span class="number">2</span>,<span class="number">20</span>), <span class="number">2</span>) <span class="keyword">as</span> space_usage_mb</span><br><span class="line">  , round(<span class="built_in">sum</span>(bytes) <span class="operator">/</span> <span class="built_in">power</span>(<span class="number">2</span>,<span class="number">30</span>), <span class="number">2</span>) <span class="keyword">as</span> space_usage_gb</span><br><span class="line"><span class="keyword">from</span> dba_segments</span><br><span class="line"><span class="keyword">where</span> owner <span class="keyword">in</span> (<span class="string">&#x27;CONTOSO_APP&#x27;</span>, <span class="string">&#x27;CONTOSO_WEB&#x27;</span>, <span class="string">&#x27;LOGGER&#x27;</span>)</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">rollup</span>(owner);</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">OWNER                SPACE_USAGE_KB SPACE_USAGE_MB SPACE_USAGE_GB</span><br><span class="line">-------------------- -------------- -------------- --------------</span><br><span class="line">CONTOSO_APP               32,896.00          32.13           0.03</span><br><span class="line">CONTOSO_WEB                6,720.00           6.56           0.01</span><br><span class="line">LOGGER                     1,280.00           1.25           0.00</span><br><span class="line">Total                     40,896.00          39.94           0.04</span><br></pre></td></tr></table></figure><p>That’s great! My toy application only requires about 40 MB of storage, but after importing the data into the ADB, I get this on the Service Console?</p><img src="/content/id/1922/adb-service-console-overview.png" class="" title="ADB Service Console"><span class="caption">ADB Service Console</span><p>As it turns out, the total amount of storage used includes quite a few more components than anticipated. The following query should yield values that tally with the amount displayed on the Service Console.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  <span class="keyword">case</span> <span class="keyword">grouping</span>(tablespace_name) <span class="keyword">when</span> <span class="number">1</span> <span class="keyword">then</span> <span class="string">&#x27;Total&#x27;</span> <span class="keyword">else</span> tablespace_name <span class="keyword">end</span> <span class="keyword">as</span> tablespace_name</span><br><span class="line">  , round(<span class="built_in">sum</span>(bytes) <span class="operator">/</span> <span class="built_in">power</span>(<span class="number">2</span>, <span class="number">30</span>), <span class="number">2</span>) <span class="keyword">as</span> total_size_gb</span><br><span class="line">  , round(<span class="built_in">sum</span>(maxbytes) <span class="operator">/</span> <span class="built_in">power</span>(<span class="number">2</span>, <span class="number">30</span>), <span class="number">2</span>) <span class="keyword">as</span> max_size_gb</span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">  <span class="keyword">select</span> tablespace_name, bytes, maxbytes</span><br><span class="line">  <span class="keyword">from</span> dba_data_files</span><br><span class="line">  <span class="keyword">where</span> tablespace_name <span class="operator">!=</span> <span class="string">&#x27;SAMPLESCHEMA&#x27;</span></span><br><span class="line">  <span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line">  <span class="keyword">select</span> <span class="string">&#x27;TEMP&#x27;</span> <span class="keyword">as</span> tablespace_name, bytes, maxbytes</span><br><span class="line">  <span class="keyword">from</span> dba_temp_files</span><br><span class="line">)</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">rollup</span>(tablespace_name);</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">TABLESPACE_NAME                TOTAL_SIZE_GB   MAX_SIZE_GB</span><br><span class="line">------------------------------ ------------- -------------</span><br><span class="line">DATA                                    0.10     32,768.00</span><br><span class="line">DBFS_DATA                               0.10     32,768.00</span><br><span class="line">SYSAUX                                  2.07     32,768.00</span><br><span class="line">SYSTEM                                  0.74     32,768.00</span><br><span class="line">TEMP                                    2.03          6.00</span><br><span class="line">UNDOTBS1                                0.42          1.00</span><br><span class="line">UNDO_2                                  0.42          1.00</span><br><span class="line">Total                                   5.89    131,080.00</span><br><span class="line"></span><br><span class="line">8 rows selected.</span><br></pre></td></tr></table></figure><p>Based on the above output, it is clear that a more accurate measure of the ADB’s storage footprint requires us to consider other “non-application” tablespaces, e.g. <code>SYSTEM</code>, <code>SYSAUX</code>, <code>TEMP</code>, <code>UNDO</code> and more! </p><p>The tablespace <code>DATA</code> is the default tablespace for schema users (think <code>USERS</code> tablespace) and is where your application data really lives. Given that <code>TEMP</code>, <code>UNDOTBS1</code> and perhaps <code>UNDO_2</code> have a max of 8 GB, it looks like application data really needs to remain within the confines of 12 GB. And even so, more needs to be understood about how the other tablespaces might grow as the database is used, before we can fully appreciate how much room we have to maneuver.</p><h2 id="Oracle-Advanced-Compression"><a href="#Oracle-Advanced-Compression" class="headerlink" title="Oracle Advanced Compression"></a>Oracle Advanced Compression</h2><p>If you have used <a href="https://www.oracle.com/database/technologies/advanced-compression.html">Oracle Advanced Compression</a>, <a href="https://docs.oracle.com/en/database/oracle/oracle-database/18/xelic/licensing-information.html#GUID-3BD43E8F-53C3-42F0-BBBD-B743FD41F951__VLDBDATAWAREHOUSINGANDBUSINESSINTEL-6DD7F365">available</a> in 18c XE, then your tables should remain compressed. While an Automonous Transaction Processing (ATP) database does not compress tables by default, it will do so if specified. For Autonomous Data Warehouse (ADW), compression is enabled by default.</p><blockquote><p><strong>NOTE:</strong></p><p>If you wanted to get some data to try out the following steps, use the <code>CUSTOMERS</code> table in schema <code>SH</code> that should be available to all ADBs:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> customers_sample <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> SH.customers <span class="keyword">where</span> rownum <span class="operator">&lt;</span> <span class="number">10000</span>;</span><br></pre></td></tr></table></figure></blockquote><p>First, check if the table already has compression enabled. Execute this query as the schema user:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> table_name, compression, compress_for</span><br><span class="line"><span class="keyword">from</span> user_tables</span><br><span class="line"><span class="keyword">where</span> table_name <span class="operator">=</span> <span class="string">&#x27;CUSTOMERS_SAMPLE&#x27;</span>;</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">TABLE_NAME                     COMPRESS COMPRESS_FOR                  </span><br><span class="line">------------------------------ -------- ------------------------------</span><br><span class="line">CUSTOMERS_SAMPLE               DISABLED</span><br></pre></td></tr></table></figure><p>Next, estimate the amount of storage used by this table:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  segment_name</span><br><span class="line">  , bytes <span class="operator">/</span> <span class="built_in">power</span>(<span class="number">2</span>, <span class="number">10</span>) <span class="keyword">as</span> size_kb</span><br><span class="line">  , bytes <span class="operator">/</span> <span class="built_in">power</span>(<span class="number">2</span>, <span class="number">20</span>) <span class="keyword">as</span> size_mb</span><br><span class="line">  , bytes <span class="operator">/</span> <span class="built_in">power</span>(<span class="number">2</span>, <span class="number">30</span>) <span class="keyword">as</span> size_gb</span><br><span class="line"><span class="keyword">from</span> user_segments</span><br><span class="line"><span class="keyword">where</span> <span class="number">1</span> <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">and</span> segment_name <span class="operator">=</span> <span class="string">&#x27;CUSTOMERS_SAMPLE&#x27;</span> </span><br><span class="line">  <span class="keyword">and</span> segment_type <span class="operator">=</span> <span class="string">&#x27;TABLE&#x27;</span></span><br><span class="line">;</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SEGMENT_NAME                        SIZE_KB      SIZE_MB      SIZE_GB</span><br><span class="line">------------------------------ ------------ ------------ ------------</span><br><span class="line">CUSTOMERS_SAMPLE                    3072.00         3.00         0.00</span><br></pre></td></tr></table></figure><p>The <code>DBMS_COMPRESS.GET_COMPRESSION_RATIO</code> is a built-in proceedure that could be used to estimate the amount of space savings. The code below checks the compression ratio for table <code>CUSTOMERS_SAMPLE</code> with Advanced Row Compression.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">declare</span><br><span class="line">  c_schema_name constant varchar2(20) := &#x27;CONTOSO_WEB&#x27;;</span><br><span class="line">  c_object_name constant varchar2(20) := &#x27;CUSTOMERS_SAMPLE&#x27;;</span><br><span class="line"></span><br><span class="line">  l_blkcnt_cmp pls_integer;</span><br><span class="line">  l_blkcnt_uncmp pls_integer;</span><br><span class="line">  l_row_cmp pls_integer;</span><br><span class="line">  l_row_uncmp pls_integer;</span><br><span class="line">  l_cmp_ratio number;</span><br><span class="line">  l_comptype_str varchar2(32767);</span><br><span class="line">begin</span><br><span class="line">  dbms_compression.get_compression_ratio(</span><br><span class="line">    scratchtbsname =&gt; &#x27;DATA&#x27;</span><br><span class="line">    , ownname =&gt; c_schema_name</span><br><span class="line">    , objname =&gt; c_object_name</span><br><span class="line">    , subobjname =&gt; null</span><br><span class="line">    , comptype =&gt; dbms_compression.comp_advanced</span><br><span class="line">    , blkcnt_cmp =&gt; l_blkcnt_cmp</span><br><span class="line">    , blkcnt_uncmp =&gt; l_blkcnt_uncmp</span><br><span class="line">    , row_cmp =&gt; l_row_cmp</span><br><span class="line">    , row_uncmp =&gt; l_row_uncmp</span><br><span class="line">    , cmp_ratio =&gt; l_cmp_ratio</span><br><span class="line">    , comptype_str =&gt; l_comptype_str</span><br><span class="line">  );</span><br><span class="line">  </span><br><span class="line">  dbms_output.put_line(&#x27;Compression ratio = &#x27; || l_cmp_ratio);</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></table></figure><p>Now add compression to the <code>CUSTOMERS_SAMPLE</code> table:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> customers_sample </span><br><span class="line">move compress <span class="keyword">for</span> <span class="keyword">all</span> operations;</span><br></pre></td></tr></table></figure><p>The <code>MOVE</code> clause allows you to encrypt existing data in the table, but bear in mind that there is sufficient amount of space for the transition. Don’t perform this operation if you are already running out of space!</p><p>Check the table properties and storage sizes again:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">select</span> table_name, compression, compress_for</span><br><span class="line">  <span class="number">2</span>  <span class="keyword">from</span> user_tables</span><br><span class="line">  <span class="number">3</span>  <span class="keyword">where</span> table_name <span class="operator">=</span> <span class="string">&#x27;CUSTOMERS_SAMPLE&#x27;</span>;</span><br><span class="line"></span><br><span class="line">TABLE_NAME                     COMPRESS COMPRESS_FOR                  </span><br><span class="line"><span class="comment">------------------------------ -------- ------------------------------</span></span><br><span class="line">CUSTOMERS_SAMPLE               ENABLED  ADVANCED</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">select</span> </span><br><span class="line">  <span class="number">2</span>    segment_name</span><br><span class="line">  <span class="number">3</span>    , bytes <span class="operator">/</span> <span class="built_in">power</span>(<span class="number">2</span>, <span class="number">10</span>) <span class="keyword">as</span> size_kb</span><br><span class="line">  <span class="number">4</span>    , bytes <span class="operator">/</span> <span class="built_in">power</span>(<span class="number">2</span>, <span class="number">20</span>) <span class="keyword">as</span> size_mb</span><br><span class="line">  <span class="number">5</span>    , bytes <span class="operator">/</span> <span class="built_in">power</span>(<span class="number">2</span>, <span class="number">30</span>) <span class="keyword">as</span> size_gb</span><br><span class="line">  <span class="number">6</span>  <span class="keyword">from</span> user_segments</span><br><span class="line">  <span class="number">7</span>  <span class="keyword">where</span> <span class="number">1</span> <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">  <span class="number">8</span>    <span class="keyword">and</span> segment_name <span class="operator">=</span> <span class="string">&#x27;CUSTOMERS_SAMPLE&#x27;</span> </span><br><span class="line">  <span class="number">9</span><span class="operator">*</span>   <span class="keyword">and</span> segment_type <span class="operator">=</span> <span class="string">&#x27;TABLE&#x27;</span>;</span><br><span class="line"></span><br><span class="line">SEGMENT_NAME                        SIZE_KB      SIZE_MB      SIZE_GB</span><br><span class="line"><span class="comment">------------------------------ ------------ ------------ ------------</span></span><br><span class="line">CUSTOMERS_SAMPLE                    <span class="number">2048.00</span>         <span class="number">2.00</span>         <span class="number">0.00</span></span><br></pre></td></tr></table></figure><p>Looks like I didn’t achieve the amount of compression that was anticipated, but something is definitely better than nothing. There are other compression options I could use to achieve higher amounts of space savings, but deciding on the right approach is obviously more involved. The examples here are meant to demonstrate what is possible with ADBs.</p>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/">Infrastructure</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/oracle-cloud/">Oracle Cloud</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/cloud/">cloud</category>
      
      <category domain="https://fuzziebrain.com/tags/oci/">oci</category>
      
      <category domain="https://fuzziebrain.com/tags/oracle/">oracle</category>
      
      <category domain="https://fuzziebrain.com/tags/autonomous/">autonomous</category>
      
      <category domain="https://fuzziebrain.com/tags/alwaysfree/">alwaysfree</category>
      
      <category domain="https://fuzziebrain.com/tags/limits/">limits</category>
      
      
      <comments>https://fuzziebrain.com/content/id/1922/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>OGB Appreciation Day: Challenge Coin Sponsors</title>
      <link>https://fuzziebrain.com/content/id/1921/</link>
      <guid>https://fuzziebrain.com/content/id/1921/</guid>
      <pubDate>Thu, 10 Oct 2019 07:34:39 GMT</pubDate>
      
        
        
      <description>&lt;img src=&quot;/content/id/1921/baby-2659226_1280x719.jpg&quot; class=&quot;&quot; title=&quot;Happy toddler clapping&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Happy toddler clapping&lt;/</description>
        
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/1921/baby-2659226_1280x719.jpg" class="" title="Happy toddler clapping"><span class="caption">Happy toddler clapping</span><p>My <a href="https://twitter.com/hashtag/ThanksOGB">#ThanksOGB</a> will be short and sweet!</p><p>Most in the community probably don’t know, but I am a sucker for military stories and even more crazy about hard-to-find memorabilia. Earlier this year, I took a gamble and started a little <a href="/content/id/1727">social experiment</a> and minted a small batch of APEX Challenge Coins.</p><p>The coins demonstrated our deep appreciation for APEX developers who have impacted our lives. Through the process of distributing them worldwide, I was blessed to have basked in the warmth of givers and the happiness of receivers. Words cannot describe the emotions and joy I felt each time someone opens his or her little mail packet to find a gift of gratitude.</p><p>So… for my #ThanksOGB appreciation post this year, I wanted to express again, my heartfelt gratitude to all APEX Challenge Coin sponsors for making this project a success. Thank you for supporting APEX developers!</p>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/others/">Others</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/challenge-coin/">challenge coin</category>
      
      <category domain="https://fuzziebrain.com/tags/oci/">oci</category>
      
      <category domain="https://fuzziebrain.com/tags/oracleiaas/">oracleiaas</category>
      
      <category domain="https://fuzziebrain.com/tags/administrators/">administrators</category>
      
      <category domain="https://fuzziebrain.com/tags/thanksogb/">ThanksOGB</category>
      
      
      <comments>https://fuzziebrain.com/content/id/1921/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Making the Move to the Autonomous Database</title>
      <link>https://fuzziebrain.com/content/id/1920/</link>
      <guid>https://fuzziebrain.com/content/id/1920/</guid>
      <pubDate>Fri, 27 Sep 2019 01:29:30 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/1920/boxes-2719166_1280x720.jpg&quot; class=&quot;&quot; title=&quot;Packing boxes&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Packing boxes&lt;/span&gt;

&lt;p&gt;In my &lt;a href=&quot;/content/id/1919&quot;&gt;previous post&lt;/a&gt;, I mentioned that I have created my &lt;a href=&quot;https://oracle.com/cloud/free/&quot;&gt;Oracle Cloud Free Tier&lt;/a&gt; account and provisioned an &lt;a href=&quot;https://www.oracle.com/database/what-is-autonomous-database.html&quot;&gt;Autonomous Database&lt;/a&gt; (ADB). Now, I’m ready to move my existing &lt;a href=&quot;https://apex.oracle.com/&quot;&gt;Oracle Application Express&lt;/a&gt; (APEX) to this new environment. Next, I’ll describe the steps I took to move (1) workspace, (2) application and (3) data, from the old to new database.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/1920/boxes-2719166_1280x720.jpg" class="" title="Packing boxes"><span class="caption">Packing boxes</span><p>In my <a href="/content/id/1919">previous post</a>, I mentioned that I have created my <a href="https://oracle.com/cloud/free/">Oracle Cloud Free Tier</a> account and provisioned an <a href="https://www.oracle.com/database/what-is-autonomous-database.html">Autonomous Database</a> (ADB). Now, I’m ready to move my existing <a href="https://apex.oracle.com/">Oracle Application Express</a> (APEX) to this new environment. Next, I’ll describe the steps I took to move (1) workspace, (2) application and (3) data, from the old to new database.</p><span id="more"></span><h2 id="Scope"><a href="#Scope" class="headerlink" title="Scope"></a>Scope</h2><p>To better illustrate the move process, let’s create some fictious information about what I am about to move.</p><table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>Source server hostname</td><td>dev.contoso.com</td></tr><tr><td>Source database name</td><td>XE</td></tr><tr><td>Database dump directory on source server</td><td><code>/tmp/cloud-migration</code></td></tr><tr><td>Dumpfile filename</td><td><code>cloud-migration.dmp</code></td></tr><tr><td>Source data pump target directory</td><td><code>CLOUD_MIGRATION_DIR</code></td></tr><tr><td>Target database name</td><td>ATP01</td></tr><tr><td>Oracle Cloud Region</td><td>Ashburn, United States</td></tr><tr><td>Object Storage namespace</td><td>abcdefgh</td></tr><tr><td>Bucket name</td><td>cloud-migration</td></tr><tr><td>Workspace ID</td><td>1234567890</td></tr><tr><td>Workspace name</td><td>CONTOSO_WEB</td></tr><tr><td>Workspace administrator username</td><td>admin</td></tr><tr><td>Workspace schema name</td><td>contoso_apps</td></tr><tr><td>Auxiliary schema names</td><td>logger</td></tr><tr><td>APEX applications</td><td>1000 - Contoso Web; 1400 - Contoso Content Management System</td></tr><tr><td>Working directory on workstation</td><td><code>/home/jdoe/cloud-migration</code></td></tr></tbody></table><blockquote><p><strong>Note</strong></p><p>The source server does not expose the database port 1521. Connection to the database from my workspace requires using a SSH tunnel.</p></blockquote><h3 id="Tools-Required"><a href="#Tools-Required" class="headerlink" title="Tools Required"></a>Tools Required</h3><p>Install the following software in the environment that </p><ul><li><a href="https://www.oracle.com/database/technologies/appdev/sqlcl.html">SQLcl</a></li><li><a href="https://www.oracle.com/database/technologies/instant-client.html">Oracle Instant Client</a><ul><li>Basic</li><li>Tools (includes the Oracle Data Pump utilities expdp and impdp)</li></ul></li></ul><h2 id="Export-Components-from-Old-Database"><a href="#Export-Components-from-Old-Database" class="headerlink" title="Export Components from Old Database"></a>Export Components from Old Database</h2><h3 id="Export-APEX-Workspace-and-Applications"><a href="#Export-APEX-Workspace-and-Applications" class="headerlink" title="Export APEX Workspace and Applications"></a>Export APEX Workspace and Applications</h3><ol><li><p>Start SQLcl:</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql /nolog</span><br></pre></td></tr></table></figure></li><li><p>Create SSH tunnel and local port forwarding:</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sshtunnel oracle<span class="variable">@dev</span>.contoso.com <span class="operator">-</span>L <span class="number">1523</span>:localhost:<span class="number">1521</span></span><br></pre></td></tr></table></figure></li><li><p>Connect to the dataabse as <em>contoso_apps</em>:</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">connect</span> contoso_apps<span class="operator">/</span>secret@<span class="operator">/</span><span class="operator">/</span>localhost:<span class="number">1523</span><span class="operator">/</span>XE</span><br></pre></td></tr></table></figure></li><li><p>Obtained the workspace ID:</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> to_char(workspace_id) <span class="keyword">from</span> apex_workspaces <span class="keyword">where</span> workspace <span class="operator">=</span> <span class="string">&#x27;CONTOSO_WEB&#x27;</span>;</span><br></pre></td></tr></table></figure></li><li><p>Export the workspace:</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apex export <span class="operator">-</span>workspaceid <span class="number">1234567890</span> <span class="operator">-</span>expWorkspace</span><br></pre></td></tr></table></figure><blockquote><p>This will produce a file named after the workspace ID, e.g. <code>w1234567890.sql</code></p></blockquote></li><li><p>Export <strong>all</strong> APEX applications in the workspace:</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apex export <span class="operator">-</span>workspaceid <span class="number">1234567890</span></span><br></pre></td></tr></table></figure><blockquote><p>Optionally, specify only the applications by id, using the <code>-applicationid</code> parameter. The export process would produce files named after the application ID, e.g. <code>f1000.sql</code> and <code>f1400.sql</code>.</p></blockquote></li><li><p>If there are any REST services to be migrated, then execute the following:</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spool rest_services.sql</span><br><span class="line">rest export</span><br><span class="line">spool off</span><br></pre></td></tr></table></figure></li><li><p>Logout.</p></li><li><p>If REST services were exported, then execute the following:</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;/&quot;</span> &gt;&gt; rest_services.sql</span><br></pre></td></tr></table></figure></li></ol><h3 id="Export-Schemas"><a href="#Export-Schemas" class="headerlink" title="Export Schemas"></a>Export Schemas</h3><p>Login to the source database using SSH as user <em>oracle</em>. The subsequent commands in this section will be executed on the source server.</p><ol><li>Login to the database as <em>SYSDBA</em>: <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlplus <span class="operator">/</span> <span class="keyword">as</span> sysdba</span><br></pre></td></tr></table></figure></li><li>Create the target data dump directory: <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">host mkdir <span class="operator">/</span>tmp<span class="operator">/</span>cloud<span class="operator">-</span>migration</span><br></pre></td></tr></table></figure></li><li>Create the directory object: <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> directory CLOUD_MIGRATION_DIR <span class="keyword">as</span> <span class="string">&#x27;/tmp/cloud-migration&#x27;</span>;</span><br></pre></td></tr></table></figure></li><li>Grant the <em>system</em> user <code>READ</code> and <code>WRITE</code> privileges: <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> read, write <span class="keyword">on</span> directory CLOUD_MIGRATION_DIR <span class="keyword">to</span> <span class="keyword">system</span>;</span><br></pre></td></tr></table></figure></li><li>Exit SQL*Plus.    </li><li>Run the export data pump utility (expdp) to export the schema objects: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">expdp system schemas=logger,contoso_apps  \</span><br><span class="line">  directory=CLOUD_MIGRATION_DIR dumpfile=cloud-migration.dmp \</span><br><span class="line">  logfile=exp_cloud-migration.log</span><br></pre></td></tr></table></figure></li><li>Logout from the source server.</li></ol><h3 id="Preparing-for-Import"><a href="#Preparing-for-Import" class="headerlink" title="Preparing for Import"></a>Preparing for Import</h3><ol><li>Grab the dumpfile (and log file if necessary): <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r oracle@dev.contoso.com:/tmp/cloud-migration/* .</span><br></pre></td></tr></table></figure></li><li>The local working directory <code>/home/jdoe/cloud-migration</code> should now contain the following files:<ul><li><code>cloud-migration.dmp</code></li><li><code>exp_cloud-migration.log</code></li><li><code>f1000.sql</code></li><li><code>f1400.sql</code></li><li><code>rest_services.sql</code></li><li><code>w1234567890.sql</code></li></ul></li></ol><h2 id="Import-Components-into-ADB"><a href="#Import-Components-into-ADB" class="headerlink" title="Import Components into ADB"></a>Import Components into ADB</h2><h3 id="Import-the-Workspace"><a href="#Import-the-Workspace" class="headerlink" title="Import the Workspace"></a>Import the Workspace</h3><ol><li>Login to the ADB’s APEX <em>Administration Services</em> as the <em>admin</em> user: <img src="/content/id/1920/apex_instance_admin_login.png" class="" title="Login screen"><span class="caption">Login screen</span></li><li>Use the <em>Manage Workspaces</em> utilities to import the workspace from the file <code>w1234567890.sql</code>.</li><li>During the import process, create the workspace schema. Set the password and space quota as required. <img src="/content/id/1920/create_schema.png" class="" title="Create workspace schema"><span class="caption">Create workspace schema</span></li></ol><h3 id="Prerequisites-for-Using-IMPDP-with-ADB"><a href="#Prerequisites-for-Using-IMPDP-with-ADB" class="headerlink" title="Prerequisites for Using IMPDP with ADB"></a>Prerequisites for Using IMPDP with ADB</h3><p>Data can be imported into an ADB using Oracle Data Pump. However, since we do not access to the database server’s file system, <a href="https://docs.cloud.oracle.com/iaas/Content/Object/Concepts/objectstorageoverview.htm">Object Storage</a> must be used to deliver the dumpfile. </p><p>The official instructions to prepare for data pump can be found <a href="https://docs.oracle.com/en/cloud/paas/atp-cloud/atpug/load-data-data-pump.html#GUID-30DB1EEA-DB45-49EA-9E97-DF49A9968E24">here</a>. The following is a summary account of what I did.</p><h4 id="Object-Storage"><a href="#Object-Storage" class="headerlink" title="Object Storage"></a>Object Storage</h4><ol><li>Access the Oracle Cloud Object Storage. <img src="/content/id/1920/goto-object-storage.png" class="" title="Access Object Storage"><span class="caption">Access Object Storage</span></li><li>Create a bucket and name it <code>cloud-migration</code>. <img src="/content/id/1920/create-bucket.png" class="" title="Create bucket"><span class="caption">Create bucket</span></li><li>Take note of the Object Storage namespace (1) that is required for determining the URI for the dumpfile. <img src="/content/id/1920/bucket-details.png" class="" title="Bucket details"><span class="caption">Bucket details</span></li><li>Upload the dumpfile <code>cloud-migration.dmp</code> to the bucket. </li></ol><h4 id="Set-Cloud-Credentials-for-ADB"><a href="#Set-Cloud-Credentials-for-ADB" class="headerlink" title="Set Cloud Credentials for ADB"></a>Set Cloud Credentials for ADB</h4><ol><li><a href="https://docs.cloud.oracle.com/iaas/Content/Identity/Tasks/managingcredentials.htm#two">Generate an Auth Token</a> for a user in the tenant with the necessary access to the bucket and its contents. <img src="/content/id/1920/generate-auth-token.png" class="" title="Generate an Auth Token"><span class="caption">Generate an Auth Token</span></li><li>Set the Cloud Object Storage credentials: <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span></span><br><span class="line">  dbms_cloud.create_credential(</span><br><span class="line">    credential_name <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;DEF_CRED_NAME&#x27;</span></span><br><span class="line">    , username <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;jdoe&#x27;</span></span><br><span class="line">    , password <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;the_generated_auth_token&#x27;</span></span><br><span class="line">  );</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="operator">/</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="Instant-Client-Setup-for-ADB"><a href="#Instant-Client-Setup-for-ADB" class="headerlink" title="Instant Client Setup for ADB"></a>Instant Client Setup for ADB</h4><p>Official instructions for setting up your system to connect to the database using the tools provided by the Oracle Instant Client, including the Oracle Data Pump utilies needed for importing the data, can be found <a href="https://docs.oracle.com/en/cloud/paas/atp-cloud/atpug/connect-preparing.html#GUID-EFAFA00E-54CC-47C7-8C71-E7868279EF3B">here</a>.</p><p>Here’s a quick overview of what I did:</p><ol><li><p>Download the Cient Credentials (Wallet) from the ADB’s Service Console.</p> <img src="/content/id/1920/download-wallet.png" class="" title="Download wallet"><span class="caption">Download wallet</span></li><li><p>Set the enviroment variable <code>TNS_ADMIN</code>:</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> TNS_ADMIN=/home/jdoe/.wallets/atp01</span><br></pre></td></tr></table></figure><blockquote><p>The Oracle Wallet, <code>sqlnet.ora</code> and <code>tnsnames.ora</code> files will be stored in this path. The directory contents are required by the Oracle Instant Client tools to resolve the network service names for connecting to the ADB. The environment variable <strong>must</strong> be set prior to running any of these applications. </p></blockquote></li><li><p>Create the wallet directory:</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$TNS_ADMIN</span></span><br></pre></td></tr></table></figure></li><li><p>Extract the contents of the ZIP file into the wallet directory:</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip wallet_ATP01.zip -d <span class="variable">$TNS_ADMIN</span></span><br></pre></td></tr></table></figure></li><li><p>The wallet contains a <code>sqlnet.ora</code> file. Replace the path <code>?/network/admin</code>, specified for the parameter <code>DIRECTORY</code>, with the wallet’s path (<code>TNS_ADMIN</code>).</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i .bak <span class="string">&quot;s|?/network/admin|<span class="variable">$TNS_ADMIN</span>|g&quot;</span> <span class="variable">$TNS_ADMIN</span>/sqlnet.ora</span><br></pre></td></tr></table></figure></li></ol><h3 id="Create-Auxiliary-Schemas"><a href="#Create-Auxiliary-Schemas" class="headerlink" title="Create Auxiliary Schemas"></a>Create Auxiliary Schemas</h3><ol><li>Launch SQLcl: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql /nolog</span><br></pre></td></tr></table></figure></li><li>Login to the ADB using SQLcl as <em>admin</em>, the administrator account created when the database was provisioned. <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">connect</span> admin<span class="operator">/</span>supersecret<span class="variable">@atp01</span>_high</span><br></pre></td></tr></table></figure></li><li>Create the auxiliary user and grant needed privileges and quota. For example: <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Create user and set quota on DATA, the tablespace for users in ADB.</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> logger identified <span class="keyword">by</span> &quot;secret&quot; quota <span class="number">50</span>M <span class="keyword">on</span> data;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Grant privileges required by Logger.</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">connect</span>, <span class="keyword">create</span> <span class="keyword">view</span>, <span class="keyword">create</span> job, <span class="keyword">create</span> <span class="keyword">table</span>, <span class="keyword">create</span> sequence</span><br><span class="line">  , <span class="keyword">create</span> <span class="keyword">trigger</span>, <span class="keyword">create</span> <span class="keyword">procedure</span>, <span class="keyword">create</span> <span class="keyword">any</span> context <span class="keyword">to</span> logger;</span><br></pre></td></tr></table></figure></li><li>Logout from the database.</li></ol><h3 id="Import-Schema-Objects"><a href="#Import-Schema-Objects" class="headerlink" title="Import Schema Objects"></a>Import Schema Objects</h3><ol><li><p>Run the import data pump utility (impdp), avoiding the recreation of certain objects as specified by the <code>exclude</code> option:</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">impdp admin@atp01_high directory=data_pump_dir credential=def_cred_name \</span><br><span class="line">  dumpfile=https://objectstorage.us-ashburn-1.oraclecloud.com/n/abcdefgh/b/cloud-migration/o/cloud-migration.dmp \</span><br><span class="line">  schemas=logger,contoso_apps parallel=16 transform=segment_attributes:n \</span><br><span class="line">  transform=dwcs_cvt_iots:y transform=constraint_use_default_index:y \</span><br><span class="line">  exclude=cluster,db_link,user,tablespace_quota,default_role</span><br></pre></td></tr></table></figure><blockquote><ul><li>Details about the DBMS_CLOUD Package File URI format can be found <a href="https://docs.oracle.com/en/cloud/paas/atp-cloud/atpug/file-uri-formats.html#GUID-5D3E1614-ADF2-4DB5-B2B2-D5613F10E4FA">here</a>. The namespace was noted in an earlier section of this post.</li><li>The exclusions include the creation of a user and modifications of certain properties about the user. The schemas were created in earlier sections of this article. They are redundant and will likely result in errors.</li><li>Take note of the data pump logs. If necessary, <a href="https://docs.oracle.com/en/cloud/paas/atp-cloud/atpug/load-data-data-pump.html#GUID-CC7F258C-5D58-475B-8361-467C35FB0745">download</a> a copy for further analysis and future reference.</li></ul></blockquote></li></ol><h3 id="Import-Applications"><a href="#Import-Applications" class="headerlink" title="Import Applications"></a>Import Applications</h3><ol><li>Launch SQLcl: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql /nolog</span><br></pre></td></tr></table></figure></li><li>Login to the ADB as the workspace schema user: <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">connect</span> contoso_apps<span class="operator">/</span>secret<span class="variable">@atp01</span>_high</span><br></pre></td></tr></table></figure></li><li>Set the workspace: <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apex_util.set_workspace(<span class="string">&#x27;CONTOSO_WEB&#x27;</span>);</span><br></pre></td></tr></table></figure></li><li>Load and execute each application export file to import the application to the target workspace: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@f1000.sql</span><br><span class="line">@f1400.sql</span><br></pre></td></tr></table></figure></li><li>Import the REST services if any: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@rest_services.sql</span><br></pre></td></tr></table></figure></li><li>Exit the application.</li></ol><h2 id="Post-Migration-Tasks"><a href="#Post-Migration-Tasks" class="headerlink" title="Post-Migration Tasks"></a>Post-Migration Tasks</h2><p>After migrating the applications and data, here are some recommended tasks:</p><ul><li><i class="fa fa-check-square"></i> Check for missing grants and assign them as necessary.</li><li><i class="fa fa-check-square"></i> Re-create and database links required by the application.</li><li><i class="fa fa-check-square"></i> Search for objects like packages and triggers that did not compile successfully during the import process. Fix any issues and recompile the objects.</li><li><i class="fa fa-check-square"></i> Note the issues highlighted in the <a href="/content/id/1919">previous post</a> concerning workspace developer/administrator access.</li><li><i class="fa fa-check-square"></i> Test all applications.</li></ul><p>Hope I didn’t miss any steps. If you do notice any or mistakes, please let me know in the comments below.</p><p>Thanks for reading!</p>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/">Infrastructure</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/oracle-cloud/">Oracle Cloud</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/cloud/">cloud</category>
      
      <category domain="https://fuzziebrain.com/tags/oci/">oci</category>
      
      <category domain="https://fuzziebrain.com/tags/oracle/">oracle</category>
      
      <category domain="https://fuzziebrain.com/tags/autonomous/">autonomous</category>
      
      <category domain="https://fuzziebrain.com/tags/alwaysfree/">alwaysfree</category>
      
      <category domain="https://fuzziebrain.com/tags/data-migration/">data migration</category>
      
      
      <comments>https://fuzziebrain.com/content/id/1920/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Autonomous DB - The Developers&#39; Playground</title>
      <link>https://fuzziebrain.com/content/id/1919/</link>
      <guid>https://fuzziebrain.com/content/id/1919/</guid>
      <pubDate>Sun, 22 Sep 2019 22:43:59 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/1919/playground-470402_1280x720.jpg&quot; class=&quot;&quot; title=&quot;Kids&amp;amp;apos; Playground&quot;&gt;&lt;span class=&quot;caption&quot;&gt;Kids&amp;amp;apos; Playground&lt;/span&gt;

&lt;p&gt;As mentioned in a previous &lt;a href=&quot;/content/id/1919/&quot;&gt;post&lt;/a&gt;, the &lt;a href=&quot;https://oracle.com/cloud/free/&quot;&gt;Free Tier&lt;/a&gt; for &lt;a href=&quot;https://cloud.oracle.com/&quot;&gt;Oracle Cloud&lt;/a&gt; (OCI) is every Oracle Developer’s dream. For a while now, I have hosted a personal &lt;a href=&quot;https://apex.oracle.com/&quot;&gt;Oracle Application Express&lt;/a&gt; (APEX) instance on Linode. It currently runs an older Oracle Database 11gR2 &lt;a href=&quot;https://oracle.com/xe/&quot;&gt;Express Edition&lt;/a&gt; (XE), and I would like to upgrade it to version 18c. The key issue I had though, was that the existing virtual machine hosted on &lt;a href=&quot;https://www.linode.com/?r=41672b20d515344de465e9ed44c1a75356445597&quot;&gt;Linode&lt;/a&gt;, only has one gigabyte of RAM and that does not meet the 18c XE minimum requirement of two. That left me procrastinating for a long time, but perhaps a blessing in disguise. With this new offering, the next steps are pretty obvious.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/1919/playground-470402_1280x720.jpg" class="" title="Kids&amp;apos; Playground"><span class="caption">Kids&amp;apos; Playground</span><p>As mentioned in a previous <a href="/content/id/1919/">post</a>, the <a href="https://oracle.com/cloud/free/">Free Tier</a> for <a href="https://cloud.oracle.com/">Oracle Cloud</a> (OCI) is every Oracle Developer’s dream. For a while now, I have hosted a personal <a href="https://apex.oracle.com/">Oracle Application Express</a> (APEX) instance on Linode. It currently runs an older Oracle Database 11gR2 <a href="https://oracle.com/xe/">Express Edition</a> (XE), and I would like to upgrade it to version 18c. The key issue I had though, was that the existing virtual machine hosted on <a href="https://www.linode.com/?r=41672b20d515344de465e9ed44c1a75356445597">Linode</a>, only has one gigabyte of RAM and that does not meet the 18c XE minimum requirement of two. That left me procrastinating for a long time, but perhaps a blessing in disguise. With this new offering, the next steps are pretty obvious.</p><span id="more"></span><p>After <a href="/content/id/1918/">setting up</a> my new OCI development environment, the next task I looked into was exporting an existing workspace, and then importing it into the new APEX instance, hosted on an <a href="https://www.oracle.com/database/what-is-autonomous-database.html">Autonomous Database</a> (ADB). During the import process, the you will be asked to either assign an existing schema or create a new one. If you are using an exsiting schema, be sure to include the necessary database privileges for an APEX parsing schema. This all went pretty much as expected, very smoothly!</p><p>However, my workspace did not have an Application Express user, commonly called “admin” (ADMIN), that had workspace access and administrative rights. Hence, I was unable to login to the migrated workspace.</p><p>APEX in ADB is configured to use database user accounts for workspace access. Similar to configuring the workspace access with LDAP, HTTP Header Variable or Social Sign In authentication schemes, a matching Application Express user is required. If your workspace user matches up with a database user, then that user should have no troubles logging in. This user assumes whatever rights the equivalent Application Express user has been granted.</p><p>Suppose I have the following:</p><ul><li><strong>Workspace</strong>: myworkspace</li><li><strong>Schema</strong>: myschema</li><li><strong>Administrator’s username</strong>: jdoe</li></ul><p>To allow JDOE access to the workspace, create a database user with the same name. Do this using either SQL Developer, SQL*PLus or SQLcl. Instructions to connect to the ADB can be found <a href="https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/user/connect-tools.html">here</a>. Login as ADMIN, the administrator account created when the ADB was provisioned.</p><p>Once connected, execute the command:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> jdoe identified <span class="keyword">by</span> &quot;mySuper!P@55&quot;;</span><br></pre></td></tr></table></figure><p>For the purpose of authenticating to APEX, no specific privileges or quota’s are necessary. Login to the workspace using the workspace and database user’s credentials.</p><img src="/content/id/1919/set-apex-account-password.png" class="" title="Set APEX account password"><span class="caption">Set APEX account password</span><p>The Application Express account with the same username will need to have its password reset. If this is not done, you will continually be prompted to do so. Strangely, clicking on that big blue button and then using the password change dialog does not seem to perform this successfully for me. What worked was using the user and group management utilities and then forced setting the user’s password.</p><p>Alternatively, before exporting the workspace, create an APEX workspace administrator with the same username as its schema, e.g. MYSCHEMA. Note that the ADB’s APEX Instance Administration functionality is severely limited and does not appear to allow management of workspace users and groups, so the user must be added from the old instance.</p><h2 id="Workspace-Authentication-with-Database-Accounts"><a href="#Workspace-Authentication-with-Database-Accounts" class="headerlink" title="Workspace Authentication with Database Accounts"></a>Workspace Authentication with Database Accounts</h2><p>How Oracle has laid out the approach for managing the APEX environment is limiting, but for good reason. It also does present a different perspective on how an administrator manages developer access to the resource.</p><p>We know that with ADB, we have access to a variety of tools for using the dataabase:</p><ul><li>APEX</li><li>SQL Developer Web (SQLDEVWEB)</li><li>Oracle ML SQL Notebooks (OML)</li><li>SQL Developer (SQLDEV)</li><li>SQLcl</li><li>Oracle REST Data Services (ORDS); and</li><li>Traditional connectors like OCI, JDBC and ODBC.</li></ul><p>An indispensible item in an APEX developer toolchain is access to the database schema. The ability to browse, modify and compile schema objects are an essential part of what we do. Depending on company policies and best practices, there are varying access levels and approaches. For example, workspaces available on apex.oracle.com, only allows developers to access the database schema through SQL Workshop. I’m sure you’d agree, this impacts developer productivity. </p><p>For corporate APEX instances however, it’s not uncommon for database administrators to dish out the schema credentials to developers, either in the form of usernames and passwords, or an encrypted SQLDEV connnection export file. But what happens when the password expires, or one of the developers decide to change the it?</p><p>One approach I’m inclined to use these days is to create for developers, a personal account, and then grant them ability to proxy as the APEX schema user.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- As a privileged user, execute:</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> myschema <span class="keyword">grant</span> <span class="keyword">connect</span> through jdoe;</span><br></pre></td></tr></table></figure><p>In the context of APEX+ADB, here are some examples of how we could benefit from this approach:</p><ul><li>JDOE uses <strong>one</strong> account to access APEX App Builder and workspace schema user using the tool of choice. For example, JDOE could connect to the database as MYSCHEMA by simply authenticating using the username <code>jdoe[myschema]</code> and logon with his/her password.</li><li>DBAs can, through profiles, apply standards like password expiration and complexity. When a developer leaves the organisation, there is no need to reset the schema password and communicate that to everyone else involved.</li></ul><h3 id="SQL-Developer-Web"><a href="#SQL-Developer-Web" class="headerlink" title="SQL Developer Web"></a>SQL Developer Web</h3><p>To enable access to a schema, it must first be REST-enabled. For schemas linked to APEX workspaces, one option is to use the RESTful Services utility. For other schemas though, the <a href="https://docs.oracle.com/en/database/oracle/sql-developer-web/19.1/sdweb/about-sdw.html#GUID-A79032C3-86DC-4547-8D39-85674334B4FE">official documentation</a> dictates that we execute the procedure <code>ords_admin.enable_schema</code>, for example:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span></span><br><span class="line">  ords_admin.enable_schema(</span><br><span class="line">    p_enabled <span class="operator">=</span><span class="operator">&gt;</span> <span class="literal">true</span></span><br><span class="line">    , p_schema <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;JDOE&#x27;</span></span><br><span class="line">    , p_url_mapping_type <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;BASE_PATH&#x27;</span></span><br><span class="line">    , p_url_mapping_pattern <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;jdoe&#x27;</span></span><br><span class="line">    , p_auto_rest_auth <span class="operator">=</span><span class="operator">&gt;</span> <span class="keyword">null</span></span><br><span class="line">  );</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure><p>To access SQLDEVWEB, JDOE would have to use the URL in the following pattern:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://&lt;TENANT_CODE&gt;-&lt;ADB_NAME&gt;.adb.&lt;REGION_ID&gt;.oraclecloudapps.com/ords/&lt;SCHEMA_ALIAS&gt;/_sdw/?nav=worksheet</span><br></pre></td></tr></table></figure><blockquote><p><em>where</em></p><ul><li><code>&lt;TENANT_CODE&gt;</code> - a random string assigned to all ADB resources in the tenant. This can be easily obtained using the links in the Service Console.</li><li><code>&lt;ADB_NAME&gt;</code> - the ADB’s database name.</li><li><code>&lt;REGION_ID&gt;</code> - the <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/regions.htm">region</a> identifier where the ADB instance was created in.</li><li><code>&lt;SCHEMA&gt;</code> - the value specified in <code>p_url_mapping_pattern</code> above.</li></ul></blockquote><p>Unfortunately, it appears that SQLDEVWEB currently does not support proxy user access. Hopefully this would be possible in the future.</p><h3 id="Oracle-ML-SQL-Notebooks"><a href="#Oracle-ML-SQL-Notebooks" class="headerlink" title="Oracle ML SQL Notebooks"></a>Oracle ML SQL Notebooks</h3><p>I haven’t done a lot with this tool, but if you are familiar with <a href="https://jupyter.org/">Jupyter</a>, it sounds very similar, just seemingly SQL-centric, designed for data analytics and a means to keep good records of data processing workflows.</p><p>Enabling database accounts access to OML is pretty simple and straightforward. Either enable users through OML as ADMIN, or grant users the role <code>OML_DEVELOPER</code>. OML users are provisioned personal workspaces that they could then grant other developers access to. One scenario in how this might be useful, is for MYSCHEMA to grant JDOE access to its workspace for running analytics and visualization code that had been collected through an APEX application.</p><p>All these is cool isn’t? And it’s just the beginning!</p>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/">Infrastructure</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/oracle-cloud/">Oracle Cloud</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/cloud/">cloud</category>
      
      <category domain="https://fuzziebrain.com/tags/oci/">oci</category>
      
      <category domain="https://fuzziebrain.com/tags/oracle/">oracle</category>
      
      <category domain="https://fuzziebrain.com/tags/autonomous/">autonomous</category>
      
      <category domain="https://fuzziebrain.com/tags/alwaysfree/">alwaysfree</category>
      
      
      <comments>https://fuzziebrain.com/content/id/1919/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>That One Thing</title>
      <link>https://fuzziebrain.com/content/id/1918/</link>
      <guid>https://fuzziebrain.com/content/id/1918/</guid>
      <pubDate>Sat, 21 Sep 2019 09:21:54 GMT</pubDate>
      
      <description>&lt;img src=&quot;/content/id/1918/baby-560891_1280x720.jpg&quot; class=&quot;&quot; title=&quot;A helping hand&quot;&gt;&lt;span class=&quot;caption&quot;&gt;A helping hand&lt;/span&gt;

&lt;p&gt;Too good to be true? No, it’s true!!!&lt;/p&gt;
&lt;p&gt;After hearing the rumours for a few years now, Mr Larry Ellison finally &lt;a href=&quot;https://www.youtube.com/watch?v=3pkV26sI7D0&quot;&gt;announced&lt;/a&gt; the availablility of a Free Tier for the Oracle Cloud. The gift bundle includes &lt;strong&gt;two&lt;/strong&gt; small compute instances and &lt;strong&gt;two&lt;/strong&gt; &lt;a href=&quot;https://www.oracle.com/database/what-is-autonomous-database.html&quot;&gt;Autonomous Databases&lt;/a&gt;. These offerings are a tiny fraction of what the Oracle Cloud provides, but are sufficient for Oracle Developers to maintain their own 24x7 development environments and possibly even production applications for small businesses and non-profit organisations.&lt;/p&gt;
&lt;p&gt;Like everyone else in the &lt;a href=&quot;https://apex.oracle.com/&quot;&gt;Oracle Application Express (APEX)&lt;/a&gt; community, I wasted no time in getting my account provisioned and am currently working towards moving workspaces and applications from my old personal APEX instance, hosted on &lt;a href=&quot;https://www.linode.com/?r=41672b20d515344de465e9ed44c1a75356445597&quot;&gt;Linode&lt;/a&gt;.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<img src="/content/id/1918/baby-560891_1280x720.jpg" class="" title="A helping hand"><span class="caption">A helping hand</span><p>Too good to be true? No, it’s true!!!</p><p>After hearing the rumours for a few years now, Mr Larry Ellison finally <a href="https://www.youtube.com/watch?v=3pkV26sI7D0">announced</a> the availablility of a Free Tier for the Oracle Cloud. The gift bundle includes <strong>two</strong> small compute instances and <strong>two</strong> <a href="https://www.oracle.com/database/what-is-autonomous-database.html">Autonomous Databases</a>. These offerings are a tiny fraction of what the Oracle Cloud provides, but are sufficient for Oracle Developers to maintain their own 24x7 development environments and possibly even production applications for small businesses and non-profit organisations.</p><p>Like everyone else in the <a href="https://apex.oracle.com/">Oracle Application Express (APEX)</a> community, I wasted no time in getting my account provisioned and am currently working towards moving workspaces and applications from my old personal APEX instance, hosted on <a href="https://www.linode.com/?r=41672b20d515344de465e9ed44c1a75356445597">Linode</a>.</p><span id="more"></span><p>To get started, simply click on this <a href="https://www.oracle.com/cloud/free/">link</a> and sign up. The process is similar to what I had earlier described in this <a href="/content/id/1903/">post</a>. You will need to decide on a tenant name and home region. The home region is where all <em>Always Free</em> resources will be created. Afterwhich, you will be asked to provide your cellphone number and credit card information for verification. </p><img src="/content/id/1918/oci-architecture-diagram.png" class="" title="Layout of resources"><span class="caption">Layout of resources</span><p>I am an APEX developer by trade, so setting up a working APEX instance was top on the list. The Autonomous Database comes with APEX included, so setting that up was an easy sequence of mouse clicks and keystrokes. For my main database, I went with an Automous Transaction Processing (ATP) database. </p><p>Unfortunately, on the backburner, is a convenient method for enabling “vanity URLs” that we are still waiting for Oracle to provide. Meanwhile, there are workarounds using a web server to proxy HTTP traffic, and so, to facilitate that, I also provisioned a compute instance and installed <a href="https://www.docker.com/">Docker</a>. I intend to develop using other programming languages and so, running an Apache web server in a container made sense. Besides, running <a href="https://certbot.eff.org/">Certbot</a> to manage <a href="https://letsencrypt.org/">Let’s Encrypt</a> certificates was much easier.</p><p>Ideally, I would situate the ATP in a private subnet, away from the prying eyes of the Internet, but it is a shared infrastructure and there are limitations. There are ways to restrict database connections through the use of access control lists, but it doesn’t allow, for example, the database to access a REST API running on a second compute instance over a private network.</p><p>For the second set of <em>Always Free</em> resources, I intend to setup an Autonomous Datawarehouse (ADW) and a <a href="https://jupyter.org/">Jupyter</a> Notebook instance for refreshing my knowledge on Machine Learning, stay tuned to hear more about that.</p><p>If you needed more guidance on creating these resources, please check out some of my previous posts on creating and accessing these resources:</p><ul><li><a href="/content/id/1904/">Compute instance</a></li><li><a href="/content/id/1911/">Autonomous Database</a></li></ul><p>Note that since publishing these posts, the Oracle Cloud Infrastructure console has changed somewhat.</p>]]></content:encoded>
      
      
      <category domain="https://fuzziebrain.com/categories/technology/">Technology</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/">Infrastructure</category>
      
      <category domain="https://fuzziebrain.com/categories/technology/infrastructure/oracle-cloud/">Oracle Cloud</category>
      
      
      <category domain="https://fuzziebrain.com/tags/orclapex/">orclapex</category>
      
      <category domain="https://fuzziebrain.com/tags/cloud/">cloud</category>
      
      <category domain="https://fuzziebrain.com/tags/oci/">oci</category>
      
      <category domain="https://fuzziebrain.com/tags/oracle/">oracle</category>
      
      <category domain="https://fuzziebrain.com/tags/autonomous/">autonomous</category>
      
      <category domain="https://fuzziebrain.com/tags/iaas/">IaaS</category>
      
      <category domain="https://fuzziebrain.com/tags/infrastructure/">infrastructure</category>
      
      
      <comments>https://fuzziebrain.com/content/id/1918/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
