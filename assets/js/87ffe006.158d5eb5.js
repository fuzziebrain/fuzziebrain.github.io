"use strict";(self.webpackChunknewsite=self.webpackChunknewsite||[]).push([[34045],{3905:(e,t,a)=>{a.r(t),a.d(t,{MDXContext:()=>d,MDXProvider:()=>c,mdx:()=>E,useMDXComponents:()=>p,withMDXComponents:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o.apply(this,arguments)}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=n.createContext({}),m=function(e){return function(t){var a=p(t.components);return n.createElement(e,o({},t,{components:a}))}},p=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(d.Provider,{value:t},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},x=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),m=p(a),c=r,u=m["".concat(l,".").concat(c)]||m[c]||h[c]||o;return a?n.createElement(u,s(s({ref:t},d),{},{components:a})):n.createElement(u,s({ref:t},d))}));function E(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=x;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[u]="string"==typeof e?e:r,l[1]=s;for(var d=2;d<o;d++)l[d]=a[d];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}x.displayName="MDXCreateElement"},74643:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var n=a(87462),r=(a(67294),a(3905));const o={title:"Quickstart APEX on the OCI",description:"Provision an OCI compute quickly with Oracle APEX RPMs available through Oracle Enterprise Linux YUM repositories.",tags:["oracle apex","oracle rest data services","oracle cloud","deployment","devops","orclapex","orclords","sqlcl","oci"],last_update:{date:new Date("2023-08-13T12:30:00.000Z"),author:"Adrian Png"}},l=void 0,s={unversionedId:"oracle-cloud/oracle-apex/quickstart-apex-on-the-oci/quickstart-apex-on-the-oci",id:"oracle-cloud/oracle-apex/quickstart-apex-on-the-oci/quickstart-apex-on-the-oci",title:"Quickstart APEX on the OCI",description:"Provision an OCI compute quickly with Oracle APEX RPMs available through Oracle Enterprise Linux YUM repositories.",source:"@site/notes/oracle-cloud/oracle-apex/quickstart-apex-on-the-oci/quickstart-apex-on-the-oci.md",sourceDirName:"oracle-cloud/oracle-apex/quickstart-apex-on-the-oci",slug:"/oracle-cloud/oracle-apex/quickstart-apex-on-the-oci/",permalink:"/tech-tnt/oracle-cloud/oracle-apex/quickstart-apex-on-the-oci/",draft:!1,tags:[{label:"oracle apex",permalink:"/tech-tnt/tags/oracle-apex"},{label:"oracle rest data services",permalink:"/tech-tnt/tags/oracle-rest-data-services"},{label:"oracle cloud",permalink:"/tech-tnt/tags/oracle-cloud"},{label:"deployment",permalink:"/tech-tnt/tags/deployment"},{label:"devops",permalink:"/tech-tnt/tags/devops"},{label:"orclapex",permalink:"/tech-tnt/tags/orclapex"},{label:"orclords",permalink:"/tech-tnt/tags/orclords"},{label:"sqlcl",permalink:"/tech-tnt/tags/sqlcl"},{label:"oci",permalink:"/tech-tnt/tags/oci"}],version:"current",lastUpdatedBy:"Adrian Png",lastUpdatedAt:1691929800,formattedLastUpdatedAt:"Aug 13, 2023",frontMatter:{title:"Quickstart APEX on the OCI",description:"Provision an OCI compute quickly with Oracle APEX RPMs available through Oracle Enterprise Linux YUM repositories.",tags:["oracle apex","oracle rest data services","oracle cloud","deployment","devops","orclapex","orclords","sqlcl","oci"],last_update:{date:"2023-08-13T12:30:00.000Z",author:"Adrian Png"}},sidebar:"tutorialSidebar",previous:{title:"Oracle APEX",permalink:"/tech-tnt/category/oracle-apex"},next:{title:"Cloud Native",permalink:"/tech-tnt/category/cloud-native"}},i={},d=[{value:"Required OCI Resources",id:"required-oci-resources",level:2},{value:"Task 1 - Set Environment Variables",id:"task-1---set-environment-variables",level:2},{value:"Task 2 - Install the Packages",id:"task-2---install-the-packages",level:2},{value:"Task 3 - Install Oracle APEX",id:"task-3---install-oracle-apex",level:2},{value:"Task 4 - Install and Configure ORDS",id:"task-4---install-and-configure-ords",level:2},{value:"Task 5 - Deploy APEX Patch Set Bundle",id:"task-5---deploy-apex-patch-set-bundle",level:2},{value:"Task 6 - Configure the ORDS Service",id:"task-6---configure-the-ords-service",level:2},{value:"Note About Oracle APEX Static Resources",id:"note-about-oracle-apex-static-resources",level:2}],m={toc:d};function p(e){let{components:t,...o}=e;return(0,r.mdx)("wrapper",(0,n.Z)({},m,o,{components:t,mdxType:"MDXLayout"}),(0,r.mdx)("p",null,(0,r.mdx)("img",{alt:"Light trails on the street.",src:a(1501).Z,width:"1280",height:"720"})),(0,r.mdx)("p",null,"It's here! Earlier this week, ",(0,r.mdx)("a",{parentName:"p",href:"https://www.linkedin.com/in/chrishoina"},"Chris Hoina")," from the ",(0,r.mdx)("a",{parentName:"p",href:"https://www.oracle.com/database/technologies/appdev/rest.html"},"Oracle REST Data Services")," (ORDS) team, ",(0,r.mdx)("a",{parentName:"p",href:"https://followthecoffee.com/ords-sqlcl-apex-via-yum-and-dnf/"},"shared")," that ",(0,r.mdx)("a",{parentName:"p",href:"https://apex.oracle.com"},"Oracle APEX"),", ORDS, and ",(0,r.mdx)("a",{parentName:"p",href:"https://www.oracle.com/database/sqldeveloper/technologies/sqlcl/"},"SQLcl")," are now readily available as RPM packages in Oracle's YUM repositories."),(0,r.mdx)("p",null,"First, a huge \"THANK YOU\" to the team that's behind this release. It goes a long way to help anyone on the fence to jump right into APEX right away! And if it helps, here's some of the notes and scripts that used while attempting to understand what they are, and how to use these RPMs effectively."),(0,r.mdx)("h2",{id:"required-oci-resources"},"Required OCI Resources"),(0,r.mdx)("p",null,"For this exercise, all I needed were the following OCI resources:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"A Compute with 1 OCPU and 1 GB memory. I chose the latest version of Oracle Linux 8."),(0,r.mdx)("li",{parentName:"ul"},"An OCI DB system with 1 OCPU and 8 GB memory running Oracle Database Enterprise Edition. Yes, this is possible with the Oracle's recent support for ",(0,r.mdx)("a",{parentName:"li",href:"https://amperecomputing.com"},"Ampere")," chips. Watch the announcement below for more information."),(0,r.mdx)("li",{parentName:"ul"},"A Virtual Cloud Network (VCN) with at least two private subnets, the necessary routes and Network Security Groups to provide access for SSH, HTTP, and database traffic between their respective source and destinations.")),(0,r.mdx)("youtube",{youTubeId:"uepPIwxkIpo"}),(0,r.mdx)("blockquote",null,(0,r.mdx)("p",{parentName:"blockquote"},(0,r.mdx)("strong",{parentName:"p"},"Note")),(0,r.mdx)("p",{parentName:"blockquote"},"For the Compute instance, I wanted to provision and run ORDS on an Ampere compute, but unfortunately, these RPMs are not available yet on the YUM repositories for ARM (I heard that it's coming very soon \ud83d\ude09). Do know that ORDS can run with no issues on ARM. I had demonstrated that previously in this ",(0,r.mdx)("a",{parentName:"p",href:"/content/id/2011"},"post"),".")),(0,r.mdx)("blockquote",null,(0,r.mdx)("p",{parentName:"blockquote"},(0,r.mdx)("em",{parentName:"p"},"Update 14-AUG-2023:")),(0,r.mdx)("p",{parentName:"blockquote"},(0,r.mdx)("a",{parentName:"p",href:"https://twitter.com/krisrice"},"Kris Rice")," pointed out that the packages are ",(0,r.mdx)("em",{parentName:"p"},"noarch"),". If you wanted to deploy on an ARM Compute, for now, you will need to add the repository for the ",(0,r.mdx)("em",{parentName:"p"},"x86_64")," architecture before running any of the steps in this article."),(0,r.mdx)("pre",{parentName:"blockquote"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"REGION=$(oci-metadata | grep \"Canonical Region Name\" | sed 's/^.*:\\s*//') && \\\n  sudo dnf config-manager --add-repo https://yum.${REGION}.oci.oraclecloud.com/repo/OracleLinux/OL8/oci/included/x86_64/\n"))),(0,r.mdx)("h2",{id:"task-1---set-environment-variables"},"Task 1 - Set Environment Variables"),(0,r.mdx)("p",null,"I like automating my builds with scripts, and a huge part of it involves writing Bash commands that ",(0,r.mdx)("strong",{parentName:"p"},"do not")," embed parameters and secrets so they are reusable, and more importantly, secure. Here are a few environment variables that I defined:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"export SYS_PASSWORD=mysecretpassword\nexport DB_HOST=mydb.myprivatesubnet.myvcn.oraclevcn.com\nexport DB_PORT=1521\nexport SERVICE_NAME=mypdb.myprivatesubnet.myvcn.oraclevcn.com\nexport APEX_PUB_USER_PASSWORD=mysecretpassword\nexport APEX_LISTENER_PASSWORD=mysecretpassword\nexport APEX_REST_PUB_USER_PASSWORD=mysecretpassword\nexport ORDS_PROXY_USER_PASSWORD=mysecretpassword\nexport INTERNAL_ADMIN_PASSWORD=mysecretpassword\nexport APEX_VERSION=23.1\nexport APEX_PATCHSET_NUMBER=3\nexport ENABLE_DATABASE_ACTIONS=Y\nexport TLS_TERMINATED_AT_LB=Y\nexport JDBC_MAX_LIMIT=50\nexport JDBC_INITIALLIMIT=10\nexport APEX_TABLESPACE=SYSAUX\nexport APEX_FILES_TABLESPACE=SYSAUX\nexport APEX_TEMP_TABLESPACE=TEMP\nexport ORDS_PROXY_USER_TABLESPACE=SYSAUX\nexport ORDS_PROXY_USER_TEMP_TABLESPACE=TEMP\nexport ORDS_METADATA_TABLESPACE=SYSAUX\nexport ORDS_METADATA_TEMP_TABLESPACE=TEMP\nexport ORDS_CONFIG_PATH=/etc/ords/config\n\n### Do not modify the variables below ###\nexport APEX_BASE_VERSION=$APEX_VERSION.0\nexport APEX_IMAGES_PATH=/i/$APEX_BASE_VERSION/\nexport APEX_PATCH_VERSION=$APEX_VERSION.$APEX_PATCHSET_NUMBER\n")),(0,r.mdx)("p",null,"The key variables that you will want to pay attention to are:"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Environment Variable"),(0,r.mdx)("th",{parentName:"tr",align:null},"Notes"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"SYS_PASSWORD"),(0,r.mdx)("td",{parentName:"tr",align:null},"The password for the ",(0,r.mdx)("em",{parentName:"td"},"SYS")," database account.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"DB_HOST"),(0,r.mdx)("td",{parentName:"tr",align:null},"The DB system's scan DNS name or IP address of its node.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"DB_PORT"),(0,r.mdx)("td",{parentName:"tr",align:null},"The DB system's port that is by default: ",(0,r.mdx)("inlineCode",{parentName:"td"},"1521"),".")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"SERVICE_NAME"),(0,r.mdx)("td",{parentName:"tr",align:null},"The service name of the PDB that APEX will be installed in.",(0,r.mdx)("sup",null,"1"))),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"APEX_PUB_USER_PASSWORD"),(0,r.mdx)("td",{parentName:"tr",align:null},"Set a suitable password and store it safely.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"APEX_LISTENER_PASSWORD"),(0,r.mdx)("td",{parentName:"tr",align:null},"Set a suitable password and store it safely.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"APEX_REST_PUB_USER_PASSWORD"),(0,r.mdx)("td",{parentName:"tr",align:null},"Set a suitable password and store it safely.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"ORDS_PROXY_USER_PASSWORD"),(0,r.mdx)("td",{parentName:"tr",align:null},"Set a suitable password and store it safely.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"INTERNAL_ADMIN_PASSWORD"),(0,r.mdx)("td",{parentName:"tr",align:null},"The password for the ",(0,r.mdx)("em",{parentName:"td"},"ADMIN")," user that allows you to administer the APEX instance.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"APEX_VERSION"),(0,r.mdx)("td",{parentName:"tr",align:null},"The desired major release version.",(0,r.mdx)("sup",null,"2"))),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"APEX_PATCHSET_NUMBER"),(0,r.mdx)("td",{parentName:"tr",align:null},"The desired patch set bundle number that is available through the YUM repository.",(0,r.mdx)("sup",null,"3"))))),(0,r.mdx)("blockquote",null,(0,r.mdx)("ol",{parentName:"blockquote"},(0,r.mdx)("li",{parentName:"ol"},"This is usually the combination of the PDB's name and the DB system's host domain name. You may also retrieve the service name from the PDB's connect strings available through the OCI Console."),(0,r.mdx)("li",{parentName:"ol"},"Only version 22.2 and 23.1 are available at the time of writing."),(0,r.mdx)("li",{parentName:"ol"},"Only patch set bundle 3 for APEX version 23.1 is available at the time of writing. Set it to ",(0,r.mdx)("inlineCode",{parentName:"li"},"0")," if there are no patches to be installed."))),(0,r.mdx)("p",null,"The installation process will require running Bash commands as the ",(0,r.mdx)("em",{parentName:"p"},"opc")," and ",(0,r.mdx)("em",{parentName:"p"},"oracle")," users. The latter is created when the RPMs are installed. To make the environment variables available to all users, I placed the ",(0,r.mdx)("inlineCode",{parentName:"p"},"export")," statements in the file ",(0,r.mdx)("inlineCode",{parentName:"p"},"/tmp/setenv.sh"),". Before executing the tasks below, I would load the environment variables with this command:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},". /tmp/setenv.sh\n")),(0,r.mdx)("h2",{id:"task-2---install-the-packages"},"Task 2 - Install the Packages"),(0,r.mdx)("p",null,"Let's get the Oracle APEX, Oracle APEX static resources, and ORDS packages installed. We will do this as the ",(0,r.mdx)("em",{parentName:"p"},"opc")," user that is provisioned with every OCI Compute instance. It also has ",(0,r.mdx)("em",{parentName:"p"},"sudo")," privileges to run scripts as ",(0,r.mdx)("em",{parentName:"p"},"root")," and ",(0,r.mdx)("em",{parentName:"p"},"oracle"),". The latter is created when either the ORDS or APEX RPMs are installed."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},". /tmp/setenv.sh\n\nsudo dnf install -y --skip-broken \\\n  oracle-apex${APEX_VERSION} \\\n  oracle-apex${APEX_VERSION}-images \\\n  oracle-apex${APEX_PATCH_VERSION}-patch \\\n  ords \\\n  jdk-17\n")),(0,r.mdx)("blockquote",null,(0,r.mdx)("p",{parentName:"blockquote"},(0,r.mdx)("strong",{parentName:"p"},"Note")),(0,r.mdx)("p",{parentName:"blockquote"},"ORDS requires the Java Development Kit (JDK) to be installed. Versions 11 and 17 are supported, and I chose the latter.")),(0,r.mdx)("h2",{id:"task-3---install-oracle-apex"},"Task 3 - Install Oracle APEX"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Run this task as ",(0,r.mdx)("em",{parentName:"p"},"oracle")," user. You may switch to the user using the command:"),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"sudo su - oracle\n"))),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Load the environment variables."),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},". /tmp/setenv.sh\n"))),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Change the working directory."),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"cd /opt/oracle/apex/${APEX_BASE_VERSION}/\n"))),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Run the APEX installation script."),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"sql sys/\"$SYS_PASSWORD\"@$DB_HOST:$DB_PORT/$SERVICE_NAME as SYSDBA <<EOF\n  whenever sqlerror exit 17\n\n  -- 3.1 Check that the desired version of APEX hasn't already been installed.\n  --     Note that the installer script already checks this, so this is just to\n  --     save a little time.\n  declare\n    l_status dba_registry.status%type;\n  begin\n    begin\n      select status into l_status\n      from dba_registry\n      where comp_id = 'APEX' and version like '${APEX_VERSION}%';\n\n      raise_application_error(-20901, 'APEX version ${APEX_VERSION} already installed.');\n    exception\n      when no_data_found then\n        null;\n    end;\n  end;\n  /\n\n  -- 3.2 Install APEX using the silent installer script.\n  @apxsilentins.sql $APEX_TABLESPACE $APEX_FILES_TABLESPACE $APEX_TEMP_TABLESPACE $APEX_IMAGES_PATH $APEX_PUB_USER_PASSWORD $APEX_LISTENER_PASSWORD $APEX_REST_PUB_USER_PASSWORD $INTERNAL_ADMIN_PASSWORD\nEOF\n")))),(0,r.mdx)("h2",{id:"task-4---install-and-configure-ords"},"Task 4 - Install and Configure ORDS"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},"If you have not already done so, run this as ",(0,r.mdx)("em",{parentName:"li"},"oracle")," user:")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"sudo su - oracle\n")),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},"And load the environment variables.")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},". /tmp/setenv.sh\n")),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},"Install and configure ORDS.")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},'ords --config $ORDS_CONFIG_PATH install \\\n  --admin-user sys \\\n  --proxy-user \\\n  --db-hostname $DB_HOST \\\n  --db-port $DB_PORT \\\n  --db-servicename $SERVICE_NAME \\\n  --schema-tablespace $ORDS_METADATA_TABLESPACE \\\n  --schema-temp-tablespace $ORDS_METADATA_TEMP_TABLESPACE \\\n  --proxy-user-tablespace $ORDS_PROXY_USER_TABLESPACE \\\n  --proxy-user-temp-tablespace $ORDS_PROXY_USER_TEMP_TABLESPACE \\\n  --log-folder \\$HOME/install-ords-$(date +"%Y%m%d%H%M%S") \\\n  --feature-sdw $([[ "$ENABLE_DATABASE_ACTIONS" =~ (Y|y) ]] && echo \'true\' || echo \'false\') \\\n  --password-stdin <<EOF\n$SYS_PASSWORD\n$ORDS_PROXY_USER_PASSWORD\nEOF\n\nords --config $ORDS_CONFIG_PATH config set jdbc.InitialLimit ${JDBC_INITIAL_LIMIT:-10}\nords --config $ORDS_CONFIG_PATH config set jdbc.MaxLimit ${JDBC_MAX_LIMIT:-3}\n\nif [[ "${TLS_TERMINATED_AT_LB:-N}" =~ (Y|y) ]]; then\n  ords --config $ORDS_CONFIG_PATH \\\n    config set security.httpsHeaderCheck "X-Forwarded-Proto: https"\nfi\n')),(0,r.mdx)("h2",{id:"task-5---deploy-apex-patch-set-bundle"},"Task 5 - Deploy APEX Patch Set Bundle"),(0,r.mdx)("blockquote",null,(0,r.mdx)("p",{parentName:"blockquote"},(0,r.mdx)("strong",{parentName:"p"},"IMPORTANT"),"\nPerform this task only if the desired patch set bundle is available.")),(0,r.mdx)("p",null,"If your Oracle Support customer support identifier (CSI) is only for your OCI tenancy, then you should be aware that your CSI does not permit you to download patches, including Oracle APEX patch set bundles. To get them, you would have to submit a service request (SR) to have Oracle Support prepare a SFTP download for you, and it can be a pain... sometimes. It appears, starting with APEX 23.1.3, the patches are easily available through a simple RPM install."),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Run this task as ",(0,r.mdx)("em",{parentName:"p"},"oracle")," user. You may switch to the user using the command:"),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"sudo su - oracle\n"))),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Load the environment variables."),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},". /tmp/setenv.sh\n"))),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Install the patch and update the instance's ",(0,r.mdx)("inlineCode",{parentName:"p"},"IMAGE_PREFIX"),"."),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"rpm -q oracle-apex${APEX_PATCH_VERSION}-patch\n\nif [[ $? = 0 ]]; then\n  cd /opt/oracle/apex/${APEX_PATCH_VERSION}/\n\n  sql sys/\"$SYS_PASSWORD\"@$DB_HOST:$DB_PORT/$SERVICE_NAME as SYSDBA <<EOF\n    whenever sqlerror exit 18\n\n    declare\n      l_status dba_registry.status%type;\n    begin\n      begin\n        select status into l_status\n        from dba_registry\n        where comp_id = 'APEX' and version = '${APEX_PATCH_VERSION}';\n\n        raise_application_error(-20901, 'APEX version ${APEX_PATCH_VERSION} already installed.');\n      exception\n        when no_data_found then\n          null;\n      end;\n    end;\n   /\n\n   @catpatch.sql\nEOF\n\n  if [[ $? = 0 && -d \"/opt/oracle/apex/$APEX_PATCH_VERSION/images/\" ]]; then\n    sql sys/\"$SYS_PASSWORD\"@$DB_HOST:$DB_PORT/$SERVICE_NAME as SYSDBA <<EOF\n      exec apex_instance_admin.set_parameter('IMAGE_PREFIX', '/i/$APEX_PATCH_VERSION/');\n      commit;\nEOF\n  fi\nfi\n")))),(0,r.mdx)("h2",{id:"task-6---configure-the-ords-service"},"Task 6 - Configure the ORDS Service"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},"Enable the ORDS service to start and stop automatically at boot and shutdown respectively.",(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl enable ords\n"))),(0,r.mdx)("li",{parentName:"ol"},"Either reboot the server, or start up the service for the first time.",(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl start ords\n"))),(0,r.mdx)("li",{parentName:"ol"},"If necessary, configure the operating system's firewall to allow traffic to port ",(0,r.mdx)("inlineCode",{parentName:"li"},"8080"),".",(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"sudo sh -s <<EOF\nfirewall-cmd --zone=public --add-port 8080/tcp --permanent\nfirewall-cmd --reload\nEOF\n")))),(0,r.mdx)("h2",{id:"note-about-oracle-apex-static-resources"},"Note About Oracle APEX Static Resources"),(0,r.mdx)("p",null,'When either the APEX "images" or patch is installed, a symbolic link is created in ',(0,r.mdx)("inlineCode",{parentName:"p"},"/etc/ords/config/global/doc_root/i"),". For version 23.1 and patch version 23.1.3, you should expect to see this:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"[root@ords01 i]# ls -ltr\ntotal 0\nlrwxrwxrwx. 1 root root 30 Aug 13 01:30 23.1.0 -> /opt/oracle/apex/23.1.0/images\nlrwxrwxrwx. 1 root root 30 Aug 13 01:30 23.1.3 -> /opt/oracle/apex/23.1.3/images\n")),(0,r.mdx)("p",null,"For 22.2, unfortunately, this is not created during the RPM installation. The files are also deployed to the path ",(0,r.mdx)("inlineCode",{parentName:"p"},"/opt/oracle/apex/images/22.2.0"),". To quickly resolve the issue, create the link using the script below."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},'sudo sh -s <<EOF\n[[ ! -d "$ORDS_CONFIG_PATH/global/doc_root/i" ]] && mkdir -p $ORDS_CONFIG_PATH/global/doc_root/i || echo "Directory exists"\nln -s /opt/oracle/apex/images/$APEX_PATCH_VERSION $ORDS_CONFIG_PATH/global/doc_root/i/$APEX_PATCH_VERSION\nEOF\n')),(0,r.mdx)("admonition",{type:"info"},(0,r.mdx)("p",{parentName:"admonition"},"Image by ",(0,r.mdx)("a",{href:"https://pixabay.com/users/publicdomainpictures-14/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=219915"},"PublicDomainPictures")," from ",(0,r.mdx)("a",{href:"https://pixabay.com//?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=219915"},"Pixabay"))))}p.isMDXComponent=!0},1501:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/abstract-219915_1280x720-08d275d73b91a6eab4dafeae354790d7.jpeg"}}]);