"use strict";(self.webpackChunknewsite=self.webpackChunknewsite||[]).push([[19038],{7347:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var a=n(85893),s=n(11151);const r={title:"Day 15 - 30 Days on the Oracle Cloud",tags:["oracle","cloud","oci","IaaS","infrastructure","devops","virtualbox"],slug:"id/1907",authors:["fuzziebrain"],categories:["Technology","Infrastructure","Oracle Cloud"],date:new Date("2019-03-13T21:00:00.000Z")},i=void 0,o={permalink:"/content/id/1907",source:"@site/posts/day-15-30-days-on-the-oracle-cloud/index.md",title:"Day 15 - 30 Days on the Oracle Cloud",description:"Photo by Genty",date:"2019-03-13T21:00:00.000Z",formattedDate:"March 13, 2019",tags:[{label:"oracle",permalink:"/content/tags/oracle"},{label:"cloud",permalink:"/content/tags/cloud"},{label:"oci",permalink:"/content/tags/oci"},{label:"IaaS",permalink:"/content/tags/iaa-s"},{label:"infrastructure",permalink:"/content/tags/infrastructure"},{label:"devops",permalink:"/content/tags/devops"},{label:"virtualbox",permalink:"/content/tags/virtualbox"}],readingTime:4.18,hasTruncateMarker:!0,authors:[{name:"Adrian Png",title:"Senior Cloud Solutions Architect @ Insum",url:"https://github.com/fuzziebrain",imageURL:"https://github.com/fuzziebrain.png",key:"fuzziebrain"}],frontMatter:{title:"Day 15 - 30 Days on the Oracle Cloud",tags:["oracle","cloud","oci","IaaS","infrastructure","devops","virtualbox"],slug:"id/1907",authors:["fuzziebrain"],categories:["Technology","Infrastructure","Oracle Cloud"],date:"2019-03-13T21:00:00.000Z"},unlisted:!1,prevItem:{title:"Social Sign In with Azure",permalink:"/content/id/1908"},nextItem:{title:"Day 11 - 30 Days on the Oracle Cloud",permalink:"/content/id/1906"}},l={authorsImageUrls:[void 0]},c=[{value:"In a Nutshell",id:"in-a-nutshell",level:2},{value:"Preparing OCI - Compartments and Networks",id:"preparing-oci---compartments-and-networks",level:2},{value:"Create OCI User and Generate API Key",id:"create-oci-user-and-generate-api-key",level:2},{value:"Create a Bucket on the Object Store",id:"create-a-bucket-on-the-object-store",level:2},{value:"Add a Cloud Profile",id:"add-a-cloud-profile",level:2},{value:"Deploy a VM to the Cloud",id:"deploy-a-vm-to-the-cloud",level:2},{value:"What Next?",id:"what-next",level:2}];function d(e){const t={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Photo by Genty",src:n(59585).Z+"",width:"1280",height:"720"})}),"\n",(0,a.jsxs)(t.p,{children:["One of my fondest memories of my previous job was working with ",(0,a.jsx)(t.a,{href:"https://www.vmware.com",children:"VMware"}),' virtualization products. With VMware Workstation, system administrators had the ability to "move" a virtual machine (VM) from a local workstation to vSphere. It was no surprise then that I was very exited (and itching to play) when ',(0,a.jsx)(t.a,{href:"https://www.virtualbox.org",children:"VirtualBox"})," 6.0 was released with a new feature: support for exporting a VM to ",(0,a.jsx)(t.a,{href:"https://cloud.oracle.com/iaas/",children:"Oracle Cloud Infrastructure (OCI)"}),"!"]}),"\n",(0,a.jsx)(t.h2,{id:"in-a-nutshell",children:"In a Nutshell"}),"\n",(0,a.jsx)(t.p,{children:"Here are major tasks that we need to accomplish:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"#Preparing-OCI-Compartments-and-Networks",children:"Prepare OCI to receive our VM"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"#Create-OCI-User-and-Generate-API-Key",children:"Create an OCI user and generate an API key"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"#Create-a-Bucket-on-the-Object-Store",children:"Create a Bucket in the Object Store"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"#Add-a-Cloud-Profile",children:"Configure VirtualBox 6, add a Cloud Profile"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"#Deploy-a-VM-to-the-Cloud",children:"Deploy a VM to the OCI"})}),"\n"]}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"All tasks were performed in a Windows environment."}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"preparing-oci---compartments-and-networks",children:"Preparing OCI - Compartments and Networks"}),"\n",(0,a.jsxs)(t.p,{children:["On ",(0,a.jsx)(t.a,{href:"/content/id/1904",children:"Day 2 of our journey"}),", we went through some of the steps needed to successfully deploy a Compute Instance (VM). Follow the instructions to create a compartment and the required network components, but ",(0,a.jsx)(t.strong,{children:"do not"}),' create the Compute Instance. One cool feature I failed to mention in that article though, was the "easy option". I had gone through step-by-step, how to create the Virtual Cloud Network (VCN), subnets, an Internet Gateway and a Route Table, which is important should you need to customise the network layout. However, the OCI does offer us a simple alternative:']}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Quick VCN Setup",src:n(70960).Z+"",width:"1280",height:"800"})}),"\n",(0,a.jsxs)(t.p,{children:["Selecting the option ",(0,a.jsx)(t.em,{children:"CREATE VIRTUAL CLOUD NETWORK PLUS RELATED RESOURCES"})," will automatically create the VCN, an Internet Gateway, a Route Table and three public subnets, with one in every Availability Domain."]}),"\n",(0,a.jsx)(t.h2,{id:"create-oci-user-and-generate-api-key",children:"Create OCI User and Generate API Key"}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsxs)(t.p,{children:["An ",(0,a.jsx)(t.a,{href:"https://www.oracle.com/cloud/paas/identity-cloud-service.html",children:"Oracle Identity Cloud Service (IDCS)"})," account is provisioned when a cloud account is created. Adding API keys to IDCS users follows a different path and will not be discussed here. We will instead, create an OCI user for deploying VMs to the cloud."]}),"\n"]}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["Click ",(0,a.jsx)("i",{class:"fa bars"}),(0,a.jsx)("i",{class:"fa caret-right"}),"Identity ",(0,a.jsx)("i",{class:"fa caret-right"}),"Users"]}),"\n",(0,a.jsxs)(t.li,{children:["Click ",(0,a.jsx)(t.em,{children:"Create User"})," and enter:","\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"NAME"}),": ",(0,a.jsx)(t.em,{children:"Desired username"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"DESCRIPTION"}),": ",(0,a.jsx)(t.em,{children:"User's full name"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Email"}),": ",(0,a.jsx)(t.em,{children:"Email address for recovery"}),"\n",(0,a.jsx)(t.img,{alt:"\xa0",src:n(26888).Z+"",width:"1280",height:"800"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.li,{children:"Click on the username of the new user created."}),"\n",(0,a.jsxs)(t.li,{children:["Optionally, click on ",(0,a.jsx)(t.em,{children:"Create/Reset Password"})," to generate a single-use password."]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Next, setup your workstation to work with OCI APIs."}),"\n",(0,a.jsxs)(t.p,{children:["Please follow the instructions ",(0,a.jsx)(t.a,{href:"https://docs.cloud.oracle.com/iaas/Content/API/Concepts/apisigningkey.htm",children:"here"})," to obtain the necessary keys and OCIDs. The artifact and values needed are documented on this ",(0,a.jsx)(t.a,{href:"https://docs.cloud.oracle.com/iaas/Content/API/Concepts/sdkconfig.htm",children:"page"}),". To summarise, here's what's needed:"]}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["On Windows, please install ",(0,a.jsx)(t.a,{href:"https://git-scm.com/download/win",children:"Git Bash"}),". On Linux, most of the tools and commands are already available in the operating system."]}),"\n",(0,a.jsxs)(t.li,{children:["Create the directory ",(0,a.jsx)(t.code,{children:"~/.oci"})," that stores the private key, and for the various SDKs available, a configuration file."]}),"\n",(0,a.jsx)(t.li,{children:"Generate a private key and its corresponding public key in PEM format."}),"\n",(0,a.jsxs)(t.li,{children:["Grab the contents of the public key and add this to the OCI user account's collection of API Keys.\n",(0,a.jsx)(t.img,{alt:"\xa0",src:n(46376).Z+"",width:"1280",height:"800"})]}),"\n",(0,a.jsxs)(t.li,{children:["Copy the fingerprint from OCI console.\n",(0,a.jsx)(t.img,{alt:"\xa0",src:n(68343).Z+"",width:"1280",height:"800"})]}),"\n",(0,a.jsx)(t.li,{children:"Obtain the OCID values from the OCI console."}),"\n",(0,a.jsx)(t.li,{children:"Decide which region to deploy the server."}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"create-a-bucket-on-the-object-store",children:"Create a Bucket on the Object Store"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["Click ",(0,a.jsx)("i",{class:"fa bars"}),(0,a.jsx)("i",{class:"fa caret-right"}),"Object Storage ",(0,a.jsx)("i",{class:"fa caret-right"}),"Object Storage"]}),"\n",(0,a.jsxs)(t.li,{children:["Click the ",(0,a.jsx)(t.em,{children:"Create Bucket"})," button."]}),"\n",(0,a.jsxs)(t.li,{children:["Enter a ",(0,a.jsx)(t.em,{children:"Bucket Name"})," and choose ",(0,a.jsx)(t.em,{children:"Standard"})," for the ",(0,a.jsx)(t.em,{children:"Storage Tier"}),". Click the ",(0,a.jsx)(t.em,{children:"Create Bucket"})," button when done.\n",(0,a.jsx)(t.img,{src:n(80435).Z+"",width:"1280",height:"800"})]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"add-a-cloud-profile",children:"Add a Cloud Profile"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:"Launch VirtualBox 6."}),"\n",(0,a.jsxs)(t.li,{children:["Click File ",(0,a.jsx)("i",{class:"fa caret-right"}),"Cloud Profile Manager"]}),"\n",(0,a.jsxs)(t.li,{children:["Click the ",(0,a.jsx)(t.em,{children:"Add"})," button and enter a profile name."]}),"\n",(0,a.jsxs)(t.li,{children:["Enter the required OCIDs and values relating to the API key. Be sure to hit ",(0,a.jsx)(t.em,{children:"Apply"})," when done!\n",(0,a.jsx)(t.img,{src:n(17220).Z+"",width:"1282",height:"801"})]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"deploy-a-vm-to-the-cloud",children:"Deploy a VM to the Cloud"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["Click File ",(0,a.jsx)("i",{class:"fa caret-right"}),"Export Appliance"]}),"\n",(0,a.jsxs)(t.li,{children:["Select the VM to export and then click ",(0,a.jsx)(t.em,{children:"Next"}),"."]}),"\n",(0,a.jsxs)(t.li,{children:["For ",(0,a.jsx)(t.em,{children:"Format"}),", select ",(0,a.jsx)(t.em,{children:"Oracle Cloud Infrastructure"})," and then select the ",(0,a.jsx)(t.em,{children:"Account"})," that you wish to deploy the VM to.\n",(0,a.jsx)(t.img,{alt:"\xa0",src:n(9590).Z+"",width:"742",height:"579"})]}),"\n",(0,a.jsxs)(t.li,{children:["Click ",(0,a.jsx)(t.em,{children:"Next"}),". Using the private key and other information provided in the selected ",(0,a.jsx)(t.em,{children:"Cloud Profile"}),", VirtualBox will call the OCI APIs to retrieve information and available resource selections for the target Compute Instance. You may change the name of the new Compute Instance, select a different instance Shape or specify a disk size etc.\n",(0,a.jsx)(t.img,{alt:"\xa0",src:n(42688).Z+"",width:"742",height:"579"})]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["When ready, click the ",(0,a.jsx)(t.em,{children:"Export"})," button and VirtualBox will first export the VM as an image and then upload it to the target Object Store Bucket. Once the upload process is completed - and it can take a very long time - the OCI will create the instance from the image and voila! Like magic!"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"In the Final Stages!",src:n(47013).Z+"",width:"1280",height:"800"})}),"\n",(0,a.jsx)(t.h2,{id:"what-next",children:"What Next?"}),"\n",(0,a.jsxs)(t.p,{children:["For this simple proof-of-concept, I had created a base Oracle Enterprise Linux 7 using ",(0,a.jsx)(t.a,{href:"https://www.vagrantup.com/",children:"Vagrant"})," without putting anything much on it except the necessary user accounts so that I can access the Compute Instance later. This approach can be used, for example, to install and configure a full ",(0,a.jsx)(t.a,{href:"https://apex.oracle.com",children:"Oracle Application Express (APEX)"})," stack in VirtualBox, using either ",(0,a.jsx)(t.a,{href:"https://github.com/OraOpenSource/OXAR",children:"OXAR"})," or more recently, ",(0,a.jsx)(t.a,{href:"/content/id/1902",children:"helper scripts"})," for ",(0,a.jsx)(t.a,{href:"https://www.docker.com",children:"Docker"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},46376:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/oci-add-pub-key-db8c61385b4c61bc7e93fd19e5c48949.png"},68343:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/oci-api-key-fingerprint-63734bb3da27594c65d4fa797118fe2d.png"},47013:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/oci-compute-instance-provisioning-f223485b7197179a4ca80fc28bd4dbb4.png"},80435:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/oci-create-bucket-35a7bce027070728eecfa49ca281850c.png"},26888:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/oci-create-user-a84d470932dc26aca0df988f60f32388.png"},70960:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/oci-vcn-simple-bb6e01125e662bd4d3a7335606286f14.png"},17220:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/vbox-cloud-profile-600490ab7bfafe5cb24c5998d8077bc5.jpg"},42688:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/vbox-compute-instance-configuration-8333176ac7a8b21b37679a4c4dd66823.jpg"},9590:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/vbox-export-appliance-oci-8997582c37df7123aef549e66a114edf.jpg"},59585:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/wormhole-2514312_1280x720-53690bc18ffed4935f654fbaa1da4ae9.jpg"},11151:(e,t,n)=>{n.d(t,{Z:()=>o,a:()=>i});var a=n(67294);const s={},r=a.createContext(s);function i(e){const t=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(r.Provider,{value:t},e.children)}}}]);